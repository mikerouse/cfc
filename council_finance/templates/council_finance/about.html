{% extends "base.html" %}
{% load heroicons %}

{% block title %}{{ page_title }}{% endblock %}

{% block page_header %}
<div class="bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 border-b border-gray-200">
    <div class="max-w-none xl:max-w-desktop mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <!-- Hero Section -->
        <div class="text-center mb-12">
            <div class="flex justify-center mb-6">
                <div class="bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full p-4">
                    {% heroicon "chart-bar" size="extra-large" class="w-12 h-12 text-white" %}
                </div>
            </div>
            
            <h1 class="text-4xl sm:text-5xl lg:text-6xl font-bold text-gray-900 mb-6">
                About <span class="bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent">Council Finance Counters</span>
            </h1>
            
            <p class="text-xl text-gray-600 max-w-4xl mx-auto leading-relaxed">
                A comprehensive platform for tracking, analysing, and understanding UK council finances. 
                Built transparently with AI-powered insights and community contributions.
            </p>
        </div>

        <!-- Platform Stats -->
        <div class="grid grid-cols-2 lg:grid-cols-4 gap-6">
            <div class="bg-white/70 backdrop-blur-sm rounded-xl p-6 text-center border border-white/50">
                <div class="text-3xl font-bold text-blue-600 mb-2">{{ total_councils|floatformat:0 }}</div>
                <div class="text-sm font-medium text-gray-600">UK Councils</div>
            </div>
            <div class="bg-white/70 backdrop-blur-sm rounded-xl p-6 text-center border border-white/50">
                <div class="text-3xl font-bold text-indigo-600 mb-2">{{ total_data_fields|floatformat:0 }}</div>
                <div class="text-sm font-medium text-gray-600">Data Fields</div>
            </div>
            <div class="bg-white/70 backdrop-blur-sm rounded-xl p-6 text-center border border-white/50">
                <div class="text-3xl font-bold text-purple-600 mb-2">{{ total_contributions|floatformat:0 }}</div>
                <div class="text-sm font-medium text-gray-600">Contributions</div>
            </div>
            <div class="bg-white/70 backdrop-blur-sm rounded-xl p-6 text-center border border-white/50">
                <div class="text-3xl font-bold text-pink-600 mb-2">{{ latest_year.label|default:"2024/25" }}</div>
                <div class="text-sm font-medium text-gray-600">Latest Year</div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block content %}
<div class="max-w-none xl:max-w-desktop mx-auto px-4 sm:px-6 lg:px-8 py-12">
    
    <!-- What is Council Finance Counters? -->
    <section class="mb-16">
        <div class="lg:grid lg:grid-cols-2 lg:gap-12 lg:items-center">
            <div>
                <h2 class="text-3xl font-bold text-gray-900 mb-6">What is Council Finance Counters?</h2>
                <div class="prose prose-lg text-gray-600 mb-8">
                    <p>
                        Council Finance Counters is an open-source platform that makes UK council financial data 
                        accessible, understandable, and actionable. We transform complex financial statements 
                        into clear insights that help citizens, researchers, and policymakers understand how 
                        public money is spent.
                    </p>
                    <p>
                        Our AI-powered analysis provides contextual insights, while our social features let 
                        you follow councils, create custom lists, and track changes over time. Everything 
                        is built transparently with community contributions welcome.
                    </p>
                </div>
                
                <!-- CTA Buttons -->
                <div class="flex flex-col sm:flex-row gap-4">
                    <a href="/" class="inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-lg text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl">
                        {% heroicon "chart-bar" size="small" class="w-5 h-5 mr-2" %}
                        Explore Council Data
                    </a>
                    <a href="{{ github_repo_url }}" class="inline-flex items-center justify-center px-6 py-3 border border-gray-300 text-base font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 transition-all duration-200" target="_blank" rel="noopener">
                        {% heroicon "code-bracket" size="small" class="w-5 h-5 mr-2" %}
                        View Source Code
                    </a>
                </div>
            </div>
            
            <div class="mt-10 lg:mt-0">
                <!-- System Architecture Diagram -->
                <div class="bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl p-8 border">
                    <h3 class="text-lg font-semibold text-gray-900 mb-6 text-center">How It Works</h3>
                    <div class="space-y-4">
                        <div class="flex items-center space-x-3">
                            <div class="flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                                <span class="text-sm font-semibold text-blue-600">1</span>
                            </div>
                            <div class="text-sm text-gray-700">Council financial data is collected and standardised</div>
                        </div>
                        <div class="flex items-center space-x-3">
                            <div class="flex-shrink-0 w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center">
                                <span class="text-sm font-semibold text-indigo-600">2</span>
                            </div>
                            <div class="text-sm text-gray-700">AI analyses the data to generate contextual insights</div>
                        </div>
                        <div class="flex items-center space-x-3">
                            <div class="flex-shrink-0 w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center">
                                <span class="text-sm font-semibold text-purple-600">3</span>
                            </div>
                            <div class="text-sm text-gray-700">Users can explore, compare, and track changes</div>
                        </div>
                        <div class="flex items-center space-x-3">
                            <div class="flex-shrink-0 w-8 h-8 bg-pink-100 rounded-full flex items-center justify-center">
                                <span class="text-sm font-semibold text-pink-600">4</span>
                            </div>
                            <div class="text-sm text-gray-700">Community contributes data and improvements</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Key Features -->
    <section class="mb-16">
        <div class="text-center mb-12">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">Key Features</h2>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                Everything you need to understand and track UK council finances
            </p>
        </div>

        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
            {% for feature in key_features %}
            <div class="bg-white rounded-xl border border-gray-200 p-6 hover:shadow-lg transition-shadow duration-200">
                <div class="flex items-center justify-center w-12 h-12 bg-gradient-to-r from-blue-100 to-indigo-100 rounded-xl mb-4">
                    {% heroicon feature.icon size="medium" class="w-6 h-6 text-blue-600" %}
                </div>
                <h3 class="text-lg font-semibold text-gray-900 mb-2">{{ feature.title }}</h3>
                <p class="text-gray-600 mb-3">{{ feature.description }}</p>
                <div class="text-sm font-medium text-blue-600">{{ feature.stats }}</div>
            </div>
            {% endfor %}
        </div>
    </section>

    <!-- Technology Stack -->
    <section class="mb-16">
        <div class="text-center mb-12">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">Built With Modern Technology</h2>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                Robust, scalable, and transparent technology choices
            </p>
        </div>

        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
            {% for tech in tech_stack %}
            <div class="bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-6 border">
                <h3 class="text-lg font-semibold text-gray-900 mb-2">{{ tech.name }}</h3>
                <p class="text-gray-600">{{ tech.description }}</p>
            </div>
            {% endfor %}
        </div>
    </section>

    <!-- GitHub Integration -->
    <section class="mb-16">
        <div class="bg-gradient-to-r from-gray-900 to-gray-800 rounded-2xl p-8 lg:p-12 text-white">
            <div class="lg:grid lg:grid-cols-2 lg:gap-12 lg:items-center">
                <div>
                    <h2 class="text-3xl font-bold mb-6">Open Source & Community Driven</h2>
                    <p class="text-gray-300 text-lg mb-8">
                        Council Finance Counters is completely open source. We believe in transparency, 
                        community contributions, and collaborative development. Join us in making public 
                        finance data more accessible to everyone.
                    </p>
                    
                    <div class="flex flex-col sm:flex-row gap-4 mb-8">
                        <a href="{{ github_repo_url }}" class="inline-flex items-center justify-center px-6 py-3 bg-white text-gray-900 font-medium rounded-lg hover:bg-gray-100 transition-colors duration-200" target="_blank" rel="noopener">
                            {% heroicon "code-bracket" size="small" class="w-5 h-5 mr-2" %}
                            Contribute Code
                        </a>
                        <a href="{{ github_issues_url }}" class="inline-flex items-center justify-center px-6 py-3 border border-gray-600 text-white font-medium rounded-lg hover:border-gray-500 hover:bg-gray-700 transition-colors duration-200" target="_blank" rel="noopener">
                            {% heroicon "exclamation-triangle" size="small" class="w-5 h-5 mr-2" %}
                            Report Issues
                        </a>
                    </div>
                </div>
                
                <div>
                    <!-- GitHub Stats -->
                    <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6 mb-6">
                        <h3 class="text-xl font-semibold mb-4">Repository Statistics</h3>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="text-center">
                                <div class="text-2xl font-bold text-yellow-400">{{ github_stats.stars }}</div>
                                <div class="text-sm text-gray-300">Stars</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-blue-400">{{ github_stats.forks }}</div>
                                <div class="text-sm text-gray-300">Forks</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-green-400">{{ contributors|length }}</div>
                                <div class="text-sm text-gray-300">Contributors</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-red-400">{{ github_stats.open_issues }}</div>
                                <div class="text-sm text-gray-300">Open Issues</div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Issues -->
                    {% if recent_issues %}
                    <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6">
                        <h3 class="text-lg font-semibold mb-4">Recent Activity</h3>
                        <div class="space-y-3">
                            {% for issue in recent_issues %}
                            <div class="flex items-start space-x-3">
                                <div class="flex-shrink-0 w-2 h-2 rounded-full bg-{% if issue.state == 'open' %}green{% else %}red{% endif %}-400 mt-2"></div>
                                <div class="flex-1 min-w-0">
                                    <p class="text-sm text-gray-300 truncate">{{ issue.title }}</p>
                                    <p class="text-xs text-gray-400">#{{ issue.number }} by {{ issue.user }}</p>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </section>

    <!-- Contributors -->
    {% if contributors %}
    <section class="mb-16">
        <div class="text-center mb-12">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">Contributors</h2>
            <p class="text-xl text-gray-600">
                Thank you to everyone who has contributed to this project
            </p>
        </div>

        <div class="flex flex-wrap justify-center gap-6">
            {% for contributor in contributors %}
            <a href="{{ contributor.html_url }}" target="_blank" rel="noopener" class="group">
                <div class="flex flex-col items-center p-4 bg-white rounded-xl border border-gray-200 hover:shadow-lg transition-all duration-200 group-hover:scale-105">
                    {% if contributor.avatar_url %}
                    <img src="{{ contributor.avatar_url }}" alt="{{ contributor.login }}" class="w-16 h-16 rounded-full mb-3">
                    {% else %}
                    <div class="w-16 h-16 rounded-full bg-gradient-to-r from-blue-400 to-indigo-500 flex items-center justify-center mb-3">
                        <span class="text-white font-semibold text-lg">{{ contributor.login|first|upper }}</span>
                    </div>
                    {% endif %}
                    <div class="text-sm font-medium text-gray-900">{{ contributor.login }}</div>
                    <div class="text-xs text-gray-500">{{ contributor.contributions }} contribution{{ contributor.contributions|pluralize }}</div>
                </div>
            </a>
            {% endfor %}
        </div>
    </section>
    {% endif %}

    <!-- Call to Action -->
    <section class="text-center">
        <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-8 lg:p-12 border">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">Get Involved</h2>
            <p class="text-xl text-gray-600 mb-8 max-w-3xl mx-auto">
                Whether you're a developer, researcher, journalist, or engaged citizen, 
                there are many ways to contribute to making council finance data more accessible.
            </p>
            
            <div class="grid md:grid-cols-3 gap-6 mb-8">
                <div class="text-center">
                    <div class="flex items-center justify-center w-12 h-12 bg-blue-100 rounded-xl mx-auto mb-4">
                        {% heroicon "code-bracket" size="medium" class="w-6 h-6 text-blue-600" %}
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Contribute Code</h3>
                    <p class="text-gray-600">Help improve the platform, fix bugs, or add new features</p>
                </div>
                <div class="text-center">
                    <div class="flex items-center justify-center w-12 h-12 bg-indigo-100 rounded-xl mx-auto mb-4">
                        {% heroicon "document" size="medium" class="w-6 h-6 text-indigo-600" %}
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Add Data</h3>
                    <p class="text-gray-600">Contribute financial data or help verify existing information</p>
                </div>
                <div class="text-center">
                    <div class="flex items-center justify-center w-12 h-12 bg-purple-100 rounded-xl mx-auto mb-4">
                        {% heroicon "exclamation-triangle" size="medium" class="w-6 h-6 text-purple-600" %}
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Report Issues</h3>
                    <p class="text-gray-600">Found a bug or have a suggestion? Let us know on GitHub</p>
                </div>
            </div>
            
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <a href="{{ github_repo_url }}" class="inline-flex items-center justify-center px-8 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-medium rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl" target="_blank" rel="noopener">
                    {% heroicon "code-bracket" size="small" class="w-5 h-5 mr-2" %}
                    Visit GitHub Repository
                </a>
                <a href="{{ github_issues_url }}" class="inline-flex items-center justify-center px-8 py-4 border border-gray-300 text-gray-700 font-medium rounded-xl bg-white hover:bg-gray-50 transition-colors duration-200" target="_blank" rel="noopener">
                    {% heroicon "exclamation-triangle" size="small" class="w-5 h-5 mr-2" %}
                    View Open Issues
                </a>
            </div>
        </div>
    </section>

</div>
{% endblock %}
