function Bm(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var pc={exports:{}},Hr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var om;function rg(){if(om)return Hr;om=1;var l=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function c(u,d,m){var w=null;if(m!==void 0&&(w=""+m),d.key!==void 0&&(w=""+d.key),"key"in d){m={};for(var b in d)b!=="key"&&(m[b]=d[b])}else m=d;return d=m.ref,{$$typeof:l,type:u,key:w,ref:d!==void 0?d:null,props:m}}return Hr.Fragment=i,Hr.jsx=c,Hr.jsxs=c,Hr}var cm;function ig(){return cm||(cm=1,pc.exports=rg()),pc.exports}var n=ig(),vc={exports:{}},Le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var um;function lg(){if(um)return Le;um=1;var l=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),w=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),S=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),k=Symbol.iterator;function h(p){return p===null||typeof p!="object"?null:(p=k&&p[k]||p["@@iterator"],typeof p=="function"?p:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,x={};function _(p,L,K){this.props=p,this.context=L,this.refs=x,this.updater=K||v}_.prototype.isReactComponent={},_.prototype.setState=function(p,L){if(typeof p!="object"&&typeof p!="function"&&p!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,p,L,"setState")},_.prototype.forceUpdate=function(p){this.updater.enqueueForceUpdate(this,p,"forceUpdate")};function le(){}le.prototype=_.prototype;function Z(p,L,K){this.props=p,this.context=L,this.refs=x,this.updater=K||v}var z=Z.prototype=new le;z.constructor=Z,y(z,_.prototype),z.isPureReactComponent=!0;var ae=Array.isArray,Q={H:null,A:null,T:null,S:null,V:null},fe=Object.prototype.hasOwnProperty;function de(p,L,K,ee,$,I){return K=I.ref,{$$typeof:l,type:p,key:L,ref:K!==void 0?K:null,props:I}}function Y(p,L){return de(p.type,L,void 0,void 0,void 0,p.props)}function J(p){return typeof p=="object"&&p!==null&&p.$$typeof===l}function re(p){var L={"=":"=0",":":"=2"};return"$"+p.replace(/[=:]/g,function(K){return L[K]})}var ne=/\/+/g;function ie(p,L){return typeof p=="object"&&p!==null&&p.key!=null?re(""+p.key):L.toString(36)}function ce(){}function je(p){switch(p.status){case"fulfilled":return p.value;case"rejected":throw p.reason;default:switch(typeof p.status=="string"?p.then(ce,ce):(p.status="pending",p.then(function(L){p.status==="pending"&&(p.status="fulfilled",p.value=L)},function(L){p.status==="pending"&&(p.status="rejected",p.reason=L)})),p.status){case"fulfilled":return p.value;case"rejected":throw p.reason}}throw p}function we(p,L,K,ee,$){var I=typeof p;(I==="undefined"||I==="boolean")&&(p=null);var he=!1;if(p===null)he=!0;else switch(I){case"bigint":case"string":case"number":he=!0;break;case"object":switch(p.$$typeof){case l:case i:he=!0;break;case M:return he=p._init,we(he(p._payload),L,K,ee,$)}}if(he)return $=$(p),he=ee===""?"."+ie(p,0):ee,ae($)?(K="",he!=null&&(K=he.replace(ne,"$&/")+"/"),we($,L,K,"",function(Ue){return Ue})):$!=null&&(J($)&&($=Y($,K+($.key==null||p&&p.key===$.key?"":(""+$.key).replace(ne,"$&/")+"/")+he)),L.push($)),1;he=0;var _e=ee===""?".":ee+":";if(ae(p))for(var ve=0;ve<p.length;ve++)ee=p[ve],I=_e+ie(ee,ve),he+=we(ee,L,K,I,$);else if(ve=h(p),typeof ve=="function")for(p=ve.call(p),ve=0;!(ee=p.next()).done;)ee=ee.value,I=_e+ie(ee,ve++),he+=we(ee,L,K,I,$);else if(I==="object"){if(typeof p.then=="function")return we(je(p),L,K,ee,$);throw L=String(p),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return he}function N(p,L,K){if(p==null)return p;var ee=[],$=0;return we(p,ee,"","",function(I){return L.call(K,I,$++)}),ee}function A(p){if(p._status===-1){var L=p._result;L=L(),L.then(function(K){(p._status===0||p._status===-1)&&(p._status=1,p._result=K)},function(K){(p._status===0||p._status===-1)&&(p._status=2,p._result=K)}),p._status===-1&&(p._status=0,p._result=L)}if(p._status===1)return p._result.default;throw p._result}var q=typeof reportError=="function"?reportError:function(p){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof p=="object"&&p!==null&&typeof p.message=="string"?String(p.message):String(p),error:p});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",p);return}console.error(p)};function X(){}return Le.Children={map:N,forEach:function(p,L,K){N(p,function(){L.apply(this,arguments)},K)},count:function(p){var L=0;return N(p,function(){L++}),L},toArray:function(p){return N(p,function(L){return L})||[]},only:function(p){if(!J(p))throw Error("React.Children.only expected to receive a single React element child.");return p}},Le.Component=_,Le.Fragment=c,Le.Profiler=d,Le.PureComponent=Z,Le.StrictMode=u,Le.Suspense=T,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,Le.__COMPILER_RUNTIME={__proto__:null,c:function(p){return Q.H.useMemoCache(p)}},Le.cache=function(p){return function(){return p.apply(null,arguments)}},Le.cloneElement=function(p,L,K){if(p==null)throw Error("The argument must be a React element, but you passed "+p+".");var ee=y({},p.props),$=p.key,I=void 0;if(L!=null)for(he in L.ref!==void 0&&(I=void 0),L.key!==void 0&&($=""+L.key),L)!fe.call(L,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&L.ref===void 0||(ee[he]=L[he]);var he=arguments.length-2;if(he===1)ee.children=K;else if(1<he){for(var _e=Array(he),ve=0;ve<he;ve++)_e[ve]=arguments[ve+2];ee.children=_e}return de(p.type,$,void 0,void 0,I,ee)},Le.createContext=function(p){return p={$$typeof:w,_currentValue:p,_currentValue2:p,_threadCount:0,Provider:null,Consumer:null},p.Provider=p,p.Consumer={$$typeof:m,_context:p},p},Le.createElement=function(p,L,K){var ee,$={},I=null;if(L!=null)for(ee in L.key!==void 0&&(I=""+L.key),L)fe.call(L,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&($[ee]=L[ee]);var he=arguments.length-2;if(he===1)$.children=K;else if(1<he){for(var _e=Array(he),ve=0;ve<he;ve++)_e[ve]=arguments[ve+2];$.children=_e}if(p&&p.defaultProps)for(ee in he=p.defaultProps,he)$[ee]===void 0&&($[ee]=he[ee]);return de(p,I,void 0,void 0,null,$)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(p){return{$$typeof:b,render:p}},Le.isValidElement=J,Le.lazy=function(p){return{$$typeof:M,_payload:{_status:-1,_result:p},_init:A}},Le.memo=function(p,L){return{$$typeof:S,type:p,compare:L===void 0?null:L}},Le.startTransition=function(p){var L=Q.T,K={};Q.T=K;try{var ee=p(),$=Q.S;$!==null&&$(K,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(X,q)}catch(I){q(I)}finally{Q.T=L}},Le.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},Le.use=function(p){return Q.H.use(p)},Le.useActionState=function(p,L,K){return Q.H.useActionState(p,L,K)},Le.useCallback=function(p,L){return Q.H.useCallback(p,L)},Le.useContext=function(p){return Q.H.useContext(p)},Le.useDebugValue=function(){},Le.useDeferredValue=function(p,L){return Q.H.useDeferredValue(p,L)},Le.useEffect=function(p,L,K){var ee=Q.H;if(typeof K=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ee.useEffect(p,L)},Le.useId=function(){return Q.H.useId()},Le.useImperativeHandle=function(p,L,K){return Q.H.useImperativeHandle(p,L,K)},Le.useInsertionEffect=function(p,L){return Q.H.useInsertionEffect(p,L)},Le.useLayoutEffect=function(p,L){return Q.H.useLayoutEffect(p,L)},Le.useMemo=function(p,L){return Q.H.useMemo(p,L)},Le.useOptimistic=function(p,L){return Q.H.useOptimistic(p,L)},Le.useReducer=function(p,L,K){return Q.H.useReducer(p,L,K)},Le.useRef=function(p){return Q.H.useRef(p)},Le.useState=function(p){return Q.H.useState(p)},Le.useSyncExternalStore=function(p,L,K){return Q.H.useSyncExternalStore(p,L,K)},Le.useTransition=function(){return Q.H.useTransition()},Le.version="19.1.0",Le}var dm;function ol(){return dm||(dm=1,vc.exports=lg()),vc.exports}var j=ol();const Um=Bm(j);var xc={exports:{}},Vr={},bc={exports:{}},yc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fm;function og(){return fm||(fm=1,function(l){function i(N,A){var q=N.length;N.push(A);e:for(;0<q;){var X=q-1>>>1,p=N[X];if(0<d(p,A))N[X]=A,N[q]=p,q=X;else break e}}function c(N){return N.length===0?null:N[0]}function u(N){if(N.length===0)return null;var A=N[0],q=N.pop();if(q!==A){N[0]=q;e:for(var X=0,p=N.length,L=p>>>1;X<L;){var K=2*(X+1)-1,ee=N[K],$=K+1,I=N[$];if(0>d(ee,q))$<p&&0>d(I,ee)?(N[X]=I,N[$]=q,X=$):(N[X]=ee,N[K]=q,X=K);else if($<p&&0>d(I,q))N[X]=I,N[$]=q,X=$;else break e}}return A}function d(N,A){var q=N.sortIndex-A.sortIndex;return q!==0?q:N.id-A.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;l.unstable_now=function(){return m.now()}}else{var w=Date,b=w.now();l.unstable_now=function(){return w.now()-b}}var T=[],S=[],M=1,k=null,h=3,v=!1,y=!1,x=!1,_=!1,le=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function ae(N){for(var A=c(S);A!==null;){if(A.callback===null)u(S);else if(A.startTime<=N)u(S),A.sortIndex=A.expirationTime,i(T,A);else break;A=c(S)}}function Q(N){if(x=!1,ae(N),!y)if(c(T)!==null)y=!0,fe||(fe=!0,ie());else{var A=c(S);A!==null&&we(Q,A.startTime-N)}}var fe=!1,de=-1,Y=5,J=-1;function re(){return _?!0:!(l.unstable_now()-J<Y)}function ne(){if(_=!1,fe){var N=l.unstable_now();J=N;var A=!0;try{e:{y=!1,x&&(x=!1,Z(de),de=-1),v=!0;var q=h;try{t:{for(ae(N),k=c(T);k!==null&&!(k.expirationTime>N&&re());){var X=k.callback;if(typeof X=="function"){k.callback=null,h=k.priorityLevel;var p=X(k.expirationTime<=N);if(N=l.unstable_now(),typeof p=="function"){k.callback=p,ae(N),A=!0;break t}k===c(T)&&u(T),ae(N)}else u(T);k=c(T)}if(k!==null)A=!0;else{var L=c(S);L!==null&&we(Q,L.startTime-N),A=!1}}break e}finally{k=null,h=q,v=!1}A=void 0}}finally{A?ie():fe=!1}}}var ie;if(typeof z=="function")ie=function(){z(ne)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,je=ce.port2;ce.port1.onmessage=ne,ie=function(){je.postMessage(null)}}else ie=function(){le(ne,0)};function we(N,A){de=le(function(){N(l.unstable_now())},A)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(N){N.callback=null},l.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<N?Math.floor(1e3/N):5},l.unstable_getCurrentPriorityLevel=function(){return h},l.unstable_next=function(N){switch(h){case 1:case 2:case 3:var A=3;break;default:A=h}var q=h;h=A;try{return N()}finally{h=q}},l.unstable_requestPaint=function(){_=!0},l.unstable_runWithPriority=function(N,A){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var q=h;h=N;try{return A()}finally{h=q}},l.unstable_scheduleCallback=function(N,A,q){var X=l.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?X+q:X):q=X,N){case 1:var p=-1;break;case 2:p=250;break;case 5:p=1073741823;break;case 4:p=1e4;break;default:p=5e3}return p=q+p,N={id:M++,callback:A,priorityLevel:N,startTime:q,expirationTime:p,sortIndex:-1},q>X?(N.sortIndex=q,i(S,N),c(T)===null&&N===c(S)&&(x?(Z(de),de=-1):x=!0,we(Q,q-X))):(N.sortIndex=p,i(T,N),y||v||(y=!0,fe||(fe=!0,ie()))),N},l.unstable_shouldYield=re,l.unstable_wrapCallback=function(N){var A=h;return function(){var q=h;h=A;try{return N.apply(this,arguments)}finally{h=q}}}}(yc)),yc}var mm;function cg(){return mm||(mm=1,bc.exports=og()),bc.exports}var jc={exports:{}},zt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hm;function ug(){if(hm)return zt;hm=1;var l=ol();function i(T){var S="https://react.dev/errors/"+T;if(1<arguments.length){S+="?args[]="+encodeURIComponent(arguments[1]);for(var M=2;M<arguments.length;M++)S+="&args[]="+encodeURIComponent(arguments[M])}return"Minified React error #"+T+"; visit "+S+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(){}var u={d:{f:c,r:function(){throw Error(i(522))},D:c,C:c,L:c,m:c,X:c,S:c,M:c},p:0,findDOMNode:null},d=Symbol.for("react.portal");function m(T,S,M){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:k==null?null:""+k,children:T,containerInfo:S,implementation:M}}var w=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function b(T,S){if(T==="font")return"";if(typeof S=="string")return S==="use-credentials"?S:""}return zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=u,zt.createPortal=function(T,S){var M=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!S||S.nodeType!==1&&S.nodeType!==9&&S.nodeType!==11)throw Error(i(299));return m(T,S,null,M)},zt.flushSync=function(T){var S=w.T,M=u.p;try{if(w.T=null,u.p=2,T)return T()}finally{w.T=S,u.p=M,u.d.f()}},zt.preconnect=function(T,S){typeof T=="string"&&(S?(S=S.crossOrigin,S=typeof S=="string"?S==="use-credentials"?S:"":void 0):S=null,u.d.C(T,S))},zt.prefetchDNS=function(T){typeof T=="string"&&u.d.D(T)},zt.preinit=function(T,S){if(typeof T=="string"&&S&&typeof S.as=="string"){var M=S.as,k=b(M,S.crossOrigin),h=typeof S.integrity=="string"?S.integrity:void 0,v=typeof S.fetchPriority=="string"?S.fetchPriority:void 0;M==="style"?u.d.S(T,typeof S.precedence=="string"?S.precedence:void 0,{crossOrigin:k,integrity:h,fetchPriority:v}):M==="script"&&u.d.X(T,{crossOrigin:k,integrity:h,fetchPriority:v,nonce:typeof S.nonce=="string"?S.nonce:void 0})}},zt.preinitModule=function(T,S){if(typeof T=="string")if(typeof S=="object"&&S!==null){if(S.as==null||S.as==="script"){var M=b(S.as,S.crossOrigin);u.d.M(T,{crossOrigin:M,integrity:typeof S.integrity=="string"?S.integrity:void 0,nonce:typeof S.nonce=="string"?S.nonce:void 0})}}else S==null&&u.d.M(T)},zt.preload=function(T,S){if(typeof T=="string"&&typeof S=="object"&&S!==null&&typeof S.as=="string"){var M=S.as,k=b(M,S.crossOrigin);u.d.L(T,M,{crossOrigin:k,integrity:typeof S.integrity=="string"?S.integrity:void 0,nonce:typeof S.nonce=="string"?S.nonce:void 0,type:typeof S.type=="string"?S.type:void 0,fetchPriority:typeof S.fetchPriority=="string"?S.fetchPriority:void 0,referrerPolicy:typeof S.referrerPolicy=="string"?S.referrerPolicy:void 0,imageSrcSet:typeof S.imageSrcSet=="string"?S.imageSrcSet:void 0,imageSizes:typeof S.imageSizes=="string"?S.imageSizes:void 0,media:typeof S.media=="string"?S.media:void 0})}},zt.preloadModule=function(T,S){if(typeof T=="string")if(S){var M=b(S.as,S.crossOrigin);u.d.m(T,{as:typeof S.as=="string"&&S.as!=="script"?S.as:void 0,crossOrigin:M,integrity:typeof S.integrity=="string"?S.integrity:void 0})}else u.d.m(T)},zt.requestFormReset=function(T){u.d.r(T)},zt.unstable_batchedUpdates=function(T,S){return T(S)},zt.useFormState=function(T,S,M){return w.H.useFormState(T,S,M)},zt.useFormStatus=function(){return w.H.useHostTransitionStatus()},zt.version="19.1.0",zt}var gm;function dg(){if(gm)return jc.exports;gm=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(i){console.error(i)}}return l(),jc.exports=ug(),jc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pm;function fg(){if(pm)return Vr;pm=1;var l=cg(),i=ol(),c=dg();function u(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function m(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function w(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function b(e){if(m(e)!==e)throw Error(u(188))}function T(e){var t=e.alternate;if(!t){if(t=m(e),t===null)throw Error(u(188));return t!==e?null:e}for(var a=e,s=t;;){var r=a.return;if(r===null)break;var o=r.alternate;if(o===null){if(s=r.return,s!==null){a=s;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===a)return b(r),e;if(o===s)return b(r),t;o=o.sibling}throw Error(u(188))}if(a.return!==s.return)a=r,s=o;else{for(var f=!1,g=r.child;g;){if(g===a){f=!0,a=r,s=o;break}if(g===s){f=!0,s=r,a=o;break}g=g.sibling}if(!f){for(g=o.child;g;){if(g===a){f=!0,a=o,s=r;break}if(g===s){f=!0,s=o,a=r;break}g=g.sibling}if(!f)throw Error(u(189))}}if(a.alternate!==s)throw Error(u(190))}if(a.tag!==3)throw Error(u(188));return a.stateNode.current===a?e:t}function S(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=S(e),t!==null)return t;e=e.sibling}return null}var M=Object.assign,k=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),le=Symbol.for("react.provider"),Z=Symbol.for("react.consumer"),z=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),de=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),J=Symbol.for("react.activity"),re=Symbol.for("react.memo_cache_sentinel"),ne=Symbol.iterator;function ie(e){return e===null||typeof e!="object"?null:(e=ne&&e[ne]||e["@@iterator"],typeof e=="function"?e:null)}var ce=Symbol.for("react.client.reference");function je(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ce?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case y:return"Fragment";case _:return"Profiler";case x:return"StrictMode";case Q:return"Suspense";case fe:return"SuspenseList";case J:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case v:return"Portal";case z:return(e.displayName||"Context")+".Provider";case Z:return(e._context.displayName||"Context")+".Consumer";case ae:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case de:return t=e.displayName||null,t!==null?t:je(e.type)||"Memo";case Y:t=e._payload,e=e._init;try{return je(e(t))}catch{}}return null}var we=Array.isArray,N=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,A=c.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},X=[],p=-1;function L(e){return{current:e}}function K(e){0>p||(e.current=X[p],X[p]=null,p--)}function ee(e,t){p++,X[p]=e.current,e.current=t}var $=L(null),I=L(null),he=L(null),_e=L(null);function ve(e,t){switch(ee(he,t),ee(I,e),ee($,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?zf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=zf(t),e=Bf(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}K($),ee($,e)}function Ue(){K($),K(I),K(he)}function me(e){e.memoizedState!==null&&ee(_e,e);var t=$.current,a=Bf(t,e.type);t!==a&&(ee(I,e),ee($,a))}function pe(e){I.current===e&&(K($),K(I)),_e.current===e&&(K(_e),Rr._currentValue=q)}var ge=Object.prototype.hasOwnProperty,Ae=l.unstable_scheduleCallback,rt=l.unstable_cancelCallback,nt=l.unstable_shouldYield,et=l.unstable_requestPaint,tt=l.unstable_now,Xe=l.unstable_getCurrentPriorityLevel,Bt=l.unstable_ImmediatePriority,Et=l.unstable_UserBlockingPriority,bt=l.unstable_NormalPriority,ga=l.unstable_LowPriority,ut=l.unstable_IdlePriority,yt=l.log,jt=l.unstable_setDisableYieldValue,Me=null,Ee=null;function Ce(e){if(typeof yt=="function"&&jt(e),Ee&&typeof Ee.setStrictMode=="function")try{Ee.setStrictMode(Me,e)}catch{}}var Oe=Math.clz32?Math.clz32:Ve,wt=Math.log,Ot=Math.LN2;function Ve(e){return e>>>=0,e===0?32:31-(wt(e)/Ot|0)|0}var Ne=256,ht=4194304;function Rt(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ht(e,t,a){var s=e.pendingLanes;if(s===0)return 0;var r=0,o=e.suspendedLanes,f=e.pingedLanes;e=e.warmLanes;var g=s&134217727;return g!==0?(s=g&~o,s!==0?r=Rt(s):(f&=g,f!==0?r=Rt(f):a||(a=g&~e,a!==0&&(r=Rt(a))))):(g=s&~o,g!==0?r=Rt(g):f!==0?r=Rt(f):a||(a=s&~e,a!==0&&(r=Rt(a)))),r===0?0:t!==0&&t!==r&&(t&o)===0&&(o=r&-r,a=t&-t,o>=a||o===32&&(a&4194048)!==0)?t:r}function pa(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Wn(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ya(){var e=Ne;return Ne<<=1,(Ne&4194048)===0&&(Ne=256),e}function Cn(){var e=ht;return ht<<=1,(ht&62914560)===0&&(ht=4194304),e}function Fa(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function va(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Kn(e,t,a,s,r,o){var f=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var g=e.entanglements,E=e.expirationTimes,H=e.hiddenUpdates;for(a=f&~a;0<a;){var P=31-Oe(a),se=1<<P;g[P]=0,E[P]=-1;var V=H[P];if(V!==null)for(H[P]=null,P=0;P<V.length;P++){var G=V[P];G!==null&&(G.lane&=-536870913)}a&=~se}s!==0&&Tn(e,s,0),o!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=o&~(f&~t))}function Tn(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-Oe(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|a&4194090}function _n(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var s=31-Oe(a),r=1<<s;r&t|e[s]&t&&(e[s]|=t),a&=~r}}function Xa(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ia(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function En(){var e=A.p;return e!==0?e:(e=window.event,e===void 0?32:am(e.type))}function Pn(e,t){var a=A.p;try{return A.p=e,t()}finally{A.p=a}}var Nt=Math.random().toString(36).slice(2),F="__reactFiber$"+Nt,ue="__reactProps$"+Nt,be="__reactContainer$"+Nt,kt="__reactEvents$"+Nt,Ta="__reactListeners$"+Nt,xa="__reactHandles$"+Nt,Qa="__reactResources$"+Nt,ca="__reactMarker$"+Nt;function Pt(e){delete e[F],delete e[ue],delete e[kt],delete e[Ta],delete e[xa]}function ba(e){var t=e[F];if(t)return t;for(var a=e.parentNode;a;){if(t=a[be]||a[F]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=qf(e);e!==null;){if(a=e[F])return a;e=qf(e)}return t}e=a,a=e.parentNode}return null}function Za(e){if(e=e[F]||e[be]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function On(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(u(33))}function ua(e){var t=e[Qa];return t||(t=e[Qa]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function dt(e){e[ca]=!0}var Us=new Set,Hs={};function _a(e,t){Ea(e,t),Ea(e+"Capture",t)}function Ea(e,t){for(Hs[e]=t,e=0;e<t.length;e++)Us.add(t[e])}var Ir=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vs={},Qr={};function hl(e){return ge.call(Qr,e)?!0:ge.call(Vs,e)?!1:Ir.test(e)?Qr[e]=!0:(Vs[e]=!0,!1)}function Jn(e,t,a){if(hl(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function es(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Jt(e,t,a,s){if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+s)}}var qs,Zr;function $a(e){if(qs===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);qs=t&&t[1]||"",Zr=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+qs+e+Zr}var Gs=!1;function Ys(e,t){if(!e||Gs)return"";Gs=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(G){var V=G}Reflect.construct(e,[],se)}else{try{se.call()}catch(G){V=G}e.call(se.prototype)}}else{try{throw Error()}catch(G){V=G}(se=e())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(G){if(G&&V&&typeof G.stack=="string")return[G.stack,V.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=s.DetermineComponentFrameRoot(),f=o[0],g=o[1];if(f&&g){var E=f.split(`
`),H=g.split(`
`);for(r=s=0;s<E.length&&!E[s].includes("DetermineComponentFrameRoot");)s++;for(;r<H.length&&!H[r].includes("DetermineComponentFrameRoot");)r++;if(s===E.length||r===H.length)for(s=E.length-1,r=H.length-1;1<=s&&0<=r&&E[s]!==H[r];)r--;for(;1<=s&&0<=r;s--,r--)if(E[s]!==H[r]){if(s!==1||r!==1)do if(s--,r--,0>r||E[s]!==H[r]){var P=`
`+E[s].replace(" at new "," at ");return e.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",e.displayName)),P}while(1<=s&&0<=r);break}}}finally{Gs=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?$a(a):""}function gl(e){switch(e.tag){case 26:case 27:case 5:return $a(e.type);case 16:return $a("Lazy");case 13:return $a("Suspense");case 19:return $a("SuspenseList");case 0:case 15:return Ys(e.type,!1);case 11:return Ys(e.type.render,!1);case 1:return Ys(e.type,!0);case 31:return $a("Activity");default:return""}}function $r(e){try{var t="";do t+=gl(e),e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Vt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Wr(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function pl(e){var t=Wr(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var r=a.get,o=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(f){s=""+f,o.call(this,f)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return s},setValue:function(f){s=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ts(e){e._valueTracker||(e._valueTracker=pl(e))}function Kr(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),s="";return e&&(s=Wr(e)?e.checked?"true":"false":e.value),e=s,e!==a?(t.setValue(e),!0):!1}function as(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var vl=/[\n"\\]/g;function qt(e){return e.replace(vl,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Fs(e,t,a,s,r,o,f,g){e.name="",f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"?e.type=f:e.removeAttribute("type"),t!=null?f==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Vt(t)):e.value!==""+Vt(t)&&(e.value=""+Vt(t)):f!=="submit"&&f!=="reset"||e.removeAttribute("value"),t!=null?Xs(e,f,Vt(t)):a!=null?Xs(e,f,Vt(a)):s!=null&&e.removeAttribute("value"),r==null&&o!=null&&(e.defaultChecked=!!o),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.name=""+Vt(g):e.removeAttribute("name")}function Pr(e,t,a,s,r,o,f,g){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.type=o),t!=null||a!=null){if(!(o!=="submit"&&o!=="reset"||t!=null))return;a=a!=null?""+Vt(a):"",t=t!=null?""+Vt(t):a,g||t===e.value||(e.value=t),e.defaultValue=t}s=s??r,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=g?e.checked:!!s,e.defaultChecked=!!s,f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.name=f)}function Xs(e,t,a){t==="number"&&as(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Wa(e,t,a,s){if(e=e.options,t){t={};for(var r=0;r<a.length;r++)t["$"+a[r]]=!0;for(a=0;a<e.length;a++)r=t.hasOwnProperty("$"+e[a].value),e[a].selected!==r&&(e[a].selected=r),r&&s&&(e[a].defaultSelected=!0)}else{for(a=""+Vt(a),t=null,r=0;r<e.length;r++){if(e[r].value===a){e[r].selected=!0,s&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function Jr(e,t,a){if(t!=null&&(t=""+Vt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Vt(a):""}function ei(e,t,a,s){if(t==null){if(s!=null){if(a!=null)throw Error(u(92));if(we(s)){if(1<s.length)throw Error(u(93));s=s[0]}a=s}a==null&&(a=""),t=a}a=Vt(t),e.defaultValue=a,s=e.textContent,s===a&&s!==""&&s!==null&&(e.value=s)}function Ka(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var xl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ti(e,t,a){var s=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,a):typeof a!="number"||a===0||xl.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function ai(e,t,a){if(t!=null&&typeof t!="object")throw Error(u(62));if(e=e.style,a!=null){for(var s in a)!a.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var r in t)s=t[r],t.hasOwnProperty(r)&&a[r]!==s&&ti(e,r,s)}else for(var o in t)t.hasOwnProperty(o)&&ti(e,o,t[o])}function Is(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ns(e){return yl.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Qs=null;function Zs(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Pa=null,Ja=null;function ni(e){var t=Za(e);if(t&&(e=t.stateNode)){var a=e[ue]||null;e:switch(e=t.stateNode,t.type){case"input":if(Fs(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+qt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var s=a[t];if(s!==e&&s.form===e.form){var r=s[ue]||null;if(!r)throw Error(u(90));Fs(s,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<a.length;t++)s=a[t],s.form===e.form&&Kr(s)}break e;case"textarea":Jr(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Wa(e,!!a.multiple,t,!1)}}}var $s=!1;function si(e,t,a){if($s)return e(t,a);$s=!0;try{var s=e(t);return s}finally{if($s=!1,(Pa!==null||Ja!==null)&&(Ui(),Pa&&(t=Pa,e=Ja,Ja=Pa=null,ni(t),e)))for(t=0;t<e.length;t++)ni(e[t])}}function kn(e,t){var a=e.stateNode;if(a===null)return null;var s=a[ue]||null;if(s===null)return null;a=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(u(231,t,typeof a));return a}var da=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ws=!1;if(da)try{var en={};Object.defineProperty(en,"passive",{get:function(){Ws=!0}}),window.addEventListener("test",en,en),window.removeEventListener("test",en,en)}catch{Ws=!1}var ya=null,B=null,C=null;function O(){if(C)return C;var e,t=B,a=t.length,s,r="value"in ya?ya.value:ya.textContent,o=r.length;for(e=0;e<a&&t[e]===r[e];e++);var f=a-e;for(s=1;s<=f&&t[a-s]===r[o-s];s++);return C=r.slice(e,1<s?1-s:void 0)}function W(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function oe(){return!0}function ze(){return!1}function Ye(e){function t(a,s,r,o,f){this._reactName=a,this._targetInst=r,this.type=s,this.nativeEvent=o,this.target=f,this.currentTarget=null;for(var g in e)e.hasOwnProperty(g)&&(a=e[g],this[g]=a?a(o):o[g]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?oe:ze,this.isPropagationStopped=ze,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=oe)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=oe)},persist:function(){},isPersistent:oe}),t}var lt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oa=Ye(lt),Dn=M({},lt,{view:0,detail:0}),jl=Ye(Dn),ss,rs,tn,Mn=M({},Dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==tn&&(tn&&e.type==="mousemove"?(ss=e.screenX-tn.screenX,rs=e.screenY-tn.screenY):rs=ss=0,tn=e),ss)},movementY:function(e){return"movementY"in e?e.movementY:rs}}),qc=Ye(Mn),ih=M({},Mn,{dataTransfer:0}),lh=Ye(ih),oh=M({},Dn,{relatedTarget:0}),wl=Ye(oh),ch=M({},lt,{animationName:0,elapsedTime:0,pseudoElement:0}),uh=Ye(ch),dh=M({},lt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),fh=Ye(dh),mh=M({},lt,{data:0}),Gc=Ye(mh),hh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ph={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ph[e])?!!t[e]:!1}function Nl(){return vh}var xh=M({},Dn,{key:function(e){if(e.key){var t=hh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=W(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?gh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nl,charCode:function(e){return e.type==="keypress"?W(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?W(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),bh=Ye(xh),yh=M({},Mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yc=Ye(yh),jh=M({},Dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nl}),wh=Ye(jh),Nh=M({},lt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sh=Ye(Nh),Ch=M({},Mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Th=Ye(Ch),_h=M({},lt,{newState:0,oldState:0}),Eh=Ye(_h),Oh=[9,13,27,32],Sl=da&&"CompositionEvent"in window,Ks=null;da&&"documentMode"in document&&(Ks=document.documentMode);var kh=da&&"TextEvent"in window&&!Ks,Fc=da&&(!Sl||Ks&&8<Ks&&11>=Ks),Xc=" ",Ic=!1;function Qc(e,t){switch(e){case"keyup":return Oh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var is=!1;function Dh(e,t){switch(e){case"compositionend":return Zc(t);case"keypress":return t.which!==32?null:(Ic=!0,Xc);case"textInput":return e=t.data,e===Xc&&Ic?null:e;default:return null}}function Mh(e,t){if(is)return e==="compositionend"||!Sl&&Qc(e,t)?(e=O(),C=B=ya=null,is=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fc&&t.locale!=="ko"?null:t.data;default:return null}}var Ah={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $c(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ah[e.type]:t==="textarea"}function Wc(e,t,a,s){Pa?Ja?Ja.push(s):Ja=[s]:Pa=s,t=Fi(t,"onChange"),0<t.length&&(a=new Oa("onChange","change",null,a,s),e.push({event:a,listeners:t}))}var Ps=null,Js=null;function Rh(e){Df(e,0)}function ri(e){var t=On(e);if(Kr(t))return e}function Kc(e,t){if(e==="change")return t}var Pc=!1;if(da){var Cl;if(da){var Tl="oninput"in document;if(!Tl){var Jc=document.createElement("div");Jc.setAttribute("oninput","return;"),Tl=typeof Jc.oninput=="function"}Cl=Tl}else Cl=!1;Pc=Cl&&(!document.documentMode||9<document.documentMode)}function eu(){Ps&&(Ps.detachEvent("onpropertychange",tu),Js=Ps=null)}function tu(e){if(e.propertyName==="value"&&ri(Js)){var t=[];Wc(t,Js,e,Zs(e)),si(Rh,t)}}function Lh(e,t,a){e==="focusin"?(eu(),Ps=t,Js=a,Ps.attachEvent("onpropertychange",tu)):e==="focusout"&&eu()}function zh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ri(Js)}function Bh(e,t){if(e==="click")return ri(t)}function Uh(e,t){if(e==="input"||e==="change")return ri(t)}function Hh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xt=typeof Object.is=="function"?Object.is:Hh;function er(e,t){if(Xt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(s=0;s<a.length;s++){var r=a[s];if(!ge.call(t,r)||!Xt(e[r],t[r]))return!1}return!0}function au(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nu(e,t){var a=au(e);e=0;for(var s;a;){if(a.nodeType===3){if(s=e+a.textContent.length,e<=t&&s>=t)return{node:a,offset:t-e};e=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=au(a)}}function su(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?su(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ru(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=as(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=as(e.document)}return t}function _l(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Vh=da&&"documentMode"in document&&11>=document.documentMode,ls=null,El=null,tr=null,Ol=!1;function iu(e,t,a){var s=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ol||ls==null||ls!==as(s)||(s=ls,"selectionStart"in s&&_l(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),tr&&er(tr,s)||(tr=s,s=Fi(El,"onSelect"),0<s.length&&(t=new Oa("onSelect","select",null,t,a),e.push({event:t,listeners:s}),t.target=ls)))}function An(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var os={animationend:An("Animation","AnimationEnd"),animationiteration:An("Animation","AnimationIteration"),animationstart:An("Animation","AnimationStart"),transitionrun:An("Transition","TransitionRun"),transitionstart:An("Transition","TransitionStart"),transitioncancel:An("Transition","TransitionCancel"),transitionend:An("Transition","TransitionEnd")},kl={},lu={};da&&(lu=document.createElement("div").style,"AnimationEvent"in window||(delete os.animationend.animation,delete os.animationiteration.animation,delete os.animationstart.animation),"TransitionEvent"in window||delete os.transitionend.transition);function Rn(e){if(kl[e])return kl[e];if(!os[e])return e;var t=os[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in lu)return kl[e]=t[a];return e}var ou=Rn("animationend"),cu=Rn("animationiteration"),uu=Rn("animationstart"),qh=Rn("transitionrun"),Gh=Rn("transitionstart"),Yh=Rn("transitioncancel"),du=Rn("transitionend"),fu=new Map,Dl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dl.push("scrollEnd");function fa(e,t){fu.set(e,t),_a(t,[e])}var mu=new WeakMap;function ea(e,t){if(typeof e=="object"&&e!==null){var a=mu.get(e);return a!==void 0?a:(t={value:e,source:t,stack:$r(t)},mu.set(e,t),t)}return{value:e,source:t,stack:$r(t)}}var ta=[],cs=0,Ml=0;function ii(){for(var e=cs,t=Ml=cs=0;t<e;){var a=ta[t];ta[t++]=null;var s=ta[t];ta[t++]=null;var r=ta[t];ta[t++]=null;var o=ta[t];if(ta[t++]=null,s!==null&&r!==null){var f=s.pending;f===null?r.next=r:(r.next=f.next,f.next=r),s.pending=r}o!==0&&hu(a,r,o)}}function li(e,t,a,s){ta[cs++]=e,ta[cs++]=t,ta[cs++]=a,ta[cs++]=s,Ml|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Al(e,t,a,s){return li(e,t,a,s),oi(e)}function us(e,t){return li(e,null,null,t),oi(e)}function hu(e,t,a){e.lanes|=a;var s=e.alternate;s!==null&&(s.lanes|=a);for(var r=!1,o=e.return;o!==null;)o.childLanes|=a,s=o.alternate,s!==null&&(s.childLanes|=a),o.tag===22&&(e=o.stateNode,e===null||e._visibility&1||(r=!0)),e=o,o=o.return;return e.tag===3?(o=e.stateNode,r&&t!==null&&(r=31-Oe(a),e=o.hiddenUpdates,s=e[r],s===null?e[r]=[t]:s.push(t),t.lane=a|536870912),o):null}function oi(e){if(50<Tr)throw Tr=0,Vo=null,Error(u(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ds={};function Fh(e,t,a,s){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function It(e,t,a,s){return new Fh(e,t,a,s)}function Rl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ka(e,t){var a=e.alternate;return a===null?(a=It(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function gu(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ci(e,t,a,s,r,o){var f=0;if(s=e,typeof e=="function")Rl(e)&&(f=1);else if(typeof e=="string")f=I0(e,a,$.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case J:return e=It(31,a,t,r),e.elementType=J,e.lanes=o,e;case y:return Ln(a.children,r,o,t);case x:f=8,r|=24;break;case _:return e=It(12,a,t,r|2),e.elementType=_,e.lanes=o,e;case Q:return e=It(13,a,t,r),e.elementType=Q,e.lanes=o,e;case fe:return e=It(19,a,t,r),e.elementType=fe,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case le:case z:f=10;break e;case Z:f=9;break e;case ae:f=11;break e;case de:f=14;break e;case Y:f=16,s=null;break e}f=29,a=Error(u(130,e===null?"null":typeof e,"")),s=null}return t=It(f,a,t,r),t.elementType=e,t.type=s,t.lanes=o,t}function Ln(e,t,a,s){return e=It(7,e,s,t),e.lanes=a,e}function Ll(e,t,a){return e=It(6,e,null,t),e.lanes=a,e}function zl(e,t,a){return t=It(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var fs=[],ms=0,ui=null,di=0,aa=[],na=0,zn=null,Da=1,Ma="";function Bn(e,t){fs[ms++]=di,fs[ms++]=ui,ui=e,di=t}function pu(e,t,a){aa[na++]=Da,aa[na++]=Ma,aa[na++]=zn,zn=e;var s=Da;e=Ma;var r=32-Oe(s)-1;s&=~(1<<r),a+=1;var o=32-Oe(t)+r;if(30<o){var f=r-r%5;o=(s&(1<<f)-1).toString(32),s>>=f,r-=f,Da=1<<32-Oe(t)+r|a<<r|s,Ma=o+e}else Da=1<<o|a<<r|s,Ma=e}function Bl(e){e.return!==null&&(Bn(e,1),pu(e,1,0))}function Ul(e){for(;e===ui;)ui=fs[--ms],fs[ms]=null,di=fs[--ms],fs[ms]=null;for(;e===zn;)zn=aa[--na],aa[na]=null,Ma=aa[--na],aa[na]=null,Da=aa[--na],aa[na]=null}var Ut=null,ot=null,Qe=!1,Un=null,ja=!1,Hl=Error(u(519));function Hn(e){var t=Error(u(418,""));throw sr(ea(t,e)),Hl}function vu(e){var t=e.stateNode,a=e.type,s=e.memoizedProps;switch(t[F]=e,t[ue]=s,a){case"dialog":Ge("cancel",t),Ge("close",t);break;case"iframe":case"object":case"embed":Ge("load",t);break;case"video":case"audio":for(a=0;a<Er.length;a++)Ge(Er[a],t);break;case"source":Ge("error",t);break;case"img":case"image":case"link":Ge("error",t),Ge("load",t);break;case"details":Ge("toggle",t);break;case"input":Ge("invalid",t),Pr(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),ts(t);break;case"select":Ge("invalid",t);break;case"textarea":Ge("invalid",t),ei(t,s.value,s.defaultValue,s.children),ts(t)}a=s.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||s.suppressHydrationWarning===!0||Lf(t.textContent,a)?(s.popover!=null&&(Ge("beforetoggle",t),Ge("toggle",t)),s.onScroll!=null&&Ge("scroll",t),s.onScrollEnd!=null&&Ge("scrollend",t),s.onClick!=null&&(t.onclick=Xi),t=!0):t=!1,t||Hn(e)}function xu(e){for(Ut=e.return;Ut;)switch(Ut.tag){case 5:case 13:ja=!1;return;case 27:case 3:ja=!0;return;default:Ut=Ut.return}}function ar(e){if(e!==Ut)return!1;if(!Qe)return xu(e),Qe=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||ac(e.type,e.memoizedProps)),a=!a),a&&ot&&Hn(e),xu(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(t===0){ot=ha(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++;e=e.nextSibling}ot=null}}else t===27?(t=ot,xn(e.type)?(e=ic,ic=null,ot=e):ot=t):ot=Ut?ha(e.stateNode.nextSibling):null;return!0}function nr(){ot=Ut=null,Qe=!1}function bu(){var e=Un;return e!==null&&(Ft===null?Ft=e:Ft.push.apply(Ft,e),Un=null),e}function sr(e){Un===null?Un=[e]:Un.push(e)}var Vl=L(null),Vn=null,Aa=null;function an(e,t,a){ee(Vl,t._currentValue),t._currentValue=a}function Ra(e){e._currentValue=Vl.current,K(Vl)}function ql(e,t,a){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===a)break;e=e.return}}function Gl(e,t,a,s){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var o=r.dependencies;if(o!==null){var f=r.child;o=o.firstContext;e:for(;o!==null;){var g=o;o=r;for(var E=0;E<t.length;E++)if(g.context===t[E]){o.lanes|=a,g=o.alternate,g!==null&&(g.lanes|=a),ql(o.return,a,e),s||(f=null);break e}o=g.next}}else if(r.tag===18){if(f=r.return,f===null)throw Error(u(341));f.lanes|=a,o=f.alternate,o!==null&&(o.lanes|=a),ql(f,a,e),f=null}else f=r.child;if(f!==null)f.return=r;else for(f=r;f!==null;){if(f===e){f=null;break}if(r=f.sibling,r!==null){r.return=f.return,f=r;break}f=f.return}r=f}}function rr(e,t,a,s){e=null;for(var r=t,o=!1;r!==null;){if(!o){if((r.flags&524288)!==0)o=!0;else if((r.flags&262144)!==0)break}if(r.tag===10){var f=r.alternate;if(f===null)throw Error(u(387));if(f=f.memoizedProps,f!==null){var g=r.type;Xt(r.pendingProps.value,f.value)||(e!==null?e.push(g):e=[g])}}else if(r===_e.current){if(f=r.alternate,f===null)throw Error(u(387));f.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(Rr):e=[Rr])}r=r.return}e!==null&&Gl(t,e,a,s),t.flags|=262144}function fi(e){for(e=e.firstContext;e!==null;){if(!Xt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function qn(e){Vn=e,Aa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Lt(e){return yu(Vn,e)}function mi(e,t){return Vn===null&&qn(e),yu(e,t)}function yu(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Aa===null){if(e===null)throw Error(u(308));Aa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Aa=Aa.next=t;return a}var Xh=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},Ih=l.unstable_scheduleCallback,Qh=l.unstable_NormalPriority,vt={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yl(){return{controller:new Xh,data:new Map,refCount:0}}function ir(e){e.refCount--,e.refCount===0&&Ih(Qh,function(){e.controller.abort()})}var lr=null,Fl=0,hs=0,gs=null;function Zh(e,t){if(lr===null){var a=lr=[];Fl=0,hs=Qo(),gs={status:"pending",value:void 0,then:function(s){a.push(s)}}}return Fl++,t.then(ju,ju),t}function ju(){if(--Fl===0&&lr!==null){gs!==null&&(gs.status="fulfilled");var e=lr;lr=null,hs=0,gs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function $h(e,t){var a=[],s={status:"pending",value:null,reason:null,then:function(r){a.push(r)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var r=0;r<a.length;r++)(0,a[r])(t)},function(r){for(s.status="rejected",s.reason=r,r=0;r<a.length;r++)(0,a[r])(void 0)}),s}var wu=N.S;N.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Zh(e,t),wu!==null&&wu(e,t)};var Gn=L(null);function Xl(){var e=Gn.current;return e!==null?e:at.pooledCache}function hi(e,t){t===null?ee(Gn,Gn.current):ee(Gn,t.pool)}function Nu(){var e=Xl();return e===null?null:{parent:vt._currentValue,pool:e}}var or=Error(u(460)),Su=Error(u(474)),gi=Error(u(542)),Il={then:function(){}};function Cu(e){return e=e.status,e==="fulfilled"||e==="rejected"}function pi(){}function Tu(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(pi,pi),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Eu(e),e;default:if(typeof t.status=="string")t.then(pi,pi);else{if(e=at,e!==null&&100<e.shellSuspendCounter)throw Error(u(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=s}},function(s){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Eu(e),e}throw cr=t,or}}var cr=null;function _u(){if(cr===null)throw Error(u(459));var e=cr;return cr=null,e}function Eu(e){if(e===or||e===gi)throw Error(u(483))}var nn=!1;function Ql(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function sn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function rn(e,t,a){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Ze&2)!==0){var r=s.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),s.pending=t,t=oi(e),hu(e,null,a),t}return li(e,s,t,a),oi(e)}function ur(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,_n(e,a)}}function $l(e,t){var a=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,a===s)){var r=null,o=null;if(a=a.firstBaseUpdate,a!==null){do{var f={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};o===null?r=o=f:o=o.next=f,a=a.next}while(a!==null);o===null?r=o=t:o=o.next=t}else r=o=t;a={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:s.shared,callbacks:s.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var Wl=!1;function dr(){if(Wl){var e=gs;if(e!==null)throw e}}function fr(e,t,a,s){Wl=!1;var r=e.updateQueue;nn=!1;var o=r.firstBaseUpdate,f=r.lastBaseUpdate,g=r.shared.pending;if(g!==null){r.shared.pending=null;var E=g,H=E.next;E.next=null,f===null?o=H:f.next=H,f=E;var P=e.alternate;P!==null&&(P=P.updateQueue,g=P.lastBaseUpdate,g!==f&&(g===null?P.firstBaseUpdate=H:g.next=H,P.lastBaseUpdate=E))}if(o!==null){var se=r.baseState;f=0,P=H=E=null,g=o;do{var V=g.lane&-536870913,G=V!==g.lane;if(G?(Fe&V)===V:(s&V)===V){V!==0&&V===hs&&(Wl=!0),P!==null&&(P=P.next={lane:0,tag:g.tag,payload:g.payload,callback:null,next:null});e:{var De=e,Te=g;V=t;var Pe=a;switch(Te.tag){case 1:if(De=Te.payload,typeof De=="function"){se=De.call(Pe,se,V);break e}se=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Te.payload,V=typeof De=="function"?De.call(Pe,se,V):De,V==null)break e;se=M({},se,V);break e;case 2:nn=!0}}V=g.callback,V!==null&&(e.flags|=64,G&&(e.flags|=8192),G=r.callbacks,G===null?r.callbacks=[V]:G.push(V))}else G={lane:V,tag:g.tag,payload:g.payload,callback:g.callback,next:null},P===null?(H=P=G,E=se):P=P.next=G,f|=V;if(g=g.next,g===null){if(g=r.shared.pending,g===null)break;G=g,g=G.next,G.next=null,r.lastBaseUpdate=G,r.shared.pending=null}}while(!0);P===null&&(E=se),r.baseState=E,r.firstBaseUpdate=H,r.lastBaseUpdate=P,o===null&&(r.shared.lanes=0),hn|=f,e.lanes=f,e.memoizedState=se}}function Ou(e,t){if(typeof e!="function")throw Error(u(191,e));e.call(t)}function ku(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Ou(a[e],t)}var ps=L(null),vi=L(0);function Du(e,t){e=qa,ee(vi,e),ee(ps,t),qa=e|t.baseLanes}function Kl(){ee(vi,qa),ee(ps,ps.current)}function Pl(){qa=vi.current,K(ps),K(vi)}var ln=0,Be=null,We=null,gt=null,xi=!1,vs=!1,Yn=!1,bi=0,mr=0,xs=null,Wh=0;function ft(){throw Error(u(321))}function Jl(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Xt(e[a],t[a]))return!1;return!0}function eo(e,t,a,s,r,o){return ln=o,Be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,N.H=e===null||e.memoizedState===null?hd:gd,Yn=!1,o=a(s,r),Yn=!1,vs&&(o=Au(t,a,s,r)),Mu(e),o}function Mu(e){N.H=Ci;var t=We!==null&&We.next!==null;if(ln=0,gt=We=Be=null,xi=!1,mr=0,xs=null,t)throw Error(u(300));e===null||St||(e=e.dependencies,e!==null&&fi(e)&&(St=!0))}function Au(e,t,a,s){Be=e;var r=0;do{if(vs&&(xs=null),mr=0,vs=!1,25<=r)throw Error(u(301));if(r+=1,gt=We=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}N.H=n0,o=t(a,s)}while(vs);return o}function Kh(){var e=N.H,t=e.useState()[0];return t=typeof t.then=="function"?hr(t):t,e=e.useState()[0],(We!==null?We.memoizedState:null)!==e&&(Be.flags|=1024),t}function to(){var e=bi!==0;return bi=0,e}function ao(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function no(e){if(xi){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}xi=!1}ln=0,gt=We=Be=null,vs=!1,mr=bi=0,xs=null}function Gt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?Be.memoizedState=gt=e:gt=gt.next=e,gt}function pt(){if(We===null){var e=Be.alternate;e=e!==null?e.memoizedState:null}else e=We.next;var t=gt===null?Be.memoizedState:gt.next;if(t!==null)gt=t,We=e;else{if(e===null)throw Be.alternate===null?Error(u(467)):Error(u(310));We=e,e={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},gt===null?Be.memoizedState=gt=e:gt=gt.next=e}return gt}function so(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hr(e){var t=mr;return mr+=1,xs===null&&(xs=[]),e=Tu(xs,e,t),t=Be,(gt===null?t.memoizedState:gt.next)===null&&(t=t.alternate,N.H=t===null||t.memoizedState===null?hd:gd),e}function yi(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return hr(e);if(e.$$typeof===z)return Lt(e)}throw Error(u(438,String(e)))}function ro(e){var t=null,a=Be.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var s=Be.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=so(),Be.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),s=0;s<e;s++)a[s]=re;return t.index++,a}function La(e,t){return typeof t=="function"?t(e):t}function ji(e){var t=pt();return io(t,We,e)}function io(e,t,a){var s=e.queue;if(s===null)throw Error(u(311));s.lastRenderedReducer=a;var r=e.baseQueue,o=s.pending;if(o!==null){if(r!==null){var f=r.next;r.next=o.next,o.next=f}t.baseQueue=r=o,s.pending=null}if(o=e.baseState,r===null)e.memoizedState=o;else{t=r.next;var g=f=null,E=null,H=t,P=!1;do{var se=H.lane&-536870913;if(se!==H.lane?(Fe&se)===se:(ln&se)===se){var V=H.revertLane;if(V===0)E!==null&&(E=E.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),se===hs&&(P=!0);else if((ln&V)===V){H=H.next,V===hs&&(P=!0);continue}else se={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},E===null?(g=E=se,f=o):E=E.next=se,Be.lanes|=V,hn|=V;se=H.action,Yn&&a(o,se),o=H.hasEagerState?H.eagerState:a(o,se)}else V={lane:se,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},E===null?(g=E=V,f=o):E=E.next=V,Be.lanes|=se,hn|=se;H=H.next}while(H!==null&&H!==t);if(E===null?f=o:E.next=g,!Xt(o,e.memoizedState)&&(St=!0,P&&(a=gs,a!==null)))throw a;e.memoizedState=o,e.baseState=f,e.baseQueue=E,s.lastRenderedState=o}return r===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function lo(e){var t=pt(),a=t.queue;if(a===null)throw Error(u(311));a.lastRenderedReducer=e;var s=a.dispatch,r=a.pending,o=t.memoizedState;if(r!==null){a.pending=null;var f=r=r.next;do o=e(o,f.action),f=f.next;while(f!==r);Xt(o,t.memoizedState)||(St=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),a.lastRenderedState=o}return[o,s]}function Ru(e,t,a){var s=Be,r=pt(),o=Qe;if(o){if(a===void 0)throw Error(u(407));a=a()}else a=t();var f=!Xt((We||r).memoizedState,a);f&&(r.memoizedState=a,St=!0),r=r.queue;var g=Bu.bind(null,s,r,e);if(gr(2048,8,g,[e]),r.getSnapshot!==t||f||gt!==null&&gt.memoizedState.tag&1){if(s.flags|=2048,bs(9,wi(),zu.bind(null,s,r,a,t),null),at===null)throw Error(u(349));o||(ln&124)!==0||Lu(s,t,a)}return a}function Lu(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=Be.updateQueue,t===null?(t=so(),Be.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function zu(e,t,a,s){t.value=a,t.getSnapshot=s,Uu(t)&&Hu(e)}function Bu(e,t,a){return a(function(){Uu(t)&&Hu(e)})}function Uu(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Xt(e,a)}catch{return!0}}function Hu(e){var t=us(e,2);t!==null&&Kt(t,e,2)}function oo(e){var t=Gt();if(typeof e=="function"){var a=e;if(e=a(),Yn){Ce(!0);try{a()}finally{Ce(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:e},t}function Vu(e,t,a,s){return e.baseState=a,io(e,We,typeof s=="function"?s:La)}function Ph(e,t,a,s,r){if(Si(e))throw Error(u(485));if(e=t.action,e!==null){var o={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(f){o.listeners.push(f)}};N.T!==null?a(!0):o.isTransition=!1,s(o),a=t.pending,a===null?(o.next=t.pending=o,qu(t,o)):(o.next=a.next,t.pending=a.next=o)}}function qu(e,t){var a=t.action,s=t.payload,r=e.state;if(t.isTransition){var o=N.T,f={};N.T=f;try{var g=a(r,s),E=N.S;E!==null&&E(f,g),Gu(e,t,g)}catch(H){co(e,t,H)}finally{N.T=o}}else try{o=a(r,s),Gu(e,t,o)}catch(H){co(e,t,H)}}function Gu(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(s){Yu(e,t,s)},function(s){return co(e,t,s)}):Yu(e,t,a)}function Yu(e,t,a){t.status="fulfilled",t.value=a,Fu(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,qu(e,a)))}function co(e,t,a){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=a,Fu(t),t=t.next;while(t!==s)}e.action=null}function Fu(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Xu(e,t){return t}function Iu(e,t){if(Qe){var a=at.formState;if(a!==null){e:{var s=Be;if(Qe){if(ot){t:{for(var r=ot,o=ja;r.nodeType!==8;){if(!o){r=null;break t}if(r=ha(r.nextSibling),r===null){r=null;break t}}o=r.data,r=o==="F!"||o==="F"?r:null}if(r){ot=ha(r.nextSibling),s=r.data==="F!";break e}}Hn(s)}s=!1}s&&(t=a[0])}}return a=Gt(),a.memoizedState=a.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xu,lastRenderedState:t},a.queue=s,a=dd.bind(null,Be,s),s.dispatch=a,s=oo(!1),o=go.bind(null,Be,!1,s.queue),s=Gt(),r={state:t,dispatch:null,action:e,pending:null},s.queue=r,a=Ph.bind(null,Be,r,o,a),r.dispatch=a,s.memoizedState=e,[t,a,!1]}function Qu(e){var t=pt();return Zu(t,We,e)}function Zu(e,t,a){if(t=io(e,t,Xu)[0],e=ji(La)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=hr(t)}catch(f){throw f===or?gi:f}else s=t;t=pt();var r=t.queue,o=r.dispatch;return a!==t.memoizedState&&(Be.flags|=2048,bs(9,wi(),Jh.bind(null,r,a),null)),[s,o,e]}function Jh(e,t){e.action=t}function $u(e){var t=pt(),a=We;if(a!==null)return Zu(t,a,e);pt(),t=t.memoizedState,a=pt();var s=a.queue.dispatch;return a.memoizedState=e,[t,s,!1]}function bs(e,t,a,s){return e={tag:e,create:a,deps:s,inst:t,next:null},t=Be.updateQueue,t===null&&(t=so(),Be.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(s=a.next,a.next=e,e.next=s,t.lastEffect=e),e}function wi(){return{destroy:void 0,resource:void 0}}function Wu(){return pt().memoizedState}function Ni(e,t,a,s){var r=Gt();s=s===void 0?null:s,Be.flags|=e,r.memoizedState=bs(1|t,wi(),a,s)}function gr(e,t,a,s){var r=pt();s=s===void 0?null:s;var o=r.memoizedState.inst;We!==null&&s!==null&&Jl(s,We.memoizedState.deps)?r.memoizedState=bs(t,o,a,s):(Be.flags|=e,r.memoizedState=bs(1|t,o,a,s))}function Ku(e,t){Ni(8390656,8,e,t)}function Pu(e,t){gr(2048,8,e,t)}function Ju(e,t){return gr(4,2,e,t)}function ed(e,t){return gr(4,4,e,t)}function td(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ad(e,t,a){a=a!=null?a.concat([e]):null,gr(4,4,td.bind(null,t,e),a)}function uo(){}function nd(e,t){var a=pt();t=t===void 0?null:t;var s=a.memoizedState;return t!==null&&Jl(t,s[1])?s[0]:(a.memoizedState=[e,t],e)}function sd(e,t){var a=pt();t=t===void 0?null:t;var s=a.memoizedState;if(t!==null&&Jl(t,s[1]))return s[0];if(s=e(),Yn){Ce(!0);try{e()}finally{Ce(!1)}}return a.memoizedState=[s,t],s}function fo(e,t,a){return a===void 0||(ln&1073741824)!==0?e.memoizedState=t:(e.memoizedState=a,e=of(),Be.lanes|=e,hn|=e,a)}function rd(e,t,a,s){return Xt(a,t)?a:ps.current!==null?(e=fo(e,a,s),Xt(e,t)||(St=!0),e):(ln&42)===0?(St=!0,e.memoizedState=a):(e=of(),Be.lanes|=e,hn|=e,t)}function id(e,t,a,s,r){var o=A.p;A.p=o!==0&&8>o?o:8;var f=N.T,g={};N.T=g,go(e,!1,t,a);try{var E=r(),H=N.S;if(H!==null&&H(g,E),E!==null&&typeof E=="object"&&typeof E.then=="function"){var P=$h(E,s);pr(e,t,P,Wt(e))}else pr(e,t,s,Wt(e))}catch(se){pr(e,t,{then:function(){},status:"rejected",reason:se},Wt())}finally{A.p=o,N.T=f}}function e0(){}function mo(e,t,a,s){if(e.tag!==5)throw Error(u(476));var r=ld(e).queue;id(e,r,t,q,a===null?e0:function(){return od(e),a(s)})}function ld(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:q},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function od(e){var t=ld(e).next.queue;pr(e,t,{},Wt())}function ho(){return Lt(Rr)}function cd(){return pt().memoizedState}function ud(){return pt().memoizedState}function t0(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Wt();e=sn(a);var s=rn(t,e,a);s!==null&&(Kt(s,t,a),ur(s,t,a)),t={cache:Yl()},e.payload=t;return}t=t.return}}function a0(e,t,a){var s=Wt();a={lane:s,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Si(e)?fd(t,a):(a=Al(e,t,a,s),a!==null&&(Kt(a,e,s),md(a,t,s)))}function dd(e,t,a){var s=Wt();pr(e,t,a,s)}function pr(e,t,a,s){var r={lane:s,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Si(e))fd(t,r);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var f=t.lastRenderedState,g=o(f,a);if(r.hasEagerState=!0,r.eagerState=g,Xt(g,f))return li(e,t,r,0),at===null&&ii(),!1}catch{}finally{}if(a=Al(e,t,r,s),a!==null)return Kt(a,e,s),md(a,t,s),!0}return!1}function go(e,t,a,s){if(s={lane:2,revertLane:Qo(),action:s,hasEagerState:!1,eagerState:null,next:null},Si(e)){if(t)throw Error(u(479))}else t=Al(e,a,s,2),t!==null&&Kt(t,e,2)}function Si(e){var t=e.alternate;return e===Be||t!==null&&t===Be}function fd(e,t){vs=xi=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function md(e,t,a){if((a&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,_n(e,a)}}var Ci={readContext:Lt,use:yi,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useLayoutEffect:ft,useInsertionEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useSyncExternalStore:ft,useId:ft,useHostTransitionStatus:ft,useFormState:ft,useActionState:ft,useOptimistic:ft,useMemoCache:ft,useCacheRefresh:ft},hd={readContext:Lt,use:yi,useCallback:function(e,t){return Gt().memoizedState=[e,t===void 0?null:t],e},useContext:Lt,useEffect:Ku,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Ni(4194308,4,td.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Ni(4194308,4,e,t)},useInsertionEffect:function(e,t){Ni(4,2,e,t)},useMemo:function(e,t){var a=Gt();t=t===void 0?null:t;var s=e();if(Yn){Ce(!0);try{e()}finally{Ce(!1)}}return a.memoizedState=[s,t],s},useReducer:function(e,t,a){var s=Gt();if(a!==void 0){var r=a(t);if(Yn){Ce(!0);try{a(t)}finally{Ce(!1)}}}else r=t;return s.memoizedState=s.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},s.queue=e,e=e.dispatch=a0.bind(null,Be,e),[s.memoizedState,e]},useRef:function(e){var t=Gt();return e={current:e},t.memoizedState=e},useState:function(e){e=oo(e);var t=e.queue,a=dd.bind(null,Be,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:uo,useDeferredValue:function(e,t){var a=Gt();return fo(a,e,t)},useTransition:function(){var e=oo(!1);return e=id.bind(null,Be,e.queue,!0,!1),Gt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var s=Be,r=Gt();if(Qe){if(a===void 0)throw Error(u(407));a=a()}else{if(a=t(),at===null)throw Error(u(349));(Fe&124)!==0||Lu(s,t,a)}r.memoizedState=a;var o={value:a,getSnapshot:t};return r.queue=o,Ku(Bu.bind(null,s,o,e),[e]),s.flags|=2048,bs(9,wi(),zu.bind(null,s,o,a,t),null),a},useId:function(){var e=Gt(),t=at.identifierPrefix;if(Qe){var a=Ma,s=Da;a=(s&~(1<<32-Oe(s)-1)).toString(32)+a,t=""+t+"R"+a,a=bi++,0<a&&(t+="H"+a.toString(32)),t+=""}else a=Wh++,t=""+t+"r"+a.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:ho,useFormState:Iu,useActionState:Iu,useOptimistic:function(e){var t=Gt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=go.bind(null,Be,!0,a),a.dispatch=t,[e,t]},useMemoCache:ro,useCacheRefresh:function(){return Gt().memoizedState=t0.bind(null,Be)}},gd={readContext:Lt,use:yi,useCallback:nd,useContext:Lt,useEffect:Pu,useImperativeHandle:ad,useInsertionEffect:Ju,useLayoutEffect:ed,useMemo:sd,useReducer:ji,useRef:Wu,useState:function(){return ji(La)},useDebugValue:uo,useDeferredValue:function(e,t){var a=pt();return rd(a,We.memoizedState,e,t)},useTransition:function(){var e=ji(La)[0],t=pt().memoizedState;return[typeof e=="boolean"?e:hr(e),t]},useSyncExternalStore:Ru,useId:cd,useHostTransitionStatus:ho,useFormState:Qu,useActionState:Qu,useOptimistic:function(e,t){var a=pt();return Vu(a,We,e,t)},useMemoCache:ro,useCacheRefresh:ud},n0={readContext:Lt,use:yi,useCallback:nd,useContext:Lt,useEffect:Pu,useImperativeHandle:ad,useInsertionEffect:Ju,useLayoutEffect:ed,useMemo:sd,useReducer:lo,useRef:Wu,useState:function(){return lo(La)},useDebugValue:uo,useDeferredValue:function(e,t){var a=pt();return We===null?fo(a,e,t):rd(a,We.memoizedState,e,t)},useTransition:function(){var e=lo(La)[0],t=pt().memoizedState;return[typeof e=="boolean"?e:hr(e),t]},useSyncExternalStore:Ru,useId:cd,useHostTransitionStatus:ho,useFormState:$u,useActionState:$u,useOptimistic:function(e,t){var a=pt();return We!==null?Vu(a,We,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:ro,useCacheRefresh:ud},ys=null,vr=0;function Ti(e){var t=vr;return vr+=1,ys===null&&(ys=[]),Tu(ys,e,t)}function xr(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function _i(e,t){throw t.$$typeof===k?Error(u(525)):(e=Object.prototype.toString.call(t),Error(u(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function pd(e){var t=e._init;return t(e._payload)}function vd(e){function t(R,D){if(e){var U=R.deletions;U===null?(R.deletions=[D],R.flags|=16):U.push(D)}}function a(R,D){if(!e)return null;for(;D!==null;)t(R,D),D=D.sibling;return null}function s(R){for(var D=new Map;R!==null;)R.key!==null?D.set(R.key,R):D.set(R.index,R),R=R.sibling;return D}function r(R,D){return R=ka(R,D),R.index=0,R.sibling=null,R}function o(R,D,U){return R.index=U,e?(U=R.alternate,U!==null?(U=U.index,U<D?(R.flags|=67108866,D):U):(R.flags|=67108866,D)):(R.flags|=1048576,D)}function f(R){return e&&R.alternate===null&&(R.flags|=67108866),R}function g(R,D,U,te){return D===null||D.tag!==6?(D=Ll(U,R.mode,te),D.return=R,D):(D=r(D,U),D.return=R,D)}function E(R,D,U,te){var ye=U.type;return ye===y?P(R,D,U.props.children,te,U.key):D!==null&&(D.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Y&&pd(ye)===D.type)?(D=r(D,U.props),xr(D,U),D.return=R,D):(D=ci(U.type,U.key,U.props,null,R.mode,te),xr(D,U),D.return=R,D)}function H(R,D,U,te){return D===null||D.tag!==4||D.stateNode.containerInfo!==U.containerInfo||D.stateNode.implementation!==U.implementation?(D=zl(U,R.mode,te),D.return=R,D):(D=r(D,U.children||[]),D.return=R,D)}function P(R,D,U,te,ye){return D===null||D.tag!==7?(D=Ln(U,R.mode,te,ye),D.return=R,D):(D=r(D,U),D.return=R,D)}function se(R,D,U){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=Ll(""+D,R.mode,U),D.return=R,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case h:return U=ci(D.type,D.key,D.props,null,R.mode,U),xr(U,D),U.return=R,U;case v:return D=zl(D,R.mode,U),D.return=R,D;case Y:var te=D._init;return D=te(D._payload),se(R,D,U)}if(we(D)||ie(D))return D=Ln(D,R.mode,U,null),D.return=R,D;if(typeof D.then=="function")return se(R,Ti(D),U);if(D.$$typeof===z)return se(R,mi(R,D),U);_i(R,D)}return null}function V(R,D,U,te){var ye=D!==null?D.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return ye!==null?null:g(R,D,""+U,te);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case h:return U.key===ye?E(R,D,U,te):null;case v:return U.key===ye?H(R,D,U,te):null;case Y:return ye=U._init,U=ye(U._payload),V(R,D,U,te)}if(we(U)||ie(U))return ye!==null?null:P(R,D,U,te,null);if(typeof U.then=="function")return V(R,D,Ti(U),te);if(U.$$typeof===z)return V(R,D,mi(R,U),te);_i(R,U)}return null}function G(R,D,U,te,ye){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return R=R.get(U)||null,g(D,R,""+te,ye);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case h:return R=R.get(te.key===null?U:te.key)||null,E(D,R,te,ye);case v:return R=R.get(te.key===null?U:te.key)||null,H(D,R,te,ye);case Y:var He=te._init;return te=He(te._payload),G(R,D,U,te,ye)}if(we(te)||ie(te))return R=R.get(U)||null,P(D,R,te,ye,null);if(typeof te.then=="function")return G(R,D,U,Ti(te),ye);if(te.$$typeof===z)return G(R,D,U,mi(D,te),ye);_i(D,te)}return null}function De(R,D,U,te){for(var ye=null,He=null,Se=D,ke=D=0,Tt=null;Se!==null&&ke<U.length;ke++){Se.index>ke?(Tt=Se,Se=null):Tt=Se.sibling;var Ie=V(R,Se,U[ke],te);if(Ie===null){Se===null&&(Se=Tt);break}e&&Se&&Ie.alternate===null&&t(R,Se),D=o(Ie,D,ke),He===null?ye=Ie:He.sibling=Ie,He=Ie,Se=Tt}if(ke===U.length)return a(R,Se),Qe&&Bn(R,ke),ye;if(Se===null){for(;ke<U.length;ke++)Se=se(R,U[ke],te),Se!==null&&(D=o(Se,D,ke),He===null?ye=Se:He.sibling=Se,He=Se);return Qe&&Bn(R,ke),ye}for(Se=s(Se);ke<U.length;ke++)Tt=G(Se,R,ke,U[ke],te),Tt!==null&&(e&&Tt.alternate!==null&&Se.delete(Tt.key===null?ke:Tt.key),D=o(Tt,D,ke),He===null?ye=Tt:He.sibling=Tt,He=Tt);return e&&Se.forEach(function(Nn){return t(R,Nn)}),Qe&&Bn(R,ke),ye}function Te(R,D,U,te){if(U==null)throw Error(u(151));for(var ye=null,He=null,Se=D,ke=D=0,Tt=null,Ie=U.next();Se!==null&&!Ie.done;ke++,Ie=U.next()){Se.index>ke?(Tt=Se,Se=null):Tt=Se.sibling;var Nn=V(R,Se,Ie.value,te);if(Nn===null){Se===null&&(Se=Tt);break}e&&Se&&Nn.alternate===null&&t(R,Se),D=o(Nn,D,ke),He===null?ye=Nn:He.sibling=Nn,He=Nn,Se=Tt}if(Ie.done)return a(R,Se),Qe&&Bn(R,ke),ye;if(Se===null){for(;!Ie.done;ke++,Ie=U.next())Ie=se(R,Ie.value,te),Ie!==null&&(D=o(Ie,D,ke),He===null?ye=Ie:He.sibling=Ie,He=Ie);return Qe&&Bn(R,ke),ye}for(Se=s(Se);!Ie.done;ke++,Ie=U.next())Ie=G(Se,R,ke,Ie.value,te),Ie!==null&&(e&&Ie.alternate!==null&&Se.delete(Ie.key===null?ke:Ie.key),D=o(Ie,D,ke),He===null?ye=Ie:He.sibling=Ie,He=Ie);return e&&Se.forEach(function(sg){return t(R,sg)}),Qe&&Bn(R,ke),ye}function Pe(R,D,U,te){if(typeof U=="object"&&U!==null&&U.type===y&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case h:e:{for(var ye=U.key;D!==null;){if(D.key===ye){if(ye=U.type,ye===y){if(D.tag===7){a(R,D.sibling),te=r(D,U.props.children),te.return=R,R=te;break e}}else if(D.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Y&&pd(ye)===D.type){a(R,D.sibling),te=r(D,U.props),xr(te,U),te.return=R,R=te;break e}a(R,D);break}else t(R,D);D=D.sibling}U.type===y?(te=Ln(U.props.children,R.mode,te,U.key),te.return=R,R=te):(te=ci(U.type,U.key,U.props,null,R.mode,te),xr(te,U),te.return=R,R=te)}return f(R);case v:e:{for(ye=U.key;D!==null;){if(D.key===ye)if(D.tag===4&&D.stateNode.containerInfo===U.containerInfo&&D.stateNode.implementation===U.implementation){a(R,D.sibling),te=r(D,U.children||[]),te.return=R,R=te;break e}else{a(R,D);break}else t(R,D);D=D.sibling}te=zl(U,R.mode,te),te.return=R,R=te}return f(R);case Y:return ye=U._init,U=ye(U._payload),Pe(R,D,U,te)}if(we(U))return De(R,D,U,te);if(ie(U)){if(ye=ie(U),typeof ye!="function")throw Error(u(150));return U=ye.call(U),Te(R,D,U,te)}if(typeof U.then=="function")return Pe(R,D,Ti(U),te);if(U.$$typeof===z)return Pe(R,D,mi(R,U),te);_i(R,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,D!==null&&D.tag===6?(a(R,D.sibling),te=r(D,U),te.return=R,R=te):(a(R,D),te=Ll(U,R.mode,te),te.return=R,R=te),f(R)):a(R,D)}return function(R,D,U,te){try{vr=0;var ye=Pe(R,D,U,te);return ys=null,ye}catch(Se){if(Se===or||Se===gi)throw Se;var He=It(29,Se,null,R.mode);return He.lanes=te,He.return=R,He}finally{}}}var js=vd(!0),xd=vd(!1),sa=L(null),wa=null;function on(e){var t=e.alternate;ee(xt,xt.current&1),ee(sa,e),wa===null&&(t===null||ps.current!==null||t.memoizedState!==null)&&(wa=e)}function bd(e){if(e.tag===22){if(ee(xt,xt.current),ee(sa,e),wa===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(wa=e)}}else cn()}function cn(){ee(xt,xt.current),ee(sa,sa.current)}function za(e){K(sa),wa===e&&(wa=null),K(xt)}var xt=L(0);function Ei(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||rc(a)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function po(e,t,a,s){t=e.memoizedState,a=a(s,t),a=a==null?t:M({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var vo={enqueueSetState:function(e,t,a){e=e._reactInternals;var s=Wt(),r=sn(s);r.payload=t,a!=null&&(r.callback=a),t=rn(e,r,s),t!==null&&(Kt(t,e,s),ur(t,e,s))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var s=Wt(),r=sn(s);r.tag=1,r.payload=t,a!=null&&(r.callback=a),t=rn(e,r,s),t!==null&&(Kt(t,e,s),ur(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Wt(),s=sn(a);s.tag=2,t!=null&&(s.callback=t),t=rn(e,s,a),t!==null&&(Kt(t,e,a),ur(t,e,a))}};function yd(e,t,a,s,r,o,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,o,f):t.prototype&&t.prototype.isPureReactComponent?!er(a,s)||!er(r,o):!0}function jd(e,t,a,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,s),t.state!==e&&vo.enqueueReplaceState(t,t.state,null)}function Fn(e,t){var a=t;if("ref"in t){a={};for(var s in t)s!=="ref"&&(a[s]=t[s])}if(e=e.defaultProps){a===t&&(a=M({},a));for(var r in e)a[r]===void 0&&(a[r]=e[r])}return a}var Oi=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function wd(e){Oi(e)}function Nd(e){console.error(e)}function Sd(e){Oi(e)}function ki(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function Cd(e,t,a){try{var s=e.onCaughtError;s(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function xo(e,t,a){return a=sn(a),a.tag=3,a.payload={element:null},a.callback=function(){ki(e,t)},a}function Td(e){return e=sn(e),e.tag=3,e}function _d(e,t,a,s){var r=a.type.getDerivedStateFromError;if(typeof r=="function"){var o=s.value;e.payload=function(){return r(o)},e.callback=function(){Cd(t,a,s)}}var f=a.stateNode;f!==null&&typeof f.componentDidCatch=="function"&&(e.callback=function(){Cd(t,a,s),typeof r!="function"&&(gn===null?gn=new Set([this]):gn.add(this));var g=s.stack;this.componentDidCatch(s.value,{componentStack:g!==null?g:""})})}function s0(e,t,a,s,r){if(a.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=a.alternate,t!==null&&rr(t,a,r,!0),a=sa.current,a!==null){switch(a.tag){case 13:return wa===null?Go():a.alternate===null&&ct===0&&(ct=3),a.flags&=-257,a.flags|=65536,a.lanes=r,s===Il?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([s]):t.add(s),Fo(e,s,r)),!1;case 22:return a.flags|=65536,s===Il?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([s]):a.add(s)),Fo(e,s,r)),!1}throw Error(u(435,a.tag))}return Fo(e,s,r),Go(),!1}if(Qe)return t=sa.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=r,s!==Hl&&(e=Error(u(422),{cause:s}),sr(ea(e,a)))):(s!==Hl&&(t=Error(u(423),{cause:s}),sr(ea(t,a))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,s=ea(s,a),r=xo(e.stateNode,s,r),$l(e,r),ct!==4&&(ct=2)),!1;var o=Error(u(520),{cause:s});if(o=ea(o,a),Cr===null?Cr=[o]:Cr.push(o),ct!==4&&(ct=2),t===null)return!0;s=ea(s,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=r&-r,a.lanes|=e,e=xo(a.stateNode,s,e),$l(a,e),!1;case 1:if(t=a.type,o=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(gn===null||!gn.has(o))))return a.flags|=65536,r&=-r,a.lanes|=r,r=Td(r),_d(r,e,a,s),$l(a,r),!1}a=a.return}while(a!==null);return!1}var Ed=Error(u(461)),St=!1;function Dt(e,t,a,s){t.child=e===null?xd(t,null,a,s):js(t,e.child,a,s)}function Od(e,t,a,s,r){a=a.render;var o=t.ref;if("ref"in s){var f={};for(var g in s)g!=="ref"&&(f[g]=s[g])}else f=s;return qn(t),s=eo(e,t,a,f,o,r),g=to(),e!==null&&!St?(ao(e,t,r),Ba(e,t,r)):(Qe&&g&&Bl(t),t.flags|=1,Dt(e,t,s,r),t.child)}function kd(e,t,a,s,r){if(e===null){var o=a.type;return typeof o=="function"&&!Rl(o)&&o.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=o,Dd(e,t,o,s,r)):(e=ci(a.type,null,s,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!To(e,r)){var f=o.memoizedProps;if(a=a.compare,a=a!==null?a:er,a(f,s)&&e.ref===t.ref)return Ba(e,t,r)}return t.flags|=1,e=ka(o,s),e.ref=t.ref,e.return=t,t.child=e}function Dd(e,t,a,s,r){if(e!==null){var o=e.memoizedProps;if(er(o,s)&&e.ref===t.ref)if(St=!1,t.pendingProps=s=o,To(e,r))(e.flags&131072)!==0&&(St=!0);else return t.lanes=e.lanes,Ba(e,t,r)}return bo(e,t,a,s,r)}function Md(e,t,a){var s=t.pendingProps,r=s.children,o=e!==null?e.memoizedState:null;if(s.mode==="hidden"){if((t.flags&128)!==0){if(s=o!==null?o.baseLanes|a:a,e!==null){for(r=t.child=e.child,o=0;r!==null;)o=o|r.lanes|r.childLanes,r=r.sibling;t.childLanes=o&~s}else t.childLanes=0,t.child=null;return Ad(e,t,s,a)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&hi(t,o!==null?o.cachePool:null),o!==null?Du(t,o):Kl(),bd(t);else return t.lanes=t.childLanes=536870912,Ad(e,t,o!==null?o.baseLanes|a:a,a)}else o!==null?(hi(t,o.cachePool),Du(t,o),cn(),t.memoizedState=null):(e!==null&&hi(t,null),Kl(),cn());return Dt(e,t,r,a),t.child}function Ad(e,t,a,s){var r=Xl();return r=r===null?null:{parent:vt._currentValue,pool:r},t.memoizedState={baseLanes:a,cachePool:r},e!==null&&hi(t,null),Kl(),bd(t),e!==null&&rr(e,t,s,!0),null}function Di(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(u(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function bo(e,t,a,s,r){return qn(t),a=eo(e,t,a,s,void 0,r),s=to(),e!==null&&!St?(ao(e,t,r),Ba(e,t,r)):(Qe&&s&&Bl(t),t.flags|=1,Dt(e,t,a,r),t.child)}function Rd(e,t,a,s,r,o){return qn(t),t.updateQueue=null,a=Au(t,s,a,r),Mu(e),s=to(),e!==null&&!St?(ao(e,t,o),Ba(e,t,o)):(Qe&&s&&Bl(t),t.flags|=1,Dt(e,t,a,o),t.child)}function Ld(e,t,a,s,r){if(qn(t),t.stateNode===null){var o=ds,f=a.contextType;typeof f=="object"&&f!==null&&(o=Lt(f)),o=new a(s,o),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=vo,t.stateNode=o,o._reactInternals=t,o=t.stateNode,o.props=s,o.state=t.memoizedState,o.refs={},Ql(t),f=a.contextType,o.context=typeof f=="object"&&f!==null?Lt(f):ds,o.state=t.memoizedState,f=a.getDerivedStateFromProps,typeof f=="function"&&(po(t,a,f,s),o.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(f=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),f!==o.state&&vo.enqueueReplaceState(o,o.state,null),fr(t,s,o,r),dr(),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){o=t.stateNode;var g=t.memoizedProps,E=Fn(a,g);o.props=E;var H=o.context,P=a.contextType;f=ds,typeof P=="object"&&P!==null&&(f=Lt(P));var se=a.getDerivedStateFromProps;P=typeof se=="function"||typeof o.getSnapshotBeforeUpdate=="function",g=t.pendingProps!==g,P||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(g||H!==f)&&jd(t,o,s,f),nn=!1;var V=t.memoizedState;o.state=V,fr(t,s,o,r),dr(),H=t.memoizedState,g||V!==H||nn?(typeof se=="function"&&(po(t,a,se,s),H=t.memoizedState),(E=nn||yd(t,a,E,s,V,H,f))?(P||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=H),o.props=s,o.state=H,o.context=f,s=E):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,Zl(e,t),f=t.memoizedProps,P=Fn(a,f),o.props=P,se=t.pendingProps,V=o.context,H=a.contextType,E=ds,typeof H=="object"&&H!==null&&(E=Lt(H)),g=a.getDerivedStateFromProps,(H=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(f!==se||V!==E)&&jd(t,o,s,E),nn=!1,V=t.memoizedState,o.state=V,fr(t,s,o,r),dr();var G=t.memoizedState;f!==se||V!==G||nn||e!==null&&e.dependencies!==null&&fi(e.dependencies)?(typeof g=="function"&&(po(t,a,g,s),G=t.memoizedState),(P=nn||yd(t,a,P,s,V,G,E)||e!==null&&e.dependencies!==null&&fi(e.dependencies))?(H||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,G,E),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,G,E)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||f===e.memoizedProps&&V===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&V===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=G),o.props=s,o.state=G,o.context=E,s=P):(typeof o.componentDidUpdate!="function"||f===e.memoizedProps&&V===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&V===e.memoizedState||(t.flags|=1024),s=!1)}return o=s,Di(e,t),s=(t.flags&128)!==0,o||s?(o=t.stateNode,a=s&&typeof a.getDerivedStateFromError!="function"?null:o.render(),t.flags|=1,e!==null&&s?(t.child=js(t,e.child,null,r),t.child=js(t,null,a,r)):Dt(e,t,a,r),t.memoizedState=o.state,e=t.child):e=Ba(e,t,r),e}function zd(e,t,a,s){return nr(),t.flags|=256,Dt(e,t,a,s),t.child}var yo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function jo(e){return{baseLanes:e,cachePool:Nu()}}function wo(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=ra),e}function Bd(e,t,a){var s=t.pendingProps,r=!1,o=(t.flags&128)!==0,f;if((f=o)||(f=e!==null&&e.memoizedState===null?!1:(xt.current&2)!==0),f&&(r=!0,t.flags&=-129),f=(t.flags&32)!==0,t.flags&=-33,e===null){if(Qe){if(r?on(t):cn(),Qe){var g=ot,E;if(E=g){e:{for(E=g,g=ja;E.nodeType!==8;){if(!g){g=null;break e}if(E=ha(E.nextSibling),E===null){g=null;break e}}g=E}g!==null?(t.memoizedState={dehydrated:g,treeContext:zn!==null?{id:Da,overflow:Ma}:null,retryLane:536870912,hydrationErrors:null},E=It(18,null,null,0),E.stateNode=g,E.return=t,t.child=E,Ut=t,ot=null,E=!0):E=!1}E||Hn(t)}if(g=t.memoizedState,g!==null&&(g=g.dehydrated,g!==null))return rc(g)?t.lanes=32:t.lanes=536870912,null;za(t)}return g=s.children,s=s.fallback,r?(cn(),r=t.mode,g=Mi({mode:"hidden",children:g},r),s=Ln(s,r,a,null),g.return=t,s.return=t,g.sibling=s,t.child=g,r=t.child,r.memoizedState=jo(a),r.childLanes=wo(e,f,a),t.memoizedState=yo,s):(on(t),No(t,g))}if(E=e.memoizedState,E!==null&&(g=E.dehydrated,g!==null)){if(o)t.flags&256?(on(t),t.flags&=-257,t=So(e,t,a)):t.memoizedState!==null?(cn(),t.child=e.child,t.flags|=128,t=null):(cn(),r=s.fallback,g=t.mode,s=Mi({mode:"visible",children:s.children},g),r=Ln(r,g,a,null),r.flags|=2,s.return=t,r.return=t,s.sibling=r,t.child=s,js(t,e.child,null,a),s=t.child,s.memoizedState=jo(a),s.childLanes=wo(e,f,a),t.memoizedState=yo,t=r);else if(on(t),rc(g)){if(f=g.nextSibling&&g.nextSibling.dataset,f)var H=f.dgst;f=H,s=Error(u(419)),s.stack="",s.digest=f,sr({value:s,source:null,stack:null}),t=So(e,t,a)}else if(St||rr(e,t,a,!1),f=(a&e.childLanes)!==0,St||f){if(f=at,f!==null&&(s=a&-a,s=(s&42)!==0?1:Xa(s),s=(s&(f.suspendedLanes|a))!==0?0:s,s!==0&&s!==E.retryLane))throw E.retryLane=s,us(e,s),Kt(f,e,s),Ed;g.data==="$?"||Go(),t=So(e,t,a)}else g.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=E.treeContext,ot=ha(g.nextSibling),Ut=t,Qe=!0,Un=null,ja=!1,e!==null&&(aa[na++]=Da,aa[na++]=Ma,aa[na++]=zn,Da=e.id,Ma=e.overflow,zn=t),t=No(t,s.children),t.flags|=4096);return t}return r?(cn(),r=s.fallback,g=t.mode,E=e.child,H=E.sibling,s=ka(E,{mode:"hidden",children:s.children}),s.subtreeFlags=E.subtreeFlags&65011712,H!==null?r=ka(H,r):(r=Ln(r,g,a,null),r.flags|=2),r.return=t,s.return=t,s.sibling=r,t.child=s,s=r,r=t.child,g=e.child.memoizedState,g===null?g=jo(a):(E=g.cachePool,E!==null?(H=vt._currentValue,E=E.parent!==H?{parent:H,pool:H}:E):E=Nu(),g={baseLanes:g.baseLanes|a,cachePool:E}),r.memoizedState=g,r.childLanes=wo(e,f,a),t.memoizedState=yo,s):(on(t),a=e.child,e=a.sibling,a=ka(a,{mode:"visible",children:s.children}),a.return=t,a.sibling=null,e!==null&&(f=t.deletions,f===null?(t.deletions=[e],t.flags|=16):f.push(e)),t.child=a,t.memoizedState=null,a)}function No(e,t){return t=Mi({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Mi(e,t){return e=It(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function So(e,t,a){return js(t,e.child,null,a),e=No(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ud(e,t,a){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),ql(e.return,t,a)}function Co(e,t,a,s,r){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:a,tailMode:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=a,o.tailMode=r)}function Hd(e,t,a){var s=t.pendingProps,r=s.revealOrder,o=s.tail;if(Dt(e,t,s.children,a),s=xt.current,(s&2)!==0)s=s&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ud(e,a,t);else if(e.tag===19)Ud(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}switch(ee(xt,s),r){case"forwards":for(a=t.child,r=null;a!==null;)e=a.alternate,e!==null&&Ei(e)===null&&(r=a),a=a.sibling;a=r,a===null?(r=t.child,t.child=null):(r=a.sibling,a.sibling=null),Co(t,!1,r,a,o);break;case"backwards":for(a=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Ei(e)===null){t.child=r;break}e=r.sibling,r.sibling=a,a=r,r=e}Co(t,!0,a,null,o);break;case"together":Co(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ba(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),hn|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(rr(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(u(153));if(t.child!==null){for(e=t.child,a=ka(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=ka(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function To(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&fi(e)))}function r0(e,t,a){switch(t.tag){case 3:ve(t,t.stateNode.containerInfo),an(t,vt,e.memoizedState.cache),nr();break;case 27:case 5:me(t);break;case 4:ve(t,t.stateNode.containerInfo);break;case 10:an(t,t.type,t.memoizedProps.value);break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(on(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Bd(e,t,a):(on(t),e=Ba(e,t,a),e!==null?e.sibling:null);on(t);break;case 19:var r=(e.flags&128)!==0;if(s=(a&t.childLanes)!==0,s||(rr(e,t,a,!1),s=(a&t.childLanes)!==0),r){if(s)return Hd(e,t,a);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ee(xt,xt.current),s)break;return null;case 22:case 23:return t.lanes=0,Md(e,t,a);case 24:an(t,vt,e.memoizedState.cache)}return Ba(e,t,a)}function Vd(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)St=!0;else{if(!To(e,a)&&(t.flags&128)===0)return St=!1,r0(e,t,a);St=(e.flags&131072)!==0}else St=!1,Qe&&(t.flags&1048576)!==0&&pu(t,di,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var s=t.elementType,r=s._init;if(s=r(s._payload),t.type=s,typeof s=="function")Rl(s)?(e=Fn(s,e),t.tag=1,t=Ld(null,t,s,e,a)):(t.tag=0,t=bo(null,t,s,e,a));else{if(s!=null){if(r=s.$$typeof,r===ae){t.tag=11,t=Od(null,t,s,e,a);break e}else if(r===de){t.tag=14,t=kd(null,t,s,e,a);break e}}throw t=je(s)||s,Error(u(306,t,""))}}return t;case 0:return bo(e,t,t.type,t.pendingProps,a);case 1:return s=t.type,r=Fn(s,t.pendingProps),Ld(e,t,s,r,a);case 3:e:{if(ve(t,t.stateNode.containerInfo),e===null)throw Error(u(387));s=t.pendingProps;var o=t.memoizedState;r=o.element,Zl(e,t),fr(t,s,null,a);var f=t.memoizedState;if(s=f.cache,an(t,vt,s),s!==o.cache&&Gl(t,[vt],a,!0),dr(),s=f.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:f.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=zd(e,t,s,a);break e}else if(s!==r){r=ea(Error(u(424)),t),sr(r),t=zd(e,t,s,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ot=ha(e.firstChild),Ut=t,Qe=!0,Un=null,ja=!0,a=xd(t,null,s,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(nr(),s===r){t=Ba(e,t,a);break e}Dt(e,t,s,a)}t=t.child}return t;case 26:return Di(e,t),e===null?(a=Xf(t.type,null,t.pendingProps,null))?t.memoizedState=a:Qe||(a=t.type,e=t.pendingProps,s=Ii(he.current).createElement(a),s[F]=t,s[ue]=e,At(s,a,e),dt(s),t.stateNode=s):t.memoizedState=Xf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return me(t),e===null&&Qe&&(s=t.stateNode=Gf(t.type,t.pendingProps,he.current),Ut=t,ja=!0,r=ot,xn(t.type)?(ic=r,ot=ha(s.firstChild)):ot=r),Dt(e,t,t.pendingProps.children,a),Di(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Qe&&((r=s=ot)&&(s=A0(s,t.type,t.pendingProps,ja),s!==null?(t.stateNode=s,Ut=t,ot=ha(s.firstChild),ja=!1,r=!0):r=!1),r||Hn(t)),me(t),r=t.type,o=t.pendingProps,f=e!==null?e.memoizedProps:null,s=o.children,ac(r,o)?s=null:f!==null&&ac(r,f)&&(t.flags|=32),t.memoizedState!==null&&(r=eo(e,t,Kh,null,null,a),Rr._currentValue=r),Di(e,t),Dt(e,t,s,a),t.child;case 6:return e===null&&Qe&&((e=a=ot)&&(a=R0(a,t.pendingProps,ja),a!==null?(t.stateNode=a,Ut=t,ot=null,e=!0):e=!1),e||Hn(t)),null;case 13:return Bd(e,t,a);case 4:return ve(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=js(t,null,s,a):Dt(e,t,s,a),t.child;case 11:return Od(e,t,t.type,t.pendingProps,a);case 7:return Dt(e,t,t.pendingProps,a),t.child;case 8:return Dt(e,t,t.pendingProps.children,a),t.child;case 12:return Dt(e,t,t.pendingProps.children,a),t.child;case 10:return s=t.pendingProps,an(t,t.type,s.value),Dt(e,t,s.children,a),t.child;case 9:return r=t.type._context,s=t.pendingProps.children,qn(t),r=Lt(r),s=s(r),t.flags|=1,Dt(e,t,s,a),t.child;case 14:return kd(e,t,t.type,t.pendingProps,a);case 15:return Dd(e,t,t.type,t.pendingProps,a);case 19:return Hd(e,t,a);case 31:return s=t.pendingProps,a=t.mode,s={mode:s.mode,children:s.children},e===null?(a=Mi(s,a),a.ref=t.ref,t.child=a,a.return=t,t=a):(a=ka(e.child,s),a.ref=t.ref,t.child=a,a.return=t,t=a),t;case 22:return Md(e,t,a);case 24:return qn(t),s=Lt(vt),e===null?(r=Xl(),r===null&&(r=at,o=Yl(),r.pooledCache=o,o.refCount++,o!==null&&(r.pooledCacheLanes|=a),r=o),t.memoizedState={parent:s,cache:r},Ql(t),an(t,vt,r)):((e.lanes&a)!==0&&(Zl(e,t),fr(t,null,null,a),dr()),r=e.memoizedState,o=t.memoizedState,r.parent!==s?(r={parent:s,cache:s},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),an(t,vt,s)):(s=o.cache,an(t,vt,s),s!==r.cache&&Gl(t,[vt],a,!0))),Dt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(u(156,t.tag))}function Ua(e){e.flags|=4}function qd(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Wf(t)){if(t=sa.current,t!==null&&((Fe&4194048)===Fe?wa!==null:(Fe&62914560)!==Fe&&(Fe&536870912)===0||t!==wa))throw cr=Il,Su;e.flags|=8192}}function Ai(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Cn():536870912,e.lanes|=t,Cs|=t)}function br(e,t){if(!Qe)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function it(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,s=0;if(t)for(var r=e.child;r!==null;)a|=r.lanes|r.childLanes,s|=r.subtreeFlags&65011712,s|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)a|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=s,e.childLanes=a,t}function i0(e,t,a){var s=t.pendingProps;switch(Ul(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(t),null;case 1:return it(t),null;case 3:return a=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Ra(vt),Ue(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ar(t)?Ua(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,bu())),it(t),null;case 26:return a=t.memoizedState,e===null?(Ua(t),a!==null?(it(t),qd(t,a)):(it(t),t.flags&=-16777217)):a?a!==e.memoizedState?(Ua(t),it(t),qd(t,a)):(it(t),t.flags&=-16777217):(e.memoizedProps!==s&&Ua(t),it(t),t.flags&=-16777217),null;case 27:pe(t),a=he.current;var r=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Ua(t);else{if(!s){if(t.stateNode===null)throw Error(u(166));return it(t),null}e=$.current,ar(t)?vu(t):(e=Gf(r,s,a),t.stateNode=e,Ua(t))}return it(t),null;case 5:if(pe(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Ua(t);else{if(!s){if(t.stateNode===null)throw Error(u(166));return it(t),null}if(e=$.current,ar(t))vu(t);else{switch(r=Ii(he.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof s.is=="string"?r.createElement("select",{is:s.is}):r.createElement("select"),s.multiple?e.multiple=!0:s.size&&(e.size=s.size);break;default:e=typeof s.is=="string"?r.createElement(a,{is:s.is}):r.createElement(a)}}e[F]=t,e[ue]=s;e:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;e:switch(At(e,a,s),a){case"button":case"input":case"select":case"textarea":e=!!s.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ua(t)}}return it(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&Ua(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(u(166));if(e=he.current,ar(t)){if(e=t.stateNode,a=t.memoizedProps,s=null,r=Ut,r!==null)switch(r.tag){case 27:case 5:s=r.memoizedProps}e[F]=t,e=!!(e.nodeValue===a||s!==null&&s.suppressHydrationWarning===!0||Lf(e.nodeValue,a)),e||Hn(t)}else e=Ii(e).createTextNode(s),e[F]=t,t.stateNode=e}return it(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=ar(t),s!==null&&s.dehydrated!==null){if(e===null){if(!r)throw Error(u(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(u(317));r[F]=t}else nr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;it(t),r=!1}else r=bu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(za(t),t):(za(t),null)}if(za(t),(t.flags&128)!==0)return t.lanes=a,t;if(a=s!==null,e=e!==null&&e.memoizedState!==null,a){s=t.child,r=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(r=s.alternate.memoizedState.cachePool.pool);var o=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==r&&(s.flags|=2048)}return a!==e&&a&&(t.child.flags|=8192),Ai(t,t.updateQueue),it(t),null;case 4:return Ue(),e===null&&Ko(t.stateNode.containerInfo),it(t),null;case 10:return Ra(t.type),it(t),null;case 19:if(K(xt),r=t.memoizedState,r===null)return it(t),null;if(s=(t.flags&128)!==0,o=r.rendering,o===null)if(s)br(r,!1);else{if(ct!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(o=Ei(e),o!==null){for(t.flags|=128,br(r,!1),e=o.updateQueue,t.updateQueue=e,Ai(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)gu(a,e),a=a.sibling;return ee(xt,xt.current&1|2),t.child}e=e.sibling}r.tail!==null&&tt()>zi&&(t.flags|=128,s=!0,br(r,!1),t.lanes=4194304)}else{if(!s)if(e=Ei(o),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,Ai(t,e),br(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!Qe)return it(t),null}else 2*tt()-r.renderingStartTime>zi&&a!==536870912&&(t.flags|=128,s=!0,br(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(e=r.last,e!==null?e.sibling=o:t.child=o,r.last=o)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=tt(),t.sibling=null,e=xt.current,ee(xt,s?e&1|2:e&1),t):(it(t),null);case 22:case 23:return za(t),Pl(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(a&536870912)!==0&&(t.flags&128)===0&&(it(t),t.subtreeFlags&6&&(t.flags|=8192)):it(t),a=t.updateQueue,a!==null&&Ai(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==a&&(t.flags|=2048),e!==null&&K(Gn),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Ra(vt),it(t),null;case 25:return null;case 30:return null}throw Error(u(156,t.tag))}function l0(e,t){switch(Ul(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ra(vt),Ue(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return pe(t),null;case 13:if(za(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(u(340));nr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return K(xt),null;case 4:return Ue(),null;case 10:return Ra(t.type),null;case 22:case 23:return za(t),Pl(),e!==null&&K(Gn),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Ra(vt),null;case 25:return null;default:return null}}function Gd(e,t){switch(Ul(t),t.tag){case 3:Ra(vt),Ue();break;case 26:case 27:case 5:pe(t);break;case 4:Ue();break;case 13:za(t);break;case 19:K(xt);break;case 10:Ra(t.type);break;case 22:case 23:za(t),Pl(),e!==null&&K(Gn);break;case 24:Ra(vt)}}function yr(e,t){try{var a=t.updateQueue,s=a!==null?a.lastEffect:null;if(s!==null){var r=s.next;a=r;do{if((a.tag&e)===e){s=void 0;var o=a.create,f=a.inst;s=o(),f.destroy=s}a=a.next}while(a!==r)}}catch(g){Je(t,t.return,g)}}function un(e,t,a){try{var s=t.updateQueue,r=s!==null?s.lastEffect:null;if(r!==null){var o=r.next;s=o;do{if((s.tag&e)===e){var f=s.inst,g=f.destroy;if(g!==void 0){f.destroy=void 0,r=t;var E=a,H=g;try{H()}catch(P){Je(r,E,P)}}}s=s.next}while(s!==o)}}catch(P){Je(t,t.return,P)}}function Yd(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{ku(t,a)}catch(s){Je(e,e.return,s)}}}function Fd(e,t,a){a.props=Fn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(s){Je(e,t,s)}}function jr(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof a=="function"?e.refCleanup=a(s):a.current=s}}catch(r){Je(e,t,r)}}function Na(e,t){var a=e.ref,s=e.refCleanup;if(a!==null)if(typeof s=="function")try{s()}catch(r){Je(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(r){Je(e,t,r)}else a.current=null}function Xd(e){var t=e.type,a=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&s.focus();break e;case"img":a.src?s.src=a.src:a.srcSet&&(s.srcset=a.srcSet)}}catch(r){Je(e,e.return,r)}}function _o(e,t,a){try{var s=e.stateNode;E0(s,e.type,a,t),s[ue]=t}catch(r){Je(e,e.return,r)}}function Id(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&xn(e.type)||e.tag===4}function Eo(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Id(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&xn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Oo(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Xi));else if(s!==4&&(s===27&&xn(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Oo(e,t,a),e=e.sibling;e!==null;)Oo(e,t,a),e=e.sibling}function Ri(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(s!==4&&(s===27&&xn(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Ri(e,t,a),e=e.sibling;e!==null;)Ri(e,t,a),e=e.sibling}function Qd(e){var t=e.stateNode,a=e.memoizedProps;try{for(var s=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);At(t,s,a),t[F]=e,t[ue]=a}catch(o){Je(e,e.return,o)}}var Ha=!1,mt=!1,ko=!1,Zd=typeof WeakSet=="function"?WeakSet:Set,Ct=null;function o0(e,t){if(e=e.containerInfo,ec=Pi,e=ru(e),_l(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var s=a.getSelection&&a.getSelection();if(s&&s.rangeCount!==0){a=s.anchorNode;var r=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{a.nodeType,o.nodeType}catch{a=null;break e}var f=0,g=-1,E=-1,H=0,P=0,se=e,V=null;t:for(;;){for(var G;se!==a||r!==0&&se.nodeType!==3||(g=f+r),se!==o||s!==0&&se.nodeType!==3||(E=f+s),se.nodeType===3&&(f+=se.nodeValue.length),(G=se.firstChild)!==null;)V=se,se=G;for(;;){if(se===e)break t;if(V===a&&++H===r&&(g=f),V===o&&++P===s&&(E=f),(G=se.nextSibling)!==null)break;se=V,V=se.parentNode}se=G}a=g===-1||E===-1?null:{start:g,end:E}}else a=null}a=a||{start:0,end:0}}else a=null;for(tc={focusedElem:e,selectionRange:a},Pi=!1,Ct=t;Ct!==null;)if(t=Ct,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,Ct=e;else for(;Ct!==null;){switch(t=Ct,o=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&o!==null){e=void 0,a=t,r=o.memoizedProps,o=o.memoizedState,s=a.stateNode;try{var De=Fn(a.type,r,a.elementType===a.type);e=s.getSnapshotBeforeUpdate(De,o),s.__reactInternalSnapshotBeforeUpdate=e}catch(Te){Je(a,a.return,Te)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)sc(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":sc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(u(163))}if(e=t.sibling,e!==null){e.return=t.return,Ct=e;break}Ct=t.return}}function $d(e,t,a){var s=a.flags;switch(a.tag){case 0:case 11:case 15:dn(e,a),s&4&&yr(5,a);break;case 1:if(dn(e,a),s&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(f){Je(a,a.return,f)}else{var r=Fn(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(f){Je(a,a.return,f)}}s&64&&Yd(a),s&512&&jr(a,a.return);break;case 3:if(dn(e,a),s&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{ku(e,t)}catch(f){Je(a,a.return,f)}}break;case 27:t===null&&s&4&&Qd(a);case 26:case 5:dn(e,a),t===null&&s&4&&Xd(a),s&512&&jr(a,a.return);break;case 12:dn(e,a);break;case 13:dn(e,a),s&4&&Pd(e,a),s&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=v0.bind(null,a),L0(e,a))));break;case 22:if(s=a.memoizedState!==null||Ha,!s){t=t!==null&&t.memoizedState!==null||mt,r=Ha;var o=mt;Ha=s,(mt=t)&&!o?fn(e,a,(a.subtreeFlags&8772)!==0):dn(e,a),Ha=r,mt=o}break;case 30:break;default:dn(e,a)}}function Wd(e){var t=e.alternate;t!==null&&(e.alternate=null,Wd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Pt(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var st=null,Yt=!1;function Va(e,t,a){for(a=a.child;a!==null;)Kd(e,t,a),a=a.sibling}function Kd(e,t,a){if(Ee&&typeof Ee.onCommitFiberUnmount=="function")try{Ee.onCommitFiberUnmount(Me,a)}catch{}switch(a.tag){case 26:mt||Na(a,t),Va(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:mt||Na(a,t);var s=st,r=Yt;xn(a.type)&&(st=a.stateNode,Yt=!1),Va(e,t,a),kr(a.stateNode),st=s,Yt=r;break;case 5:mt||Na(a,t);case 6:if(s=st,r=Yt,st=null,Va(e,t,a),st=s,Yt=r,st!==null)if(Yt)try{(st.nodeType===9?st.body:st.nodeName==="HTML"?st.ownerDocument.body:st).removeChild(a.stateNode)}catch(o){Je(a,t,o)}else try{st.removeChild(a.stateNode)}catch(o){Je(a,t,o)}break;case 18:st!==null&&(Yt?(e=st,Vf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Ur(e)):Vf(st,a.stateNode));break;case 4:s=st,r=Yt,st=a.stateNode.containerInfo,Yt=!0,Va(e,t,a),st=s,Yt=r;break;case 0:case 11:case 14:case 15:mt||un(2,a,t),mt||un(4,a,t),Va(e,t,a);break;case 1:mt||(Na(a,t),s=a.stateNode,typeof s.componentWillUnmount=="function"&&Fd(a,t,s)),Va(e,t,a);break;case 21:Va(e,t,a);break;case 22:mt=(s=mt)||a.memoizedState!==null,Va(e,t,a),mt=s;break;default:Va(e,t,a)}}function Pd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ur(e)}catch(a){Je(t,t.return,a)}}function c0(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Zd),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Zd),t;default:throw Error(u(435,e.tag))}}function Do(e,t){var a=c0(e);t.forEach(function(s){var r=x0.bind(null,e,s);a.has(s)||(a.add(s),s.then(r,r))})}function Qt(e,t){var a=t.deletions;if(a!==null)for(var s=0;s<a.length;s++){var r=a[s],o=e,f=t,g=f;e:for(;g!==null;){switch(g.tag){case 27:if(xn(g.type)){st=g.stateNode,Yt=!1;break e}break;case 5:st=g.stateNode,Yt=!1;break e;case 3:case 4:st=g.stateNode.containerInfo,Yt=!0;break e}g=g.return}if(st===null)throw Error(u(160));Kd(o,f,r),st=null,Yt=!1,o=r.alternate,o!==null&&(o.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)Jd(t,e),t=t.sibling}var ma=null;function Jd(e,t){var a=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Qt(t,e),Zt(e),s&4&&(un(3,e,e.return),yr(3,e),un(5,e,e.return));break;case 1:Qt(t,e),Zt(e),s&512&&(mt||a===null||Na(a,a.return)),s&64&&Ha&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?s:a.concat(s))));break;case 26:var r=ma;if(Qt(t,e),Zt(e),s&512&&(mt||a===null||Na(a,a.return)),s&4){var o=a!==null?a.memoizedState:null;if(s=e.memoizedState,a===null)if(s===null)if(e.stateNode===null){e:{s=e.type,a=e.memoizedProps,r=r.ownerDocument||r;t:switch(s){case"title":o=r.getElementsByTagName("title")[0],(!o||o[ca]||o[F]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=r.createElement(s),r.head.insertBefore(o,r.querySelector("head > title"))),At(o,s,a),o[F]=e,dt(o),s=o;break e;case"link":var f=Zf("link","href",r).get(s+(a.href||""));if(f){for(var g=0;g<f.length;g++)if(o=f[g],o.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&o.getAttribute("rel")===(a.rel==null?null:a.rel)&&o.getAttribute("title")===(a.title==null?null:a.title)&&o.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){f.splice(g,1);break t}}o=r.createElement(s),At(o,s,a),r.head.appendChild(o);break;case"meta":if(f=Zf("meta","content",r).get(s+(a.content||""))){for(g=0;g<f.length;g++)if(o=f[g],o.getAttribute("content")===(a.content==null?null:""+a.content)&&o.getAttribute("name")===(a.name==null?null:a.name)&&o.getAttribute("property")===(a.property==null?null:a.property)&&o.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&o.getAttribute("charset")===(a.charSet==null?null:a.charSet)){f.splice(g,1);break t}}o=r.createElement(s),At(o,s,a),r.head.appendChild(o);break;default:throw Error(u(468,s))}o[F]=e,dt(o),s=o}e.stateNode=s}else $f(r,e.type,e.stateNode);else e.stateNode=Qf(r,s,e.memoizedProps);else o!==s?(o===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):o.count--,s===null?$f(r,e.type,e.stateNode):Qf(r,s,e.memoizedProps)):s===null&&e.stateNode!==null&&_o(e,e.memoizedProps,a.memoizedProps)}break;case 27:Qt(t,e),Zt(e),s&512&&(mt||a===null||Na(a,a.return)),a!==null&&s&4&&_o(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Qt(t,e),Zt(e),s&512&&(mt||a===null||Na(a,a.return)),e.flags&32){r=e.stateNode;try{Ka(r,"")}catch(G){Je(e,e.return,G)}}s&4&&e.stateNode!=null&&(r=e.memoizedProps,_o(e,r,a!==null?a.memoizedProps:r)),s&1024&&(ko=!0);break;case 6:if(Qt(t,e),Zt(e),s&4){if(e.stateNode===null)throw Error(u(162));s=e.memoizedProps,a=e.stateNode;try{a.nodeValue=s}catch(G){Je(e,e.return,G)}}break;case 3:if($i=null,r=ma,ma=Qi(t.containerInfo),Qt(t,e),ma=r,Zt(e),s&4&&a!==null&&a.memoizedState.isDehydrated)try{Ur(t.containerInfo)}catch(G){Je(e,e.return,G)}ko&&(ko=!1,ef(e));break;case 4:s=ma,ma=Qi(e.stateNode.containerInfo),Qt(t,e),Zt(e),ma=s;break;case 12:Qt(t,e),Zt(e);break;case 13:Qt(t,e),Zt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Bo=tt()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Do(e,s)));break;case 22:r=e.memoizedState!==null;var E=a!==null&&a.memoizedState!==null,H=Ha,P=mt;if(Ha=H||r,mt=P||E,Qt(t,e),mt=P,Ha=H,Zt(e),s&8192)e:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(a===null||E||Ha||mt||Xn(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){E=a=t;try{if(o=E.stateNode,r)f=o.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{g=E.stateNode;var se=E.memoizedProps.style,V=se!=null&&se.hasOwnProperty("display")?se.display:null;g.style.display=V==null||typeof V=="boolean"?"":(""+V).trim()}}catch(G){Je(E,E.return,G)}}}else if(t.tag===6){if(a===null){E=t;try{E.stateNode.nodeValue=r?"":E.memoizedProps}catch(G){Je(E,E.return,G)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(a=s.retryQueue,a!==null&&(s.retryQueue=null,Do(e,a))));break;case 19:Qt(t,e),Zt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Do(e,s)));break;case 30:break;case 21:break;default:Qt(t,e),Zt(e)}}function Zt(e){var t=e.flags;if(t&2){try{for(var a,s=e.return;s!==null;){if(Id(s)){a=s;break}s=s.return}if(a==null)throw Error(u(160));switch(a.tag){case 27:var r=a.stateNode,o=Eo(e);Ri(e,o,r);break;case 5:var f=a.stateNode;a.flags&32&&(Ka(f,""),a.flags&=-33);var g=Eo(e);Ri(e,g,f);break;case 3:case 4:var E=a.stateNode.containerInfo,H=Eo(e);Oo(e,H,E);break;default:throw Error(u(161))}}catch(P){Je(e,e.return,P)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ef(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;ef(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function dn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)$d(e,t.alternate,t),t=t.sibling}function Xn(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:un(4,t,t.return),Xn(t);break;case 1:Na(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Fd(t,t.return,a),Xn(t);break;case 27:kr(t.stateNode);case 26:case 5:Na(t,t.return),Xn(t);break;case 22:t.memoizedState===null&&Xn(t);break;case 30:Xn(t);break;default:Xn(t)}e=e.sibling}}function fn(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,r=e,o=t,f=o.flags;switch(o.tag){case 0:case 11:case 15:fn(r,o,a),yr(4,o);break;case 1:if(fn(r,o,a),s=o,r=s.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(H){Je(s,s.return,H)}if(s=o,r=s.updateQueue,r!==null){var g=s.stateNode;try{var E=r.shared.hiddenCallbacks;if(E!==null)for(r.shared.hiddenCallbacks=null,r=0;r<E.length;r++)Ou(E[r],g)}catch(H){Je(s,s.return,H)}}a&&f&64&&Yd(o),jr(o,o.return);break;case 27:Qd(o);case 26:case 5:fn(r,o,a),a&&s===null&&f&4&&Xd(o),jr(o,o.return);break;case 12:fn(r,o,a);break;case 13:fn(r,o,a),a&&f&4&&Pd(r,o);break;case 22:o.memoizedState===null&&fn(r,o,a),jr(o,o.return);break;case 30:break;default:fn(r,o,a)}t=t.sibling}}function Mo(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&ir(a))}function Ao(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ir(e))}function Sa(e,t,a,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)tf(e,t,a,s),t=t.sibling}function tf(e,t,a,s){var r=t.flags;switch(t.tag){case 0:case 11:case 15:Sa(e,t,a,s),r&2048&&yr(9,t);break;case 1:Sa(e,t,a,s);break;case 3:Sa(e,t,a,s),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ir(e)));break;case 12:if(r&2048){Sa(e,t,a,s),e=t.stateNode;try{var o=t.memoizedProps,f=o.id,g=o.onPostCommit;typeof g=="function"&&g(f,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(E){Je(t,t.return,E)}}else Sa(e,t,a,s);break;case 13:Sa(e,t,a,s);break;case 23:break;case 22:o=t.stateNode,f=t.alternate,t.memoizedState!==null?o._visibility&2?Sa(e,t,a,s):wr(e,t):o._visibility&2?Sa(e,t,a,s):(o._visibility|=2,ws(e,t,a,s,(t.subtreeFlags&10256)!==0)),r&2048&&Mo(f,t);break;case 24:Sa(e,t,a,s),r&2048&&Ao(t.alternate,t);break;default:Sa(e,t,a,s)}}function ws(e,t,a,s,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var o=e,f=t,g=a,E=s,H=f.flags;switch(f.tag){case 0:case 11:case 15:ws(o,f,g,E,r),yr(8,f);break;case 23:break;case 22:var P=f.stateNode;f.memoizedState!==null?P._visibility&2?ws(o,f,g,E,r):wr(o,f):(P._visibility|=2,ws(o,f,g,E,r)),r&&H&2048&&Mo(f.alternate,f);break;case 24:ws(o,f,g,E,r),r&&H&2048&&Ao(f.alternate,f);break;default:ws(o,f,g,E,r)}t=t.sibling}}function wr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,s=t,r=s.flags;switch(s.tag){case 22:wr(a,s),r&2048&&Mo(s.alternate,s);break;case 24:wr(a,s),r&2048&&Ao(s.alternate,s);break;default:wr(a,s)}t=t.sibling}}var Nr=8192;function Ns(e){if(e.subtreeFlags&Nr)for(e=e.child;e!==null;)af(e),e=e.sibling}function af(e){switch(e.tag){case 26:Ns(e),e.flags&Nr&&e.memoizedState!==null&&Z0(ma,e.memoizedState,e.memoizedProps);break;case 5:Ns(e);break;case 3:case 4:var t=ma;ma=Qi(e.stateNode.containerInfo),Ns(e),ma=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Nr,Nr=16777216,Ns(e),Nr=t):Ns(e));break;default:Ns(e)}}function nf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Sr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];Ct=s,rf(s,e)}nf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)sf(e),e=e.sibling}function sf(e){switch(e.tag){case 0:case 11:case 15:Sr(e),e.flags&2048&&un(9,e,e.return);break;case 3:Sr(e);break;case 12:Sr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Li(e)):Sr(e);break;default:Sr(e)}}function Li(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];Ct=s,rf(s,e)}nf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:un(8,t,t.return),Li(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Li(t));break;default:Li(t)}e=e.sibling}}function rf(e,t){for(;Ct!==null;){var a=Ct;switch(a.tag){case 0:case 11:case 15:un(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var s=a.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:ir(a.memoizedState.cache)}if(s=a.child,s!==null)s.return=a,Ct=s;else e:for(a=e;Ct!==null;){s=Ct;var r=s.sibling,o=s.return;if(Wd(s),s===a){Ct=null;break e}if(r!==null){r.return=o,Ct=r;break e}Ct=o}}}var u0={getCacheForType:function(e){var t=Lt(vt),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a}},d0=typeof WeakMap=="function"?WeakMap:Map,Ze=0,at=null,qe=null,Fe=0,$e=0,$t=null,mn=!1,Ss=!1,Ro=!1,qa=0,ct=0,hn=0,In=0,Lo=0,ra=0,Cs=0,Cr=null,Ft=null,zo=!1,Bo=0,zi=1/0,Bi=null,gn=null,Mt=0,pn=null,Ts=null,_s=0,Uo=0,Ho=null,lf=null,Tr=0,Vo=null;function Wt(){if((Ze&2)!==0&&Fe!==0)return Fe&-Fe;if(N.T!==null){var e=hs;return e!==0?e:Qo()}return En()}function of(){ra===0&&(ra=(Fe&536870912)===0||Qe?Ya():536870912);var e=sa.current;return e!==null&&(e.flags|=32),ra}function Kt(e,t,a){(e===at&&($e===2||$e===9)||e.cancelPendingCommit!==null)&&(Es(e,0),vn(e,Fe,ra,!1)),va(e,a),((Ze&2)===0||e!==at)&&(e===at&&((Ze&2)===0&&(In|=a),ct===4&&vn(e,Fe,ra,!1)),Ca(e))}function cf(e,t,a){if((Ze&6)!==0)throw Error(u(327));var s=!a&&(t&124)===0&&(t&e.expiredLanes)===0||pa(e,t),r=s?h0(e,t):Yo(e,t,!0),o=s;do{if(r===0){Ss&&!s&&vn(e,t,0,!1);break}else{if(a=e.current.alternate,o&&!f0(a)){r=Yo(e,t,!1),o=!1;continue}if(r===2){if(o=t,e.errorRecoveryDisabledLanes&o)var f=0;else f=e.pendingLanes&-536870913,f=f!==0?f:f&536870912?536870912:0;if(f!==0){t=f;e:{var g=e;r=Cr;var E=g.current.memoizedState.isDehydrated;if(E&&(Es(g,f).flags|=256),f=Yo(g,f,!1),f!==2){if(Ro&&!E){g.errorRecoveryDisabledLanes|=o,In|=o,r=4;break e}o=Ft,Ft=r,o!==null&&(Ft===null?Ft=o:Ft.push.apply(Ft,o))}r=f}if(o=!1,r!==2)continue}}if(r===1){Es(e,0),vn(e,t,0,!0);break}e:{switch(s=e,o=r,o){case 0:case 1:throw Error(u(345));case 4:if((t&4194048)!==t)break;case 6:vn(s,t,ra,!mn);break e;case 2:Ft=null;break;case 3:case 5:break;default:throw Error(u(329))}if((t&62914560)===t&&(r=Bo+300-tt(),10<r)){if(vn(s,t,ra,!mn),Ht(s,0,!0)!==0)break e;s.timeoutHandle=Uf(uf.bind(null,s,a,Ft,Bi,zo,t,ra,In,Cs,mn,o,2,-0,0),r);break e}uf(s,a,Ft,Bi,zo,t,ra,In,Cs,mn,o,0,-0,0)}}break}while(!0);Ca(e)}function uf(e,t,a,s,r,o,f,g,E,H,P,se,V,G){if(e.timeoutHandle=-1,se=t.subtreeFlags,(se&8192||(se&16785408)===16785408)&&(Ar={stylesheets:null,count:0,unsuspend:Q0},af(t),se=$0(),se!==null)){e.cancelPendingCommit=se(vf.bind(null,e,t,o,a,s,r,f,g,E,P,1,V,G)),vn(e,o,f,!H);return}vf(e,t,o,a,s,r,f,g,E)}function f0(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var s=0;s<a.length;s++){var r=a[s],o=r.getSnapshot;r=r.value;try{if(!Xt(o(),r))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vn(e,t,a,s){t&=~Lo,t&=~In,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var r=t;0<r;){var o=31-Oe(r),f=1<<o;s[o]=-1,r&=~f}a!==0&&Tn(e,a,t)}function Ui(){return(Ze&6)===0?(_r(0),!1):!0}function qo(){if(qe!==null){if($e===0)var e=qe.return;else e=qe,Aa=Vn=null,no(e),ys=null,vr=0,e=qe;for(;e!==null;)Gd(e.alternate,e),e=e.return;qe=null}}function Es(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,k0(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),qo(),at=e,qe=a=ka(e.current,null),Fe=t,$e=0,$t=null,mn=!1,Ss=pa(e,t),Ro=!1,Cs=ra=Lo=In=hn=ct=0,Ft=Cr=null,zo=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var r=31-Oe(s),o=1<<r;t|=e[r],s&=~o}return qa=t,ii(),a}function df(e,t){Be=null,N.H=Ci,t===or||t===gi?(t=_u(),$e=3):t===Su?(t=_u(),$e=4):$e=t===Ed?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,$t=t,qe===null&&(ct=1,ki(e,ea(t,e.current)))}function ff(){var e=N.H;return N.H=Ci,e===null?Ci:e}function mf(){var e=N.A;return N.A=u0,e}function Go(){ct=4,mn||(Fe&4194048)!==Fe&&sa.current!==null||(Ss=!0),(hn&134217727)===0&&(In&134217727)===0||at===null||vn(at,Fe,ra,!1)}function Yo(e,t,a){var s=Ze;Ze|=2;var r=ff(),o=mf();(at!==e||Fe!==t)&&(Bi=null,Es(e,t)),t=!1;var f=ct;e:do try{if($e!==0&&qe!==null){var g=qe,E=$t;switch($e){case 8:qo(),f=6;break e;case 3:case 2:case 9:case 6:sa.current===null&&(t=!0);var H=$e;if($e=0,$t=null,Os(e,g,E,H),a&&Ss){f=0;break e}break;default:H=$e,$e=0,$t=null,Os(e,g,E,H)}}m0(),f=ct;break}catch(P){df(e,P)}while(!0);return t&&e.shellSuspendCounter++,Aa=Vn=null,Ze=s,N.H=r,N.A=o,qe===null&&(at=null,Fe=0,ii()),f}function m0(){for(;qe!==null;)hf(qe)}function h0(e,t){var a=Ze;Ze|=2;var s=ff(),r=mf();at!==e||Fe!==t?(Bi=null,zi=tt()+500,Es(e,t)):Ss=pa(e,t);e:do try{if($e!==0&&qe!==null){t=qe;var o=$t;t:switch($e){case 1:$e=0,$t=null,Os(e,t,o,1);break;case 2:case 9:if(Cu(o)){$e=0,$t=null,gf(t);break}t=function(){$e!==2&&$e!==9||at!==e||($e=7),Ca(e)},o.then(t,t);break e;case 3:$e=7;break e;case 4:$e=5;break e;case 7:Cu(o)?($e=0,$t=null,gf(t)):($e=0,$t=null,Os(e,t,o,7));break;case 5:var f=null;switch(qe.tag){case 26:f=qe.memoizedState;case 5:case 27:var g=qe;if(!f||Wf(f)){$e=0,$t=null;var E=g.sibling;if(E!==null)qe=E;else{var H=g.return;H!==null?(qe=H,Hi(H)):qe=null}break t}}$e=0,$t=null,Os(e,t,o,5);break;case 6:$e=0,$t=null,Os(e,t,o,6);break;case 8:qo(),ct=6;break e;default:throw Error(u(462))}}g0();break}catch(P){df(e,P)}while(!0);return Aa=Vn=null,N.H=s,N.A=r,Ze=a,qe!==null?0:(at=null,Fe=0,ii(),ct)}function g0(){for(;qe!==null&&!nt();)hf(qe)}function hf(e){var t=Vd(e.alternate,e,qa);e.memoizedProps=e.pendingProps,t===null?Hi(e):qe=t}function gf(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Rd(a,t,t.pendingProps,t.type,void 0,Fe);break;case 11:t=Rd(a,t,t.pendingProps,t.type.render,t.ref,Fe);break;case 5:no(t);default:Gd(a,t),t=qe=gu(t,qa),t=Vd(a,t,qa)}e.memoizedProps=e.pendingProps,t===null?Hi(e):qe=t}function Os(e,t,a,s){Aa=Vn=null,no(t),ys=null,vr=0;var r=t.return;try{if(s0(e,r,t,a,Fe)){ct=1,ki(e,ea(a,e.current)),qe=null;return}}catch(o){if(r!==null)throw qe=r,o;ct=1,ki(e,ea(a,e.current)),qe=null;return}t.flags&32768?(Qe||s===1?e=!0:Ss||(Fe&536870912)!==0?e=!1:(mn=e=!0,(s===2||s===9||s===3||s===6)&&(s=sa.current,s!==null&&s.tag===13&&(s.flags|=16384))),pf(t,e)):Hi(t)}function Hi(e){var t=e;do{if((t.flags&32768)!==0){pf(t,mn);return}e=t.return;var a=i0(t.alternate,t,qa);if(a!==null){qe=a;return}if(t=t.sibling,t!==null){qe=t;return}qe=t=e}while(t!==null);ct===0&&(ct=5)}function pf(e,t){do{var a=l0(e.alternate,e);if(a!==null){a.flags&=32767,qe=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){qe=e;return}qe=e=a}while(e!==null);ct=6,qe=null}function vf(e,t,a,s,r,o,f,g,E){e.cancelPendingCommit=null;do Vi();while(Mt!==0);if((Ze&6)!==0)throw Error(u(327));if(t!==null){if(t===e.current)throw Error(u(177));if(o=t.lanes|t.childLanes,o|=Ml,Kn(e,a,o,f,g,E),e===at&&(qe=at=null,Fe=0),Ts=t,pn=e,_s=a,Uo=o,Ho=r,lf=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,b0(bt,function(){return wf(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=N.T,N.T=null,r=A.p,A.p=2,f=Ze,Ze|=4;try{o0(e,t,a)}finally{Ze=f,A.p=r,N.T=s}}Mt=1,xf(),bf(),yf()}}function xf(){if(Mt===1){Mt=0;var e=pn,t=Ts,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=N.T,N.T=null;var s=A.p;A.p=2;var r=Ze;Ze|=4;try{Jd(t,e);var o=tc,f=ru(e.containerInfo),g=o.focusedElem,E=o.selectionRange;if(f!==g&&g&&g.ownerDocument&&su(g.ownerDocument.documentElement,g)){if(E!==null&&_l(g)){var H=E.start,P=E.end;if(P===void 0&&(P=H),"selectionStart"in g)g.selectionStart=H,g.selectionEnd=Math.min(P,g.value.length);else{var se=g.ownerDocument||document,V=se&&se.defaultView||window;if(V.getSelection){var G=V.getSelection(),De=g.textContent.length,Te=Math.min(E.start,De),Pe=E.end===void 0?Te:Math.min(E.end,De);!G.extend&&Te>Pe&&(f=Pe,Pe=Te,Te=f);var R=nu(g,Te),D=nu(g,Pe);if(R&&D&&(G.rangeCount!==1||G.anchorNode!==R.node||G.anchorOffset!==R.offset||G.focusNode!==D.node||G.focusOffset!==D.offset)){var U=se.createRange();U.setStart(R.node,R.offset),G.removeAllRanges(),Te>Pe?(G.addRange(U),G.extend(D.node,D.offset)):(U.setEnd(D.node,D.offset),G.addRange(U))}}}}for(se=[],G=g;G=G.parentNode;)G.nodeType===1&&se.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<se.length;g++){var te=se[g];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}Pi=!!ec,tc=ec=null}finally{Ze=r,A.p=s,N.T=a}}e.current=t,Mt=2}}function bf(){if(Mt===2){Mt=0;var e=pn,t=Ts,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=N.T,N.T=null;var s=A.p;A.p=2;var r=Ze;Ze|=4;try{$d(e,t.alternate,t)}finally{Ze=r,A.p=s,N.T=a}}Mt=3}}function yf(){if(Mt===4||Mt===3){Mt=0,et();var e=pn,t=Ts,a=_s,s=lf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Mt=5:(Mt=0,Ts=pn=null,jf(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(gn=null),Ia(a),t=t.stateNode,Ee&&typeof Ee.onCommitFiberRoot=="function")try{Ee.onCommitFiberRoot(Me,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=N.T,r=A.p,A.p=2,N.T=null;try{for(var o=e.onRecoverableError,f=0;f<s.length;f++){var g=s[f];o(g.value,{componentStack:g.stack})}}finally{N.T=t,A.p=r}}(_s&3)!==0&&Vi(),Ca(e),r=e.pendingLanes,(a&4194090)!==0&&(r&42)!==0?e===Vo?Tr++:(Tr=0,Vo=e):Tr=0,_r(0)}}function jf(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ir(t)))}function Vi(e){return xf(),bf(),yf(),wf()}function wf(){if(Mt!==5)return!1;var e=pn,t=Uo;Uo=0;var a=Ia(_s),s=N.T,r=A.p;try{A.p=32>a?32:a,N.T=null,a=Ho,Ho=null;var o=pn,f=_s;if(Mt=0,Ts=pn=null,_s=0,(Ze&6)!==0)throw Error(u(331));var g=Ze;if(Ze|=4,sf(o.current),tf(o,o.current,f,a),Ze=g,_r(0,!1),Ee&&typeof Ee.onPostCommitFiberRoot=="function")try{Ee.onPostCommitFiberRoot(Me,o)}catch{}return!0}finally{A.p=r,N.T=s,jf(e,t)}}function Nf(e,t,a){t=ea(a,t),t=xo(e.stateNode,t,2),e=rn(e,t,2),e!==null&&(va(e,2),Ca(e))}function Je(e,t,a){if(e.tag===3)Nf(e,e,a);else for(;t!==null;){if(t.tag===3){Nf(t,e,a);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(gn===null||!gn.has(s))){e=ea(a,e),a=Td(2),s=rn(t,a,2),s!==null&&(_d(a,s,t,e),va(s,2),Ca(s));break}}t=t.return}}function Fo(e,t,a){var s=e.pingCache;if(s===null){s=e.pingCache=new d0;var r=new Set;s.set(t,r)}else r=s.get(t),r===void 0&&(r=new Set,s.set(t,r));r.has(a)||(Ro=!0,r.add(a),e=p0.bind(null,e,t,a),t.then(e,e))}function p0(e,t,a){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,at===e&&(Fe&a)===a&&(ct===4||ct===3&&(Fe&62914560)===Fe&&300>tt()-Bo?(Ze&2)===0&&Es(e,0):Lo|=a,Cs===Fe&&(Cs=0)),Ca(e)}function Sf(e,t){t===0&&(t=Cn()),e=us(e,t),e!==null&&(va(e,t),Ca(e))}function v0(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Sf(e,a)}function x0(e,t){var a=0;switch(e.tag){case 13:var s=e.stateNode,r=e.memoizedState;r!==null&&(a=r.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(u(314))}s!==null&&s.delete(t),Sf(e,a)}function b0(e,t){return Ae(e,t)}var qi=null,ks=null,Xo=!1,Gi=!1,Io=!1,Qn=0;function Ca(e){e!==ks&&e.next===null&&(ks===null?qi=ks=e:ks=ks.next=e),Gi=!0,Xo||(Xo=!0,j0())}function _r(e,t){if(!Io&&Gi){Io=!0;do for(var a=!1,s=qi;s!==null;){if(e!==0){var r=s.pendingLanes;if(r===0)var o=0;else{var f=s.suspendedLanes,g=s.pingedLanes;o=(1<<31-Oe(42|e)+1)-1,o&=r&~(f&~g),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(a=!0,Ef(s,o))}else o=Fe,o=Ht(s,s===at?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(o&3)===0||pa(s,o)||(a=!0,Ef(s,o));s=s.next}while(a);Io=!1}}function y0(){Cf()}function Cf(){Gi=Xo=!1;var e=0;Qn!==0&&(O0()&&(e=Qn),Qn=0);for(var t=tt(),a=null,s=qi;s!==null;){var r=s.next,o=Tf(s,t);o===0?(s.next=null,a===null?qi=r:a.next=r,r===null&&(ks=a)):(a=s,(e!==0||(o&3)!==0)&&(Gi=!0)),s=r}_r(e)}function Tf(e,t){for(var a=e.suspendedLanes,s=e.pingedLanes,r=e.expirationTimes,o=e.pendingLanes&-62914561;0<o;){var f=31-Oe(o),g=1<<f,E=r[f];E===-1?((g&a)===0||(g&s)!==0)&&(r[f]=Wn(g,t)):E<=t&&(e.expiredLanes|=g),o&=~g}if(t=at,a=Fe,a=Ht(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,a===0||e===t&&($e===2||$e===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&rt(s),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||pa(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(s!==null&&rt(s),Ia(a)){case 2:case 8:a=Et;break;case 32:a=bt;break;case 268435456:a=ut;break;default:a=bt}return s=_f.bind(null,e),a=Ae(a,s),e.callbackPriority=t,e.callbackNode=a,t}return s!==null&&s!==null&&rt(s),e.callbackPriority=2,e.callbackNode=null,2}function _f(e,t){if(Mt!==0&&Mt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Vi()&&e.callbackNode!==a)return null;var s=Fe;return s=Ht(e,e===at?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(cf(e,s,t),Tf(e,tt()),e.callbackNode!=null&&e.callbackNode===a?_f.bind(null,e):null)}function Ef(e,t){if(Vi())return null;cf(e,t,!0)}function j0(){D0(function(){(Ze&6)!==0?Ae(Bt,y0):Cf()})}function Qo(){return Qn===0&&(Qn=Ya()),Qn}function Of(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ns(""+e)}function kf(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function w0(e,t,a,s,r){if(t==="submit"&&a&&a.stateNode===r){var o=Of((r[ue]||null).action),f=s.submitter;f&&(t=(t=f[ue]||null)?Of(t.formAction):f.getAttribute("formAction"),t!==null&&(o=t,f=null));var g=new Oa("action","action",null,s,r);e.push({event:g,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Qn!==0){var E=f?kf(r,f):new FormData(r);mo(a,{pending:!0,data:E,method:r.method,action:o},null,E)}}else typeof o=="function"&&(g.preventDefault(),E=f?kf(r,f):new FormData(r),mo(a,{pending:!0,data:E,method:r.method,action:o},o,E))},currentTarget:r}]})}}for(var Zo=0;Zo<Dl.length;Zo++){var $o=Dl[Zo],N0=$o.toLowerCase(),S0=$o[0].toUpperCase()+$o.slice(1);fa(N0,"on"+S0)}fa(ou,"onAnimationEnd"),fa(cu,"onAnimationIteration"),fa(uu,"onAnimationStart"),fa("dblclick","onDoubleClick"),fa("focusin","onFocus"),fa("focusout","onBlur"),fa(qh,"onTransitionRun"),fa(Gh,"onTransitionStart"),fa(Yh,"onTransitionCancel"),fa(du,"onTransitionEnd"),Ea("onMouseEnter",["mouseout","mouseover"]),Ea("onMouseLeave",["mouseout","mouseover"]),Ea("onPointerEnter",["pointerout","pointerover"]),Ea("onPointerLeave",["pointerout","pointerover"]),_a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_a("onBeforeInput",["compositionend","keypress","textInput","paste"]),_a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Er="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Er));function Df(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var s=e[a],r=s.event;s=s.listeners;e:{var o=void 0;if(t)for(var f=s.length-1;0<=f;f--){var g=s[f],E=g.instance,H=g.currentTarget;if(g=g.listener,E!==o&&r.isPropagationStopped())break e;o=g,r.currentTarget=H;try{o(r)}catch(P){Oi(P)}r.currentTarget=null,o=E}else for(f=0;f<s.length;f++){if(g=s[f],E=g.instance,H=g.currentTarget,g=g.listener,E!==o&&r.isPropagationStopped())break e;o=g,r.currentTarget=H;try{o(r)}catch(P){Oi(P)}r.currentTarget=null,o=E}}}}function Ge(e,t){var a=t[kt];a===void 0&&(a=t[kt]=new Set);var s=e+"__bubble";a.has(s)||(Mf(t,e,2,!1),a.add(s))}function Wo(e,t,a){var s=0;t&&(s|=4),Mf(a,e,s,t)}var Yi="_reactListening"+Math.random().toString(36).slice(2);function Ko(e){if(!e[Yi]){e[Yi]=!0,Us.forEach(function(a){a!=="selectionchange"&&(C0.has(a)||Wo(a,!1,e),Wo(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Yi]||(t[Yi]=!0,Wo("selectionchange",!1,t))}}function Mf(e,t,a,s){switch(am(t)){case 2:var r=P0;break;case 8:r=J0;break;default:r=dc}a=r.bind(null,t,a,e),r=void 0,!Ws||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),s?r!==void 0?e.addEventListener(t,a,{capture:!0,passive:r}):e.addEventListener(t,a,!0):r!==void 0?e.addEventListener(t,a,{passive:r}):e.addEventListener(t,a,!1)}function Po(e,t,a,s,r){var o=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var f=s.tag;if(f===3||f===4){var g=s.stateNode.containerInfo;if(g===r)break;if(f===4)for(f=s.return;f!==null;){var E=f.tag;if((E===3||E===4)&&f.stateNode.containerInfo===r)return;f=f.return}for(;g!==null;){if(f=ba(g),f===null)return;if(E=f.tag,E===5||E===6||E===26||E===27){s=o=f;continue e}g=g.parentNode}}s=s.return}si(function(){var H=o,P=Zs(a),se=[];e:{var V=fu.get(e);if(V!==void 0){var G=Oa,De=e;switch(e){case"keypress":if(W(a)===0)break e;case"keydown":case"keyup":G=bh;break;case"focusin":De="focus",G=wl;break;case"focusout":De="blur",G=wl;break;case"beforeblur":case"afterblur":G=wl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=qc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=lh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=wh;break;case ou:case cu:case uu:G=uh;break;case du:G=Sh;break;case"scroll":case"scrollend":G=jl;break;case"wheel":G=Th;break;case"copy":case"cut":case"paste":G=fh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=Yc;break;case"toggle":case"beforetoggle":G=Eh}var Te=(t&4)!==0,Pe=!Te&&(e==="scroll"||e==="scrollend"),R=Te?V!==null?V+"Capture":null:V;Te=[];for(var D=H,U;D!==null;){var te=D;if(U=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||U===null||R===null||(te=kn(D,R),te!=null&&Te.push(Or(D,te,U))),Pe)break;D=D.return}0<Te.length&&(V=new G(V,De,null,a,P),se.push({event:V,listeners:Te}))}}if((t&7)===0){e:{if(V=e==="mouseover"||e==="pointerover",G=e==="mouseout"||e==="pointerout",V&&a!==Qs&&(De=a.relatedTarget||a.fromElement)&&(ba(De)||De[be]))break e;if((G||V)&&(V=P.window===P?P:(V=P.ownerDocument)?V.defaultView||V.parentWindow:window,G?(De=a.relatedTarget||a.toElement,G=H,De=De?ba(De):null,De!==null&&(Pe=m(De),Te=De.tag,De!==Pe||Te!==5&&Te!==27&&Te!==6)&&(De=null)):(G=null,De=H),G!==De)){if(Te=qc,te="onMouseLeave",R="onMouseEnter",D="mouse",(e==="pointerout"||e==="pointerover")&&(Te=Yc,te="onPointerLeave",R="onPointerEnter",D="pointer"),Pe=G==null?V:On(G),U=De==null?V:On(De),V=new Te(te,D+"leave",G,a,P),V.target=Pe,V.relatedTarget=U,te=null,ba(P)===H&&(Te=new Te(R,D+"enter",De,a,P),Te.target=U,Te.relatedTarget=Pe,te=Te),Pe=te,G&&De)t:{for(Te=G,R=De,D=0,U=Te;U;U=Ds(U))D++;for(U=0,te=R;te;te=Ds(te))U++;for(;0<D-U;)Te=Ds(Te),D--;for(;0<U-D;)R=Ds(R),U--;for(;D--;){if(Te===R||R!==null&&Te===R.alternate)break t;Te=Ds(Te),R=Ds(R)}Te=null}else Te=null;G!==null&&Af(se,V,G,Te,!1),De!==null&&Pe!==null&&Af(se,Pe,De,Te,!0)}}e:{if(V=H?On(H):window,G=V.nodeName&&V.nodeName.toLowerCase(),G==="select"||G==="input"&&V.type==="file")var ye=Kc;else if($c(V))if(Pc)ye=Uh;else{ye=zh;var He=Lh}else G=V.nodeName,!G||G.toLowerCase()!=="input"||V.type!=="checkbox"&&V.type!=="radio"?H&&Is(H.elementType)&&(ye=Kc):ye=Bh;if(ye&&(ye=ye(e,H))){Wc(se,ye,a,P);break e}He&&He(e,V,H),e==="focusout"&&H&&V.type==="number"&&H.memoizedProps.value!=null&&Xs(V,"number",V.value)}switch(He=H?On(H):window,e){case"focusin":($c(He)||He.contentEditable==="true")&&(ls=He,El=H,tr=null);break;case"focusout":tr=El=ls=null;break;case"mousedown":Ol=!0;break;case"contextmenu":case"mouseup":case"dragend":Ol=!1,iu(se,a,P);break;case"selectionchange":if(Vh)break;case"keydown":case"keyup":iu(se,a,P)}var Se;if(Sl)e:{switch(e){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else is?Qc(e,a)&&(ke="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(ke="onCompositionStart");ke&&(Fc&&a.locale!=="ko"&&(is||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&is&&(Se=O()):(ya=P,B="value"in ya?ya.value:ya.textContent,is=!0)),He=Fi(H,ke),0<He.length&&(ke=new Gc(ke,e,null,a,P),se.push({event:ke,listeners:He}),Se?ke.data=Se:(Se=Zc(a),Se!==null&&(ke.data=Se)))),(Se=kh?Dh(e,a):Mh(e,a))&&(ke=Fi(H,"onBeforeInput"),0<ke.length&&(He=new Gc("onBeforeInput","beforeinput",null,a,P),se.push({event:He,listeners:ke}),He.data=Se)),w0(se,e,H,a,P)}Df(se,t)})}function Or(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Fi(e,t){for(var a=t+"Capture",s=[];e!==null;){var r=e,o=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||o===null||(r=kn(e,a),r!=null&&s.unshift(Or(e,r,o)),r=kn(e,t),r!=null&&s.push(Or(e,r,o))),e.tag===3)return s;e=e.return}return[]}function Ds(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Af(e,t,a,s,r){for(var o=t._reactName,f=[];a!==null&&a!==s;){var g=a,E=g.alternate,H=g.stateNode;if(g=g.tag,E!==null&&E===s)break;g!==5&&g!==26&&g!==27||H===null||(E=H,r?(H=kn(a,o),H!=null&&f.unshift(Or(a,H,E))):r||(H=kn(a,o),H!=null&&f.push(Or(a,H,E)))),a=a.return}f.length!==0&&e.push({event:t,listeners:f})}var T0=/\r\n?/g,_0=/\u0000|\uFFFD/g;function Rf(e){return(typeof e=="string"?e:""+e).replace(T0,`
`).replace(_0,"")}function Lf(e,t){return t=Rf(t),Rf(e)===t}function Xi(){}function Ke(e,t,a,s,r,o){switch(a){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||Ka(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&Ka(e,""+s);break;case"className":es(e,"class",s);break;case"tabIndex":es(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":es(e,a,s);break;case"style":ai(e,s,o);break;case"data":if(t!=="object"){es(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=ns(""+s),e.setAttribute(a,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(a==="formAction"?(t!=="input"&&Ke(e,t,"name",r.name,r,null),Ke(e,t,"formEncType",r.formEncType,r,null),Ke(e,t,"formMethod",r.formMethod,r,null),Ke(e,t,"formTarget",r.formTarget,r,null)):(Ke(e,t,"encType",r.encType,r,null),Ke(e,t,"method",r.method,r,null),Ke(e,t,"target",r.target,r,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=ns(""+s),e.setAttribute(a,s);break;case"onClick":s!=null&&(e.onclick=Xi);break;case"onScroll":s!=null&&Ge("scroll",e);break;case"onScrollEnd":s!=null&&Ge("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(u(61));if(a=s.__html,a!=null){if(r.children!=null)throw Error(u(60));e.innerHTML=a}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}a=ns(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""+s):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":s===!0?e.setAttribute(a,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,s):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(a,s):e.removeAttribute(a);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(a):e.setAttribute(a,s);break;case"popover":Ge("beforetoggle",e),Ge("toggle",e),Jn(e,"popover",s);break;case"xlinkActuate":Jt(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Jt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Jt(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Jt(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Jt(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Jt(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Jt(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Jt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Jt(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Jn(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=bl.get(a)||a,Jn(e,a,s))}}function Jo(e,t,a,s,r,o){switch(a){case"style":ai(e,s,o);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(u(61));if(a=s.__html,a!=null){if(r.children!=null)throw Error(u(60));e.innerHTML=a}}break;case"children":typeof s=="string"?Ka(e,s):(typeof s=="number"||typeof s=="bigint")&&Ka(e,""+s);break;case"onScroll":s!=null&&Ge("scroll",e);break;case"onScrollEnd":s!=null&&Ge("scrollend",e);break;case"onClick":s!=null&&(e.onclick=Xi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hs.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(r=a.endsWith("Capture"),t=a.slice(2,r?a.length-7:void 0),o=e[ue]||null,o=o!=null?o[a]:null,typeof o=="function"&&e.removeEventListener(t,o,r),typeof s=="function")){typeof o!="function"&&o!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,s,r);break e}a in e?e[a]=s:s===!0?e.setAttribute(a,""):Jn(e,a,s)}}}function At(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ge("error",e),Ge("load",e);var s=!1,r=!1,o;for(o in a)if(a.hasOwnProperty(o)){var f=a[o];if(f!=null)switch(o){case"src":s=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:Ke(e,t,o,f,a,null)}}r&&Ke(e,t,"srcSet",a.srcSet,a,null),s&&Ke(e,t,"src",a.src,a,null);return;case"input":Ge("invalid",e);var g=o=f=r=null,E=null,H=null;for(s in a)if(a.hasOwnProperty(s)){var P=a[s];if(P!=null)switch(s){case"name":r=P;break;case"type":f=P;break;case"checked":E=P;break;case"defaultChecked":H=P;break;case"value":o=P;break;case"defaultValue":g=P;break;case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(u(137,t));break;default:Ke(e,t,s,P,a,null)}}Pr(e,o,g,E,H,f,r,!1),ts(e);return;case"select":Ge("invalid",e),s=f=o=null;for(r in a)if(a.hasOwnProperty(r)&&(g=a[r],g!=null))switch(r){case"value":o=g;break;case"defaultValue":f=g;break;case"multiple":s=g;default:Ke(e,t,r,g,a,null)}t=o,a=f,e.multiple=!!s,t!=null?Wa(e,!!s,t,!1):a!=null&&Wa(e,!!s,a,!0);return;case"textarea":Ge("invalid",e),o=r=s=null;for(f in a)if(a.hasOwnProperty(f)&&(g=a[f],g!=null))switch(f){case"value":s=g;break;case"defaultValue":r=g;break;case"children":o=g;break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(u(91));break;default:Ke(e,t,f,g,a,null)}ei(e,s,r,o),ts(e);return;case"option":for(E in a)if(a.hasOwnProperty(E)&&(s=a[E],s!=null))switch(E){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Ke(e,t,E,s,a,null)}return;case"dialog":Ge("beforetoggle",e),Ge("toggle",e),Ge("cancel",e),Ge("close",e);break;case"iframe":case"object":Ge("load",e);break;case"video":case"audio":for(s=0;s<Er.length;s++)Ge(Er[s],e);break;case"image":Ge("error",e),Ge("load",e);break;case"details":Ge("toggle",e);break;case"embed":case"source":case"link":Ge("error",e),Ge("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in a)if(a.hasOwnProperty(H)&&(s=a[H],s!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:Ke(e,t,H,s,a,null)}return;default:if(Is(t)){for(P in a)a.hasOwnProperty(P)&&(s=a[P],s!==void 0&&Jo(e,t,P,s,a,void 0));return}}for(g in a)a.hasOwnProperty(g)&&(s=a[g],s!=null&&Ke(e,t,g,s,a,null))}function E0(e,t,a,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,o=null,f=null,g=null,E=null,H=null,P=null;for(G in a){var se=a[G];if(a.hasOwnProperty(G)&&se!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":E=se;default:s.hasOwnProperty(G)||Ke(e,t,G,null,s,se)}}for(var V in s){var G=s[V];if(se=a[V],s.hasOwnProperty(V)&&(G!=null||se!=null))switch(V){case"type":o=G;break;case"name":r=G;break;case"checked":H=G;break;case"defaultChecked":P=G;break;case"value":f=G;break;case"defaultValue":g=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(u(137,t));break;default:G!==se&&Ke(e,t,V,G,s,se)}}Fs(e,f,g,E,H,P,o,r);return;case"select":G=f=g=V=null;for(o in a)if(E=a[o],a.hasOwnProperty(o)&&E!=null)switch(o){case"value":break;case"multiple":G=E;default:s.hasOwnProperty(o)||Ke(e,t,o,null,s,E)}for(r in s)if(o=s[r],E=a[r],s.hasOwnProperty(r)&&(o!=null||E!=null))switch(r){case"value":V=o;break;case"defaultValue":g=o;break;case"multiple":f=o;default:o!==E&&Ke(e,t,r,o,s,E)}t=g,a=f,s=G,V!=null?Wa(e,!!a,V,!1):!!s!=!!a&&(t!=null?Wa(e,!!a,t,!0):Wa(e,!!a,a?[]:"",!1));return;case"textarea":G=V=null;for(g in a)if(r=a[g],a.hasOwnProperty(g)&&r!=null&&!s.hasOwnProperty(g))switch(g){case"value":break;case"children":break;default:Ke(e,t,g,null,s,r)}for(f in s)if(r=s[f],o=a[f],s.hasOwnProperty(f)&&(r!=null||o!=null))switch(f){case"value":V=r;break;case"defaultValue":G=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(u(91));break;default:r!==o&&Ke(e,t,f,r,s,o)}Jr(e,V,G);return;case"option":for(var De in a)if(V=a[De],a.hasOwnProperty(De)&&V!=null&&!s.hasOwnProperty(De))switch(De){case"selected":e.selected=!1;break;default:Ke(e,t,De,null,s,V)}for(E in s)if(V=s[E],G=a[E],s.hasOwnProperty(E)&&V!==G&&(V!=null||G!=null))switch(E){case"selected":e.selected=V&&typeof V!="function"&&typeof V!="symbol";break;default:Ke(e,t,E,V,s,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in a)V=a[Te],a.hasOwnProperty(Te)&&V!=null&&!s.hasOwnProperty(Te)&&Ke(e,t,Te,null,s,V);for(H in s)if(V=s[H],G=a[H],s.hasOwnProperty(H)&&V!==G&&(V!=null||G!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(u(137,t));break;default:Ke(e,t,H,V,s,G)}return;default:if(Is(t)){for(var Pe in a)V=a[Pe],a.hasOwnProperty(Pe)&&V!==void 0&&!s.hasOwnProperty(Pe)&&Jo(e,t,Pe,void 0,s,V);for(P in s)V=s[P],G=a[P],!s.hasOwnProperty(P)||V===G||V===void 0&&G===void 0||Jo(e,t,P,V,s,G);return}}for(var R in a)V=a[R],a.hasOwnProperty(R)&&V!=null&&!s.hasOwnProperty(R)&&Ke(e,t,R,null,s,V);for(se in s)V=s[se],G=a[se],!s.hasOwnProperty(se)||V===G||V==null&&G==null||Ke(e,t,se,V,s,G)}var ec=null,tc=null;function Ii(e){return e.nodeType===9?e:e.ownerDocument}function zf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Bf(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function ac(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var nc=null;function O0(){var e=window.event;return e&&e.type==="popstate"?e===nc?!1:(nc=e,!0):(nc=null,!1)}var Uf=typeof setTimeout=="function"?setTimeout:void 0,k0=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,D0=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(e){return Hf.resolve(null).then(e).catch(M0)}:Uf;function M0(e){setTimeout(function(){throw e})}function xn(e){return e==="head"}function Vf(e,t){var a=t,s=0,r=0;do{var o=a.nextSibling;if(e.removeChild(a),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(0<s&&8>s){a=s;var f=e.ownerDocument;if(a&1&&kr(f.documentElement),a&2&&kr(f.body),a&4)for(a=f.head,kr(a),f=a.firstChild;f;){var g=f.nextSibling,E=f.nodeName;f[ca]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&f.rel.toLowerCase()==="stylesheet"||a.removeChild(f),f=g}}if(r===0){e.removeChild(o),Ur(t);return}r--}else a==="$"||a==="$?"||a==="$!"?r++:s=a.charCodeAt(0)-48;else s=0;a=o}while(a);Ur(t)}function sc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":sc(a),Pt(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function A0(e,t,a,s){for(;e.nodeType===1;){var r=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[ca])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(o=e.getAttribute("rel"),o==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(o!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(o=e.getAttribute("src"),(o!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var o=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===o)return e}else return e;if(e=ha(e.nextSibling),e===null)break}return null}function R0(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=ha(e.nextSibling),e===null))return null;return e}function rc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function L0(e,t){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")t();else{var s=function(){t(),a.removeEventListener("DOMContentLoaded",s)};a.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function ha(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var ic=null;function qf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}function Gf(e,t,a){switch(t=Ii(a),e){case"html":if(e=t.documentElement,!e)throw Error(u(452));return e;case"head":if(e=t.head,!e)throw Error(u(453));return e;case"body":if(e=t.body,!e)throw Error(u(454));return e;default:throw Error(u(451))}}function kr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Pt(e)}var ia=new Map,Yf=new Set;function Qi(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ga=A.d;A.d={f:z0,r:B0,D:U0,C:H0,L:V0,m:q0,X:Y0,S:G0,M:F0};function z0(){var e=Ga.f(),t=Ui();return e||t}function B0(e){var t=Za(e);t!==null&&t.tag===5&&t.type==="form"?od(t):Ga.r(e)}var Ms=typeof document>"u"?null:document;function Ff(e,t,a){var s=Ms;if(s&&typeof t=="string"&&t){var r=qt(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof a=="string"&&(r+='[crossorigin="'+a+'"]'),Yf.has(r)||(Yf.add(r),e={rel:e,crossOrigin:a,href:t},s.querySelector(r)===null&&(t=s.createElement("link"),At(t,"link",e),dt(t),s.head.appendChild(t)))}}function U0(e){Ga.D(e),Ff("dns-prefetch",e,null)}function H0(e,t){Ga.C(e,t),Ff("preconnect",e,t)}function V0(e,t,a){Ga.L(e,t,a);var s=Ms;if(s&&e&&t){var r='link[rel="preload"][as="'+qt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(r+='[imagesrcset="'+qt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(r+='[imagesizes="'+qt(a.imageSizes)+'"]')):r+='[href="'+qt(e)+'"]';var o=r;switch(t){case"style":o=As(e);break;case"script":o=Rs(e)}ia.has(o)||(e=M({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),ia.set(o,e),s.querySelector(r)!==null||t==="style"&&s.querySelector(Dr(o))||t==="script"&&s.querySelector(Mr(o))||(t=s.createElement("link"),At(t,"link",e),dt(t),s.head.appendChild(t)))}}function q0(e,t){Ga.m(e,t);var a=Ms;if(a&&e){var s=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+qt(s)+'"][href="'+qt(e)+'"]',o=r;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Rs(e)}if(!ia.has(o)&&(e=M({rel:"modulepreload",href:e},t),ia.set(o,e),a.querySelector(r)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Mr(o)))return}s=a.createElement("link"),At(s,"link",e),dt(s),a.head.appendChild(s)}}}function G0(e,t,a){Ga.S(e,t,a);var s=Ms;if(s&&e){var r=ua(s).hoistableStyles,o=As(e);t=t||"default";var f=r.get(o);if(!f){var g={loading:0,preload:null};if(f=s.querySelector(Dr(o)))g.loading=5;else{e=M({rel:"stylesheet",href:e,"data-precedence":t},a),(a=ia.get(o))&&lc(e,a);var E=f=s.createElement("link");dt(E),At(E,"link",e),E._p=new Promise(function(H,P){E.onload=H,E.onerror=P}),E.addEventListener("load",function(){g.loading|=1}),E.addEventListener("error",function(){g.loading|=2}),g.loading|=4,Zi(f,t,s)}f={type:"stylesheet",instance:f,count:1,state:g},r.set(o,f)}}}function Y0(e,t){Ga.X(e,t);var a=Ms;if(a&&e){var s=ua(a).hoistableScripts,r=Rs(e),o=s.get(r);o||(o=a.querySelector(Mr(r)),o||(e=M({src:e,async:!0},t),(t=ia.get(r))&&oc(e,t),o=a.createElement("script"),dt(o),At(o,"link",e),a.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},s.set(r,o))}}function F0(e,t){Ga.M(e,t);var a=Ms;if(a&&e){var s=ua(a).hoistableScripts,r=Rs(e),o=s.get(r);o||(o=a.querySelector(Mr(r)),o||(e=M({src:e,async:!0,type:"module"},t),(t=ia.get(r))&&oc(e,t),o=a.createElement("script"),dt(o),At(o,"link",e),a.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},s.set(r,o))}}function Xf(e,t,a,s){var r=(r=he.current)?Qi(r):null;if(!r)throw Error(u(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=As(a.href),a=ua(r).hoistableStyles,s=a.get(t),s||(s={type:"style",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=As(a.href);var o=ua(r).hoistableStyles,f=o.get(e);if(f||(r=r.ownerDocument||r,f={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(e,f),(o=r.querySelector(Dr(e)))&&!o._p&&(f.instance=o,f.state.loading=5),ia.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ia.set(e,a),o||X0(r,e,a,f.state))),t&&s===null)throw Error(u(528,""));return f}if(t&&s!==null)throw Error(u(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Rs(a),a=ua(r).hoistableScripts,s=a.get(t),s||(s={type:"script",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(u(444,e))}}function As(e){return'href="'+qt(e)+'"'}function Dr(e){return'link[rel="stylesheet"]['+e+"]"}function If(e){return M({},e,{"data-precedence":e.precedence,precedence:null})}function X0(e,t,a,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),At(t,"link",a),dt(t),e.head.appendChild(t))}function Rs(e){return'[src="'+qt(e)+'"]'}function Mr(e){return"script[async]"+e}function Qf(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+qt(a.href)+'"]');if(s)return t.instance=s,dt(s),s;var r=M({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),dt(s),At(s,"style",r),Zi(s,a.precedence,e),t.instance=s;case"stylesheet":r=As(a.href);var o=e.querySelector(Dr(r));if(o)return t.state.loading|=4,t.instance=o,dt(o),o;s=If(a),(r=ia.get(r))&&lc(s,r),o=(e.ownerDocument||e).createElement("link"),dt(o);var f=o;return f._p=new Promise(function(g,E){f.onload=g,f.onerror=E}),At(o,"link",s),t.state.loading|=4,Zi(o,a.precedence,e),t.instance=o;case"script":return o=Rs(a.src),(r=e.querySelector(Mr(o)))?(t.instance=r,dt(r),r):(s=a,(r=ia.get(o))&&(s=M({},a),oc(s,r)),e=e.ownerDocument||e,r=e.createElement("script"),dt(r),At(r,"link",s),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(u(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,Zi(s,a.precedence,e));return t.instance}function Zi(e,t,a){for(var s=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=s.length?s[s.length-1]:null,o=r,f=0;f<s.length;f++){var g=s[f];if(g.dataset.precedence===t)o=g;else if(o!==r)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function lc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function oc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var $i=null;function Zf(e,t,a){if($i===null){var s=new Map,r=$i=new Map;r.set(a,s)}else r=$i,s=r.get(a),s||(s=new Map,r.set(a,s));if(s.has(e))return s;for(s.set(e,null),a=a.getElementsByTagName(e),r=0;r<a.length;r++){var o=a[r];if(!(o[ca]||o[F]||e==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var f=o.getAttribute(t)||"";f=e+f;var g=s.get(f);g?g.push(o):s.set(f,[o])}}return s}function $f(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function I0(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Wf(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Ar=null;function Q0(){}function Z0(e,t,a){if(Ar===null)throw Error(u(475));var s=Ar;if(t.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var r=As(a.href),o=e.querySelector(Dr(r));if(o){e=o._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(s.count++,s=Wi.bind(s),e.then(s,s)),t.state.loading|=4,t.instance=o,dt(o);return}o=e.ownerDocument||e,a=If(a),(r=ia.get(r))&&lc(a,r),o=o.createElement("link"),dt(o);var f=o;f._p=new Promise(function(g,E){f.onload=g,f.onerror=E}),At(o,"link",a),t.instance=o}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(s.count++,t=Wi.bind(s),e.addEventListener("load",t),e.addEventListener("error",t))}}function $0(){if(Ar===null)throw Error(u(475));var e=Ar;return e.stylesheets&&e.count===0&&cc(e,e.stylesheets),0<e.count?function(t){var a=setTimeout(function(){if(e.stylesheets&&cc(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(a)}}:null}function Wi(){if(this.count--,this.count===0){if(this.stylesheets)cc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ki=null;function cc(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ki=new Map,t.forEach(W0,e),Ki=null,Wi.call(e))}function W0(e,t){if(!(t.state.loading&4)){var a=Ki.get(e);if(a)var s=a.get(null);else{a=new Map,Ki.set(e,a);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<r.length;o++){var f=r[o];(f.nodeName==="LINK"||f.getAttribute("media")!=="not all")&&(a.set(f.dataset.precedence,f),s=f)}s&&a.set(null,s)}r=t.instance,f=r.getAttribute("data-precedence"),o=a.get(f)||s,o===s&&a.set(null,r),a.set(f,r),this.count++,s=Wi.bind(this),r.addEventListener("load",s),r.addEventListener("error",s),o?o.parentNode.insertBefore(r,o.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var Rr={$$typeof:z,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function K0(e,t,a,s,r,o,f,g){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fa(0),this.hiddenUpdates=Fa(null),this.identifierPrefix=s,this.onUncaughtError=r,this.onCaughtError=o,this.onRecoverableError=f,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=g,this.incompleteTransitions=new Map}function Kf(e,t,a,s,r,o,f,g,E,H,P,se){return e=new K0(e,t,a,f,g,E,H,se),t=1,o===!0&&(t|=24),o=It(3,null,null,t),e.current=o,o.stateNode=e,t=Yl(),t.refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:s,isDehydrated:a,cache:t},Ql(o),e}function Pf(e){return e?(e=ds,e):ds}function Jf(e,t,a,s,r,o){r=Pf(r),s.context===null?s.context=r:s.pendingContext=r,s=sn(t),s.payload={element:a},o=o===void 0?null:o,o!==null&&(s.callback=o),a=rn(e,s,t),a!==null&&(Kt(a,e,t),ur(a,e,t))}function em(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function uc(e,t){em(e,t),(e=e.alternate)&&em(e,t)}function tm(e){if(e.tag===13){var t=us(e,67108864);t!==null&&Kt(t,e,67108864),uc(e,67108864)}}var Pi=!0;function P0(e,t,a,s){var r=N.T;N.T=null;var o=A.p;try{A.p=2,dc(e,t,a,s)}finally{A.p=o,N.T=r}}function J0(e,t,a,s){var r=N.T;N.T=null;var o=A.p;try{A.p=8,dc(e,t,a,s)}finally{A.p=o,N.T=r}}function dc(e,t,a,s){if(Pi){var r=fc(s);if(r===null)Po(e,t,s,Ji,a),nm(e,s);else if(tg(r,e,t,a,s))s.stopPropagation();else if(nm(e,s),t&4&&-1<eg.indexOf(e)){for(;r!==null;){var o=Za(r);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var f=Rt(o.pendingLanes);if(f!==0){var g=o;for(g.pendingLanes|=2,g.entangledLanes|=2;f;){var E=1<<31-Oe(f);g.entanglements[1]|=E,f&=~E}Ca(o),(Ze&6)===0&&(zi=tt()+500,_r(0))}}break;case 13:g=us(o,2),g!==null&&Kt(g,o,2),Ui(),uc(o,2)}if(o=fc(s),o===null&&Po(e,t,s,Ji,a),o===r)break;r=o}r!==null&&s.stopPropagation()}else Po(e,t,s,null,a)}}function fc(e){return e=Zs(e),mc(e)}var Ji=null;function mc(e){if(Ji=null,e=ba(e),e!==null){var t=m(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=w(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ji=e,null}function am(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Xe()){case Bt:return 2;case Et:return 8;case bt:case ga:return 32;case ut:return 268435456;default:return 32}default:return 32}}var hc=!1,bn=null,yn=null,jn=null,Lr=new Map,zr=new Map,wn=[],eg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function nm(e,t){switch(e){case"focusin":case"focusout":bn=null;break;case"dragenter":case"dragleave":yn=null;break;case"mouseover":case"mouseout":jn=null;break;case"pointerover":case"pointerout":Lr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zr.delete(t.pointerId)}}function Br(e,t,a,s,r,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:a,eventSystemFlags:s,nativeEvent:o,targetContainers:[r]},t!==null&&(t=Za(t),t!==null&&tm(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function tg(e,t,a,s,r){switch(t){case"focusin":return bn=Br(bn,e,t,a,s,r),!0;case"dragenter":return yn=Br(yn,e,t,a,s,r),!0;case"mouseover":return jn=Br(jn,e,t,a,s,r),!0;case"pointerover":var o=r.pointerId;return Lr.set(o,Br(Lr.get(o)||null,e,t,a,s,r)),!0;case"gotpointercapture":return o=r.pointerId,zr.set(o,Br(zr.get(o)||null,e,t,a,s,r)),!0}return!1}function sm(e){var t=ba(e.target);if(t!==null){var a=m(t);if(a!==null){if(t=a.tag,t===13){if(t=w(a),t!==null){e.blockedOn=t,Pn(e.priority,function(){if(a.tag===13){var s=Wt();s=Xa(s);var r=us(a,s);r!==null&&Kt(r,a,s),uc(a,s)}});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function el(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=fc(e.nativeEvent);if(a===null){a=e.nativeEvent;var s=new a.constructor(a.type,a);Qs=s,a.target.dispatchEvent(s),Qs=null}else return t=Za(a),t!==null&&tm(t),e.blockedOn=a,!1;t.shift()}return!0}function rm(e,t,a){el(e)&&a.delete(t)}function ag(){hc=!1,bn!==null&&el(bn)&&(bn=null),yn!==null&&el(yn)&&(yn=null),jn!==null&&el(jn)&&(jn=null),Lr.forEach(rm),zr.forEach(rm)}function tl(e,t){e.blockedOn===t&&(e.blockedOn=null,hc||(hc=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,ag)))}var al=null;function im(e){al!==e&&(al=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){al===e&&(al=null);for(var t=0;t<e.length;t+=3){var a=e[t],s=e[t+1],r=e[t+2];if(typeof s!="function"){if(mc(s||a)===null)continue;break}var o=Za(a);o!==null&&(e.splice(t,3),t-=3,mo(o,{pending:!0,data:r,method:a.method,action:s},s,r))}}))}function Ur(e){function t(E){return tl(E,e)}bn!==null&&tl(bn,e),yn!==null&&tl(yn,e),jn!==null&&tl(jn,e),Lr.forEach(t),zr.forEach(t);for(var a=0;a<wn.length;a++){var s=wn[a];s.blockedOn===e&&(s.blockedOn=null)}for(;0<wn.length&&(a=wn[0],a.blockedOn===null);)sm(a),a.blockedOn===null&&wn.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(s=0;s<a.length;s+=3){var r=a[s],o=a[s+1],f=r[ue]||null;if(typeof o=="function")f||im(a);else if(f){var g=null;if(o&&o.hasAttribute("formAction")){if(r=o,f=o[ue]||null)g=f.formAction;else if(mc(r)!==null)continue}else g=f.action;typeof g=="function"?a[s+1]=g:(a.splice(s,3),s-=3),im(a)}}}function gc(e){this._internalRoot=e}nl.prototype.render=gc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(u(409));var a=t.current,s=Wt();Jf(a,s,e,t,null,null)},nl.prototype.unmount=gc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Jf(e.current,2,null,e,null,null),Ui(),t[be]=null}};function nl(e){this._internalRoot=e}nl.prototype.unstable_scheduleHydration=function(e){if(e){var t=En();e={blockedOn:null,target:e,priority:t};for(var a=0;a<wn.length&&t!==0&&t<wn[a].priority;a++);wn.splice(a,0,e),a===0&&sm(e)}};var lm=i.version;if(lm!=="19.1.0")throw Error(u(527,lm,"19.1.0"));A.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(u(188)):(e=Object.keys(e).join(","),Error(u(268,e)));return e=T(t),e=e!==null?S(e):null,e=e===null?null:e.stateNode,e};var ng={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sl.isDisabled&&sl.supportsFiber)try{Me=sl.inject(ng),Ee=sl}catch{}}return Vr.createRoot=function(e,t){if(!d(e))throw Error(u(299));var a=!1,s="",r=wd,o=Nd,f=Sd,g=null;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(o=t.onCaughtError),t.onRecoverableError!==void 0&&(f=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(g=t.unstable_transitionCallbacks)),t=Kf(e,1,!1,null,null,a,s,r,o,f,g,null),e[be]=t.current,Ko(e),new gc(t)},Vr.hydrateRoot=function(e,t,a){if(!d(e))throw Error(u(299));var s=!1,r="",o=wd,f=Nd,g=Sd,E=null,H=null;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(r=a.identifierPrefix),a.onUncaughtError!==void 0&&(o=a.onUncaughtError),a.onCaughtError!==void 0&&(f=a.onCaughtError),a.onRecoverableError!==void 0&&(g=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(E=a.unstable_transitionCallbacks),a.formState!==void 0&&(H=a.formState)),t=Kf(e,1,!0,t,a??null,s,r,o,f,g,E,H),t.context=Pf(null),a=t.current,s=Wt(),s=Xa(s),r=sn(s),r.callback=null,rn(a,r,s),a=s,t.current.lanes=a,va(t,a),Ca(t),e[be]=t.current,Ko(e),new nl(t)},Vr.version="19.1.0",Vr}var vm;function mg(){if(vm)return xc.exports;vm=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(i){console.error(i)}}return l(),xc.exports=fg(),xc.exports}var Zn=mg();const _t=(l,i={},c=null)=>{const u={timestamp:new Date().toISOString(),action:l,...i,error:c?{name:c.name,message:c.message,stack:c.stack}:null};c?console.error(` ${l}`,i,c):console.log(` ${l}`,i);try{const d=JSON.parse(sessionStorage.getItem("factoid_api_logs")||"[]");d.push(u),d.length>100&&d.splice(0,d.length-100),sessionStorage.setItem("factoid_api_logs",JSON.stringify(d))}catch(d){console.warn("Logger storage failed:",d)}},hg=j.forwardRef(({template:l,onChange:i,onFieldDrop:c,validationErrors:u,isDirty:d},m)=>{const w=j.useRef(),[b,T]=j.useState(0),[S,M]=j.useState(!1);j.useImperativeHandle(m,()=>({focus:()=>{var x;return(x=w.current)==null?void 0:x.focus()},getCursorPosition:()=>b,setCursorPosition:x=>{w.current&&(w.current.setSelectionRange(x,x),w.current.focus())}}));const k=()=>{w.current&&T(w.current.selectionStart)},h=x=>{x.preventDefault(),x.dataTransfer.dropEffect="copy",M(!0)},v=x=>{x.preventDefault(),M(!1)},y=x=>{var _;x.preventDefault(),M(!1);try{const le=JSON.parse(x.dataTransfer.getData("application/json"));if(le.type==="field"&&le.field){const Z=w.current.getBoundingClientRect(),z=x.clientX-Z.left,ae=x.clientY-Z.top,Q=w.current,fe=window.getComputedStyle(Q),de=parseInt(fe.lineHeight),Y=parseInt(fe.fontSize)*.6,J=Math.floor(ae/de),re=Math.floor(z/Y),ne=Q.value.split(`
`);let ie=0;for(let ce=0;ce<J&&ce<ne.length;ce++)ie+=ne[ce].length+1;ie+=Math.min(re,((_=ne[J])==null?void 0:_.length)||0),T(ie),c(le.field.variable_name,"default")}}catch(le){console.error("Drop error:",le)}};return n.jsxs("div",{className:"template-editor flex flex-col h-full",children:[n.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:" Template Editor"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Template Name *"}),n.jsx("input",{type:"text",value:l.name,onChange:x=>i("name",x.target.value),placeholder:"e.g., Council debt per capita comparison",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),n.jsxs("select",{value:l.factoid_type,onChange:x=>i("factoid_type",x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"context",children:" Context"}),n.jsx("option",{value:"comparison",children:" Comparison"}),n.jsx("option",{value:"trend",children:" Trend"}),n.jsx("option",{value:"ranking",children:" Ranking"}),n.jsx("option",{value:"per_capita",children:" Per Capita"}),n.jsx("option",{value:"ratio",children:" Ratio"}),n.jsx("option",{value:"milestone",children:" Milestone"}),n.jsx("option",{value:"sustainability",children:" Sustainability"}),n.jsx("option",{value:"percent_change",children:" % Change"}),n.jsx("option",{value:"anomaly",children:" Anomaly"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Emoji"}),n.jsx("input",{type:"text",value:l.emoji,onChange:x=>i("emoji",x.target.value),placeholder:"",maxLength:"10",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color"}),n.jsxs("select",{value:l.color_scheme,onChange:x=>i("color_scheme",x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"blue",children:" Blue"}),n.jsx("option",{value:"green",children:" Green"}),n.jsx("option",{value:"red",children:" Red"}),n.jsx("option",{value:"orange",children:" Orange"}),n.jsx("option",{value:"purple",children:" Purple"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),n.jsx("input",{type:"number",value:l.priority,onChange:x=>i("priority",parseInt(x.target.value)||0),min:"0",max:"100",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),n.jsx("div",{className:"flex-1 p-6",children:n.jsxs("div",{className:"h-full flex flex-col",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Template Text *"}),n.jsxs("div",{className:"flex-1 relative",children:[n.jsx("textarea",{ref:w,value:l.template_text,onChange:x=>{i("template_text",x.target.value),k()},onSelect:k,onKeyUp:k,onClick:k,onDragOver:h,onDragLeave:v,onDrop:y,placeholder:`Enter your factoid template. Drag fields from the sidebar or use {field_name} syntax.\r
\r
Example: {council_name} has total debt of {financial.total_debt:currency} which is {calculated.debt_per_capita:currency} per resident.`,className:`w-full h-full p-4 border-2 border-dashed rounded-lg font-mono text-sm resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors ${S?"border-blue-400 bg-blue-50":u.length>0?"border-red-300 bg-red-50":"border-gray-300"}`}),S&&n.jsx("div",{className:"absolute inset-0 bg-blue-100 bg-opacity-75 flex items-center justify-center rounded-lg pointer-events-none",children:n.jsx("div",{className:"text-blue-600 font-semibold text-lg",children:" Drop field here"})})]}),u.length>0&&n.jsxs("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:[n.jsx("h4",{className:"text-sm font-semibold text-red-800 mb-2",children:" Validation Errors"}),n.jsx("ul",{className:"text-sm text-red-700 space-y-1",children:u.map((x,_)=>n.jsxs("li",{children:[" ",x]},_))})]}),n.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[n.jsx("h4",{className:"text-sm font-semibold text-blue-800 mb-2",children:" Template Help"}),n.jsxs("div",{className:"text-sm text-blue-700 space-y-1",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Syntax:"})," Use ","{field_name}"," or ","{field_name:format}"]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Formats:"})," :currency, :percentage, :number, :decimal"]}),n.jsx("div",{children:n.jsx("strong",{children:"Examples:"})}),n.jsxs("ul",{className:"ml-4 mt-1 space-y-1 text-xs font-mono",children:[n.jsxs("li",{children:["{council_name}","  Worcestershire County Council"]}),n.jsxs("li",{children:["{financial.total_debt:currency}","  1,234,567"]}),n.jsxs("li",{children:["{calculated.change_percent:percentage}","  5.2%"]})]})]})]}),n.jsxs("div",{className:"mt-4 flex items-center",children:[n.jsx("input",{type:"checkbox",id:"is_active",checked:l.is_active,onChange:x=>i("is_active",x.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900",children:"Active (will appear in factoid playlists)"})]})]})})]})});hg.displayName="TemplateEditor";const gg="/api/factoid",pg=()=>{const[l,i]=j.useState([]),[c,u]=j.useState({}),[d,m]=j.useState(null),[w,b]=j.useState([]),[T,S]=j.useState(!1),M=j.useRef({}),k=j.useRef({}),h=j.useCallback((N,A={},q=null)=>{var p;const X={timestamp:new Date().toISOString(),action:N,session_id:((p=window.FACTOID_BUILDER_CONFIG)==null?void 0:p.sessionId)||"unknown",user_agent:navigator.userAgent,url:window.location.href,error:q?{name:q.name,message:q.message,stack:q.stack}:null,...A};q?console.error(` Factoid API Error [${N}]:`,X):console.log(` Factoid API Activity [${N}]:`,X);try{const L=JSON.parse(sessionStorage.getItem("factoid_api_logs")||"[]");L.push(X),L.length>100&&L.splice(0,L.length-100),sessionStorage.setItem("factoid_api_logs",JSON.stringify(L))}catch(L){console.warn("Failed to store client log:",L)}},[]),v=j.useCallback(async(N,A={})=>{const q=`${gg}${N}`,X=performance.now(),p={headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"};try{h("api_call_start",{endpoint:N,method:A.method||"GET",has_body:!!A.body,body_length:A.body?A.body.length:0});const L=await fetch(q,{...p,...A}),ee=performance.now()-X;if(!L.ok){const I=new Error(`HTTP ${L.status}: ${L.statusText}`);throw h("api_call_failed",{endpoint:N,method:A.method||"GET",status:L.status,status_text:L.statusText,duration_ms:ee},I),I}const $=await L.json();return h("api_call_success",{endpoint:N,method:A.method||"GET",status:L.status,duration_ms:ee,response_size:JSON.stringify($).length,success:$.success}),$}catch(L){const ee=performance.now()-X;throw h("api_call_error",{endpoint:N,method:A.method||"GET",duration_ms:ee,error_type:L.name,error_message:L.message},L),console.error(`API call failed for ${q}:`,L),L}},[h]),y=j.useCallback(async()=>{const N="field_discovery";if(k.current[N]&&Date.now()-k.current[N].timestamp<3e5){const A=k.current[N];return i(A.fields),u(A.fieldGroups),h("field_discovery_cache_hit",{cache_age_ms:Date.now()-A.timestamp,total_fields:Object.values(A.fieldGroups).reduce((q,X)=>q+X.length,0),categories_count:Object.keys(A.fieldGroups).length}),A}S(!0);try{h("field_discovery_start",{cache_miss:!0,cache_expired:!!k.current[N]}),console.log(" Discovering fields from API...");const A=await v("/templates/discover_fields/");if(A.success)return i(A.field_groups),u(A.field_groups),k.current[N]={fields:A.field_groups,fieldGroups:A.field_groups,timestamp:Date.now()},h("field_discovery_success",{total_fields:A.total_fields,categories_count:Object.keys(A.field_groups).length,field_categories:Object.keys(A.field_groups),cached:!0}),console.log(` Discovered ${A.total_fields} fields in ${Object.keys(A.field_groups).length} categories`),A;{const q=new Error(A.error||"Failed to discover fields");throw h("field_discovery_failed",{api_success:!1,api_error:A.error},q),q}}catch(A){return h("field_discovery_error",{error_type:A.name,error_message:A.message},A),console.error("Field discovery failed:",A),b(q=>[...q,`Field discovery failed: ${A.message}`]),{success:!1,error:A.message}}finally{S(!1)}},[v,h]),x=j.useCallback((N,A=null)=>{M.current.validation&&clearTimeout(M.current.validation),h("validation_debounce_start",{template_length:N?N.length:0,has_existing_timer:!!M.current.validation}),M.current.validation=setTimeout(async()=>{var q;if(!N||!N.trim()){b([]),h("validation_skipped_empty",{template_length:N?N.length:0,template_trimmed_length:N?N.trim().length:0});return}try{h("validation_start",{template_length:N.length,template_preview:N.substring(0,100)});const X=A?`/templates/${A}/validate_template/`:"/quick-validate/",p=await v(X,{method:"POST",body:JSON.stringify({template_text:N}),headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRFToken":((q=window.FACTOID_BUILDER_CONFIG)==null?void 0:q.csrfToken)||""}});if(p.success)b(p.validation_errors||[]),h("validation_success",{is_valid:p.is_valid,validation_errors_count:p.validation_errors?p.validation_errors.length:0,validation_errors:p.validation_errors,referenced_fields_count:p.referenced_fields?p.referenced_fields.length:0,referenced_fields:p.referenced_fields,template_length:N.length}),console.log(` Template validation: ${p.is_valid?"Valid":"Invalid"}`);else{const L=p.error||"Validation failed";b([L]),alert(L),h("validation_failed",{api_success:!1,api_error:p.error,template_length:N.length})}}catch(X){h("validation_error",{error_type:X.name,error_message:X.message,template_length:N.length},X),console.error("Template validation failed:",X),b([`Validation error: ${X.message}`]),alert(`Validation error: ${X.message}`)}},500)},[v,h]),_=j.useCallback((N,A={})=>{M.current.preview&&clearTimeout(M.current.preview),M.current.preview=setTimeout(async()=>{var q;if(!N||!N.trim()){m(null);return}try{const{templateId:X=null,councilSlug:p,yearSlug:L="2023-24",counterSlug:K}=A,ee={template_text:N,council_slug:p||null,year_slug:L,counter_slug:K||null},$=X?`/templates/${X}/preview/`:"/quick-preview/",I=await v($,{method:"POST",body:JSON.stringify(ee),headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRFToken":((q=window.FACTOID_BUILDER_CONFIG)==null?void 0:q.csrfToken)||""}});I.success?(m(I.preview),console.log(" Generated live preview")):(console.warn("Preview generation failed:",I.error),alert(I.error||"Preview generation failed"),m({rendered_text:"Preview error",validation_errors:[I.error]}))}catch(X){console.error("Preview generation failed:",X),alert(`Preview error: ${X.message}`),m({rendered_text:"Preview unavailable",validation_errors:[`Preview error: ${X.message}`]})}},750)},[v]),le=j.useCallback(async N=>{var A;try{console.log(" Saving template...",N);const q=await v("/templates/",{method:"POST",body:JSON.stringify(N),headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRFToken":((A=window.FACTOID_BUILDER_CONFIG)==null?void 0:A.csrfToken)||""}});if(q.id)return console.log(` Template saved with ID: ${q.id}`),k.current={},{success:!0,data:q};throw new Error(q.error||"Save failed")}catch(q){return console.error("Template save failed:",q),{success:!1,error:q.message}}},[v]),Z=j.useCallback(async N=>{if(!N||N.length<2)return{success:!0,fields:[]};try{return await v(`/fields/search/?q=${encodeURIComponent(N)}&limit=20`)}catch(A){return console.error("Field search failed:",A),{success:!1,error:A.message}}},[v]),z=j.useCallback(async()=>{const N="sample_councils";if(k.current[N]&&Date.now()-k.current[N].timestamp<6e5)return k.current[N].data;try{const A=await v("/templates/sample_councils/");return A.success&&(k.current[N]={data:A,timestamp:Date.now()}),A}catch(A){return console.error("Failed to get sample councils:",A),{success:!1,error:A.message}}},[v]),ae=j.useCallback(async()=>{const N="available_years";if(k.current[N]&&Date.now()-k.current[N].timestamp<6e5)return k.current[N].data;try{const A=new Date().getFullYear(),q=[];for(let p=0;p<5;p++){const L=A-p,K=L+1;q.push({label:`${L}-${String(K).slice(-2)}`,value:`${L}-${String(K).slice(-2)}`})}const X={success:!0,years:q};return k.current[N]={data:X,timestamp:Date.now()},X}catch(A){return console.error("Failed to get available years:",A),{success:!1,error:A.message}}},[]),Q=j.useCallback(async(N,A={})=>{try{return await new Promise(X=>{_(N,A),setTimeout(()=>{X(d)},1e3)})}catch(q){return console.warn("Real data preview failed, generating mock preview:",q),fe(N,A)}},[_,d]),fe=j.useCallback((N,A={})=>{try{const q={council_name:"Sample County Council",year_label:A.yearSlug||"2023-24",population:"592,000",total_expenditure:"1,250,000,000",total_revenue:"1,180,000,000",debt_per_resident:"1,450",council_type:"County Council",website:"https://sample-council.gov.uk",total_debt:"856,000,000",reserves:"89,000,000",precept:"687"};let X=N;return Object.entries(q).forEach(([L,K])=>{const ee=new RegExp(`\\{${L}[^}]*\\}`,"g");X=X.replace(ee,K)}),{success:!0,preview:{rendered_text:X,context_data:q,referenced_fields:N.match(/\{([^}]+)\}/g)||[],validation_errors:[],council_name:q.council_name,year_label:q.year_label,is_mock_data:!0}}}catch(q){return console.error("Mock preview generation failed:",q),{rendered_text:"Preview unavailable",validation_errors:[`Preview error: ${q.message}`],is_mock_data:!0}}},[]),de=j.useCallback(()=>{try{return JSON.parse(sessionStorage.getItem("factoid_api_logs")||"[]")}catch(N){return console.warn("Failed to retrieve client logs:",N),[]}},[]),Y=j.useCallback(async()=>{var A,q;const N="factoid_templates";if(k.current[N]&&Date.now()-k.current[N].timestamp<3e5)return h("factoid_templates_cache_hit",{cache_age_ms:Date.now()-k.current[N].timestamp,templates_count:((A=k.current[N].data.templates)==null?void 0:A.length)||0}),k.current[N].data;try{h("factoid_templates_fetch_start");const X=await v("/templates/");console.log(" Raw API response for /templates/:",X),console.log(" Response type:",typeof X),console.log(" Is array:",Array.isArray(X)),console.log(" Response keys:",X?Object.keys(X):"null/undefined");try{console.log(" Response JSON:",JSON.stringify(X,null,2))}catch(p){console.log(" Cannot stringify response:",p.message)}if(Array.isArray(X)){const p={success:!0,templates:X};return k.current[N]={data:p,timestamp:Date.now()},h("factoid_templates_fetch_success",{templates_count:X.length,cached:!0}),p}else{if(X&&X.success)return k.current[N]={data:X,timestamp:Date.now()},h("factoid_templates_fetch_success",{templates_count:((q=X.templates)==null?void 0:q.length)||0,cached:!0}),X;if(X&&typeof X=="object"){console.log(" Handling object response, creating success wrapper");const p={success:!0,templates:X.results||X.templates||(X.data&&Array.isArray(X.data)?X.data:[])};return k.current[N]={data:p,timestamp:Date.now()},h("factoid_templates_fetch_success",{templates_count:p.templates.length,cached:!0}),p}else{if(console.log(" Unhandled response format, attempting fallback"),console.log(" Response value:",X),X!=null){console.log(" Using fallback: empty templates array");const p={success:!0,templates:[]};return k.current[N]={data:p,timestamp:Date.now()},h("factoid_templates_fetch_success",{templates_count:0,cached:!0,fallback_used:!0}),p}throw console.log(" Complete failure, throwing error"),new Error((X==null?void 0:X.error)||"Failed to fetch factoid templates - unexpected response format")}}}catch(X){return h("factoid_templates_fetch_error",{error_type:X.name,error_message:X.message},X),console.error("Failed to fetch factoid templates:",X),{success:!1,error:X.message}}},[v,h]),J=j.useCallback(async N=>{var A;try{h("factoid_template_fetch_start",{template_id:N});const q=await v(`/templates/${N}/`);if(q.id)return h("factoid_template_fetch_success",{template_id:N,template_name:q.name}),{success:!0,template:q};if(q.success)return h("factoid_template_fetch_success",{template_id:N,template_name:((A=q.template)==null?void 0:A.name)||q.name}),q;throw new Error(q.error||"Failed to fetch factoid template")}catch(q){return h("factoid_template_fetch_error",{template_id:N,error_type:q.name,error_message:q.message},q),console.error(`Failed to fetch factoid template ${N}:`,q),{success:!1,error:q.message}}},[v,h]),re=j.useCallback(async(N,A)=>{var q,X;try{h("factoid_template_update_start",{template_id:N,template_name:A.name});const p=await v(`/templates/${N}/`,{method:"PUT",body:JSON.stringify(A),headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRFToken":((q=window.FACTOID_BUILDER_CONFIG)==null?void 0:q.csrfToken)||""}});if(p.id)return h("factoid_template_update_success",{template_id:N,template_name:p.name||A.name}),k.current={},{success:!0,data:p};if(p.success)return h("factoid_template_update_success",{template_id:N,template_name:((X=p.data)==null?void 0:X.name)||p.name||A.name}),k.current={},p;throw new Error(p.error||"Update failed")}catch(p){return h("factoid_template_update_error",{template_id:N,error_type:p.name,error_message:p.message},p),console.error(`Template update failed for ID ${N}:`,p),{success:!1,error:p.message}}},[v,h]),ne=j.useCallback(async N=>{var A;try{h("factoid_template_delete_start",{template_id:N});const q=await v(`/templates/${N}/`,{method:"DELETE",headers:{"X-Requested-With":"XMLHttpRequest","X-CSRFToken":((A=window.FACTOID_BUILDER_CONFIG)==null?void 0:A.csrfToken)||""}});return h("factoid_template_delete_success",{template_id:N}),k.current={},{success:!0}}catch(q){return h("factoid_template_delete_error",{template_id:N,error_type:q.name,error_message:q.message},q),console.error(`Template delete failed for ID ${N}:`,q),{success:!1,error:q.message}}},[v,h]),ie=j.useCallback(async N=>{var A,q,X;try{h("data_availability_check_start",{template_id:N});const p=await v(`/templates/${N}/check_data_availability/`);if(p.success)return h("data_availability_check_success",{template_id:N,available_combinations:((A=p.available_data)==null?void 0:A.length)||0,councils_with_data:((q=p.summary)==null?void 0:q.councils_with_data)||0,years_with_data:((X=p.summary)==null?void 0:X.years_with_data)||0}),p;throw new Error(p.error||"Failed to check data availability")}catch(p){return h("data_availability_check_error",{template_id:N,error_type:p.name,error_message:p.message},p),console.error(`Failed to check data availability for template ${N}:`,p),{success:!1,error:p.message}}},[v,h]),ce=j.useCallback(()=>{try{sessionStorage.removeItem("factoid_api_logs"),console.log(" Factoid API client logs cleared")}catch(N){console.warn("Failed to clear client logs:",N)}},[]),je=j.useCallback(()=>{const N=de(),A=JSON.stringify(N,null,2),q="data:application/json;charset=utf-8,"+encodeURIComponent(A),X=`factoid-api-logs-${new Date().toISOString().split("T")[0]}.json`,p=document.createElement("a");p.setAttribute("href",q),p.setAttribute("download",X),p.click(),h("logs_exported",{logs_count:N.length,export_filename:X})},[de,h]),we=j.useCallback(()=>{Object.values(M.current).forEach(N=>{N&&clearTimeout(N)}),M.current={},h("hook_cleanup",{timers_cleared:Object.keys(M.current).length})},[h]);return{fields:l,fieldGroups:c,previewData:d,setPreviewData:m,validationErrors:w,isLoading:T,discoverFields:y,validateTemplate:x,generatePreview:_,generatePreviewWithFallback:Q,generateMockPreview:fe,saveTemplate:le,searchFields:Z,getSampleCouncils:z,getAvailableYears:ae,cleanup:we,getFactoidTemplates:Y,getFactoidTemplate:J,updateFactoidTemplate:re,deleteFactoidTemplate:ne,checkDataAvailability:ie,getClientLogs:de,clearClientLogs:ce,exportLogs:je,apiCall:v}},vg=()=>{var Nt;console.log(" Improved FactoidBuilder mounting...");const l=((Nt=window==null?void 0:window.FACTOID_BUILDER_CONFIG)==null?void 0:Nt.isIntegratedMode)||!1,[i,c]=j.useState("mode-selection"),[u,d]=j.useState(1),[m,w]=j.useState({name:"",template_text:"",factoid_type:"context",emoji:"",color_scheme:"blue",priority:50,is_active:!0}),[b,T]=j.useState(null),[S,M]=j.useState(!1),[k,h]=j.useState(!1),[v,y]=j.useState(!1),[x,_]=j.useState(null),[le,Z]=j.useState(null),[z,ae]=j.useState([]),[Q,fe]=j.useState(!1),[de,Y]=j.useState(null),[J,re]=j.useState({}),[ne,ie]=j.useState({}),[ce,je]=j.useState({}),{fieldGroups:we,previewData:N,setPreviewData:A,validationErrors:q,isLoading:X,discoverFields:p,validateTemplate:L,generatePreview:K,generateMockPreview:ee,saveTemplate:$,getSampleCouncils:I,getAvailableYears:he,getFactoidTemplates:_e,getFactoidTemplate:ve,updateFactoidTemplate:Ue,deleteFactoidTemplate:me,checkDataAvailability:pe}=pg(),[ge,Ae]=j.useState([]),[rt,nt]=j.useState([]),[et,tt]=j.useState(""),[Xe,Bt]=j.useState("2024-25"),[Et,bt]=j.useState(!1),[ga,ut]=j.useState(null),yt=[{number:1,title:"What do you want to create?",description:"Choose what type of factoid you're building"},{number:2,title:"Give your factoid a name",description:"Choose a clear, descriptive name"},{number:3,title:"Write your factoid text",description:"Create the message using available data fields"},{number:4,title:"Check your factoid works",description:"Preview with real council data"},{number:5,title:"Save your factoid",description:"Review and save your completed factoid"}];j.useEffect(()=>{if(console.log(" ImprovedFactoidBuilder: Discovering available fields..."),typeof p=="function"?p().catch(F=>{console.error("Field discovery failed:",F),_t("field_discovery_error",{},F)}):console.error("discoverFields function not available"),l){const F=new CustomEvent("factoidBuilderReady",{detail:{component:"ImprovedFactoidBuilder"}});window.dispatchEvent(F)}},[]);const jt=j.useCallback((F,ue)=>{if(w(be=>({...be,[F]:ue})),M(!0),F==="template_text"&&ue.trim())try{console.log(" Template text changed, validating and generating preview..."),typeof L=="function"&&L(ue,b),typeof K=="function"&&K(ue,{templateId:b})}catch(be){console.error("Template change processing failed:",be),_t("template_change_error",{field:F},be)}},[L,K,b]),Me=j.useCallback((F,ue="default")=>{try{const be=m.template_text,kt=ue!=="default"?`:${ue}`:"",Ta=`{${F}${kt}}`,xa=be+Ta;jt("template_text",xa),K(xa,{templateId:b})}catch(be){console.error("Field insert failed:",be),_t("field_insert_error",{fieldVariable:F},be)}},[m.template_text,jt,K,b]),Ee=async()=>{h(!0);try{let F;de?(F=await Ue(de,m),F.success&&_t("template_updated",{id:de})):(F=await $(m),F.success&&(T(F.data.id),Y(F.data.id),_t("template_saved",{id:F.data.id}))),F.success?(M(!1),d(6)):(_t("template_save_failed",{error:F.error}),alert(`${de?"Update":"Save"} failed: ${F.error}`))}catch(F){console.error("Save/Update error:",F),_t("template_save_error",{},F),alert(`${de?"Update":"Save"} failed: ${F.message}`)}finally{h(!1)}},Ce=j.useCallback(async()=>{try{const[F,ue]=await Promise.all([I(),he()]);F.success&&F.councils&&(Ae(F.councils),F.councils.length>0&&!et&&tt(F.councils[0].slug)),ue.success&&ue.years&&nt(ue.years)}catch(F){console.error("Failed to load preview data:",F),ut("Failed to load preview options")}},[I,he,et]),Oe=j.useCallback(async()=>{if(m.template_text.trim()){bt(!0),ut(null);try{console.log(" Generating preview with selections:",{selectedCouncil:et,selectedYear:Xe});const F=await K(m.template_text,{councilSlug:et,yearSlug:Xe});if(F&&F.success){bt(!1);return}console.log(" Real data preview failed, generating mock preview...");const ue=ee(m.template_text,{yearSlug:Xe});ue&&ue.preview&&A(ue.preview),bt(!1)}catch(F){console.error("Preview generation failed:",F),ut(F.message);const ue=ee(m.template_text,{yearSlug:Xe});ue&&ue.preview&&A(ue.preview),bt(!1)}}},[m.template_text,et,Xe,K,ee,A]),wt=j.useCallback(async()=>{var F;fe(!0);try{const ue=await _e();ue.success?(ae(ue.templates||[]),_t("existing_factoids_loaded",{count:((F=ue.templates)==null?void 0:F.length)||0})):(console.error("Failed to load existing factoids:",ue.error),alert(`Failed to load existing factoids: ${ue.error}`))}catch(ue){console.error("Error loading existing factoids:",ue),_t("existing_factoids_load_error",{},ue),alert(`Error loading existing factoids: ${ue.message}`)}finally{fe(!1)}},[_e]),Ot=j.useCallback(async F=>{try{const ue=await ve(F);if(ue.success&&ue.template){const be=ue.template;w({name:be.name||"",template_text:be.template_text||"",factoid_type:be.factoid_type||"context",emoji:be.emoji||"",color_scheme:be.color_scheme||"blue",priority:be.priority||50,is_active:be.is_active!==!1}),Y(F),c("edit"),d(1),M(!1),_t("factoid_loaded_for_editing",{template_id:F,name:be.name})}else console.error("Failed to load factoid for editing:",ue.error),alert(`Failed to load factoid: ${ue.error}`)}catch(ue){console.error("Error loading factoid for editing:",ue),_t("factoid_load_for_editing_error",{template_id:F},ue),alert(`Error loading factoid: ${ue.message}`)}},[ve]),Ve=async(F,ue)=>{if(confirm(`Are you sure you want to delete "${ue}"? This action cannot be undone.`))try{const be=await me(F);be.success?(await wt(),_t("template_deleted",{id:F,name:ue}),alert("Factoid deleted successfully")):(console.error("Failed to delete factoid:",be.error),alert(`Failed to delete factoid: ${be.error}`))}catch(be){console.error("Error deleting factoid:",be),_t("template_delete_error",{id:F},be),alert(`Error deleting factoid: ${be.message}`)}},Ne=j.useCallback(()=>{c("create"),d(1),w({name:"",template_text:"",factoid_type:"context",emoji:"",color_scheme:"blue",priority:50,is_active:!0}),Y(null),M(!1),A(null)},[A]),ht=j.useCallback(async F=>{var ue;ie(be=>({...be,[F]:!0}));try{const be=await pe(F);be.success?(re(kt=>({...kt,[F]:be})),je(kt=>({...kt,[F]:!0})),_t("data_availability_checked",{template_id:F,combinations:((ue=be.available_data)==null?void 0:ue.length)||0})):(console.error("Failed to check data availability:",be.error),alert(`Failed to check data availability: ${be.error}`))}catch(be){console.error("Error checking data availability:",be),_t("data_availability_check_error",{template_id:F},be),alert(`Error checking data availability: ${be.message}`)}finally{ie(be=>({...be,[F]:!1}))}},[pe]),Rt=j.useCallback(F=>{je(ue=>({...ue,[F]:!ue[F]}))},[]),Ht=()=>{if(u<yt.length){const F=u+1;d(F),F===4&&(Ce(),Oe())}},pa=()=>{u>1&&d(u-1)},Wn=()=>{switch(u){case 1:return m.factoid_type;case 2:return m.name.trim().length>0;case 3:return m.template_text.trim().length>0;case 4:return N!==null;case 5:return!0;default:return!1}},Ya=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Factoid Builder"}),n.jsx("p",{className:"text-gray-600 mb-8",children:"Create new factoids or manage existing ones"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("button",{onClick:()=>{c("create"),d(1)},className:"p-6 border-2 border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors text-left",children:[n.jsx("div",{className:"text-4xl mb-3",children:""}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Create New Factoid"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Build a new factoid from scratch using the step-by-step wizard"})]}),n.jsxs("button",{onClick:()=>{c("list"),wt()},className:"p-6 border-2 border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors text-left",children:[n.jsx("div",{className:"text-4xl mb-3",children:""}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"View & Edit Existing"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Browse, edit, or delete your existing factoid templates"})]})]})]}),Cn=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Existing Factoids"}),n.jsx("p",{className:"text-gray-600",children:"Manage your factoid templates"})]}),n.jsx("button",{onClick:()=>c("mode-selection"),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Back to Menu"})]}),Q?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),n.jsx("p",{className:"text-gray-500",children:"Loading factoids..."})]}):z.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"text-4xl mb-4",children:""}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No factoids yet"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"You haven't created any factoids yet."}),n.jsx("button",{onClick:Ne,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Create your first factoid"})]}):n.jsxs("div",{className:"space-y-4",children:[z.map(F=>{var ue,be,kt,Ta,xa,Qa,ca;return n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx("span",{className:"text-lg",children:F.emoji||""}),n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:F.name}),n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 capitalize",children:F.factoid_type}),!F.is_active&&n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Inactive"})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-2 font-mono bg-gray-50 p-2 rounded",children:F.template_text}),n.jsxs("div",{className:"text-xs text-gray-500",children:["Created: ",new Date(F.created_at).toLocaleDateString(),F.updated_at&&F.updated_at!==F.created_at&&n.jsxs("span",{children:["  Updated: ",new Date(F.updated_at).toLocaleDateString()]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[n.jsx("button",{onClick:()=>ht(F.id),disabled:ne[F.id],className:"px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:ne[F.id]?"Checking...":"Check Data"}),n.jsx("button",{onClick:()=>Ot(F.id),className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700",children:"Edit"}),n.jsx("button",{onClick:()=>Ve(F.id,F.name),className:"px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700",children:"Delete"})]})]}),J[F.id]&&n.jsxs("div",{className:"mt-4 border-t border-gray-200 pt-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h4",{className:"text-sm font-medium text-gray-700",children:["Data Availability",J[F.id].summary&&n.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",J[F.id].summary.total_combinations," council/year combinations)"]})]}),n.jsxs("button",{onClick:()=>Rt(F.id),className:"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded hover:bg-gray-200",children:[ce[F.id]?"Hide":"Show"," Details"]})]}),((ue=J[F.id].available_data)==null?void 0:ue.length)===0?n.jsxs("div",{className:"text-sm text-orange-600 bg-orange-50 p-3 rounded",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),n.jsx("strong",{children:"No data available"})]}),n.jsxs("p",{className:"mt-1",children:["This factoid cannot be displayed for any councils/years as the required data fields are missing.",((be=J[F.id].referenced_fields)==null?void 0:be.length)>0&&n.jsxs("span",{className:"block mt-1 text-xs",children:["Required fields: ",J[F.id].referenced_fields.join(", ")]})]})]}):n.jsxs("div",{className:"text-sm text-green-600 bg-green-50 p-3 rounded",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),n.jsx("strong",{children:"Data available"})]}),n.jsxs("p",{className:"mt-1",children:["This factoid can be displayed for ",((kt=J[F.id].summary)==null?void 0:kt.total_combinations)||0," council/year combinations (",((Ta=J[F.id].summary)==null?void 0:Ta.councils_with_data)||0," councils across ",((xa=J[F.id].summary)==null?void 0:xa.years_with_data)||0," years)."]})]}),ce[F.id]&&((Qa=J[F.id].available_data)==null?void 0:Qa.length)>0&&n.jsxs("div",{className:"mt-4",children:[n.jsx("div",{className:"max-h-64 overflow-y-auto border border-gray-200 rounded-lg",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs",children:[n.jsx("thead",{className:"bg-gray-50 sticky top-0",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-700 uppercase tracking-wider",children:"Council"}),n.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-700 uppercase tracking-wider",children:"Type"}),n.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-700 uppercase tracking-wider",children:"Year"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:J[F.id].available_data.map((Pt,ba)=>n.jsxs("tr",{className:ba%2===0?"bg-white":"bg-gray-50",children:[n.jsx("td",{className:"px-3 py-2 text-gray-900",children:Pt.council_name}),n.jsx("td",{className:"px-3 py-2 text-gray-600",children:Pt.council_type}),n.jsx("td",{className:"px-3 py-2 text-gray-600",children:Pt.year_label})]},`${Pt.council_slug}-${Pt.year_id}`))})]})}),((ca=J[F.id].referenced_fields)==null?void 0:ca.length)>0&&n.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[n.jsx("strong",{children:"Required fields:"})," ",J[F.id].referenced_fields.join(", ")]})]})]})]},F.id)}),n.jsx("div",{className:"text-center pt-4",children:n.jsx("button",{onClick:Ne,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Create New Factoid"})})]})]}),Fa=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4",children:n.jsx("div",{className:"flex",children:n.jsx("div",{className:"ml-3",children:n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("strong",{children:"What are factoids?"}),n.jsx("br",{}),'Factoids are small pieces of text that display council data in an engaging way. For example: "Worcestershire County Council spent 2.5 million on highways in 2023-24"']})})})}),n.jsxs("fieldset",{className:"space-y-4",children:[n.jsx("legend",{className:"text-lg font-medium",children:"What type of factoid do you want to create?"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("label",{className:"flex items-start space-x-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"factoid_type",value:"context",checked:m.factoid_type==="context",onChange:F=>jt("factoid_type",F.target.value),className:"mt-1"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:" Context factoid"}),n.jsx("div",{className:"text-sm text-gray-600",children:"Provides background information about a council or financial figure"}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:'Example: "This council serves 592,000 residents across West Yorkshire"'})]})]}),n.jsxs("label",{className:"flex items-start space-x-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"factoid_type",value:"comparison",checked:m.factoid_type==="comparison",onChange:F=>jt("factoid_type",F.target.value),className:"mt-1"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:" Comparison factoid"}),n.jsx("div",{className:"text-sm text-gray-600",children:"Compares this council's data with others or previous years"}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:'Example: "This is 15% higher than the national average"'})]})]}),n.jsxs("label",{className:"flex items-start space-x-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"factoid_type",value:"insight",checked:m.factoid_type==="insight",onChange:F=>jt("factoid_type",F.target.value),className:"mt-1"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:" Insight factoid"}),n.jsx("div",{className:"text-sm text-gray-600",children:"Highlights interesting patterns or notable facts"}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:'Example: "Debt has increased by 23% over the past 3 years"'})]})]})]})]})]}),va=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-4",children:n.jsx("div",{className:"flex",children:n.jsx("div",{className:"ml-3",children:n.jsxs("p",{className:"text-sm text-green-700",children:[n.jsx("strong",{children:"Choose a good name"}),n.jsx("br",{}),"Pick something descriptive that helps you find this factoid later. You can always change it later."]})})})}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"factoid-name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Factoid name"}),n.jsx("input",{id:"factoid-name",type:"text",value:m.name,onChange:F=>jt("name",F.target.value),placeholder:"e.g. Council spending overview, Debt comparison, Population facts",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Give your factoid a clear, descriptive name"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"factoid-emoji",className:"block text-sm font-medium text-gray-700 mb-2",children:"Choose an emoji (optional)"}),n.jsxs("select",{id:"factoid-emoji",value:m.emoji,onChange:F=>jt("emoji",F.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"",children:" Chart"}),n.jsx("option",{value:"",children:" Money"}),n.jsx("option",{value:"",children:" Government"}),n.jsx("option",{value:"",children:" Growth"}),n.jsx("option",{value:"",children:" Decline"}),n.jsx("option",{value:"",children:" Balance"}),n.jsx("option",{value:"",children:" Star"}),n.jsx("option",{value:"",children:" Insight"}),n.jsx("option",{value:"",children:" Analysis"})]})]})]}),Kn=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-amber-50 border-l-4 border-amber-400 p-4",children:n.jsx("div",{className:"flex",children:n.jsx("div",{className:"ml-3",children:n.jsxs("p",{className:"text-sm text-amber-700",children:[n.jsx("strong",{children:"How to write factoids"}),n.jsx("br",{}),"Write your factoid like a sentence, then insert data fields using the buttons below. Fields appear as ","{field_name}"," and will be replaced with real data."]})})})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"template-text",className:"block text-sm font-medium text-gray-700 mb-2",children:"Your factoid text"}),n.jsx("textarea",{id:"template-text",value:m.template_text,onChange:F=>jt("template_text",F.target.value),placeholder:"Start typing your factoid... e.g. 'This council spent'",rows:6,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Write naturally, then add data fields using the buttons below"}),q.length>0&&n.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-md",children:n.jsxs("div",{className:"text-sm text-red-700",children:[n.jsx("strong",{children:"Issues to fix:"}),n.jsx("ul",{className:"mt-1 list-disc list-inside",children:q.map((F,ue)=>n.jsx("li",{children:F},ue))})]})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Available data fields"}),n.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:X?n.jsxs("div",{className:"text-center py-4",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Loading fields..."})]}):Object.keys(we).length===0?n.jsxs("div",{className:"text-center py-4",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"No fields available"}),n.jsx("button",{onClick:()=>p(),className:"mt-2 text-xs text-blue-600 hover:text-blue-800",children:"Try to reload fields"})]}):Object.entries(we).map(([F,ue])=>n.jsxs("div",{children:[n.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2",children:F.replace("_"," ")}),n.jsxs("div",{className:"space-y-1",children:[ue.slice(0,5).map(be=>n.jsxs("button",{onClick:()=>Me(be.variable_name),className:"w-full text-left p-2 text-sm border border-gray-200 rounded hover:bg-blue-50 hover:border-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("div",{className:"font-medium",children:be.name}),be.description&&n.jsx("div",{className:"text-xs text-gray-500 truncate",children:be.description})]},be.id)),ue.length>5&&n.jsxs("p",{className:"text-xs text-gray-500 p-2",children:["And ",ue.length-5," more..."]})]})]},F))})]})]}),n.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Example factoids"}),n.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[n.jsxs("div",{children:[' "This council spent ',"{total_expenditure}"," in ","{year_label}",'"']}),n.jsxs("div",{children:[' "',"{council_name}"," serves ","{population}",' residents"']}),n.jsxs("div",{children:[' "Debt per resident is ',"{debt_per_resident}",'"']})]})]})]}),Tn=()=>{var F;return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-purple-50 border-l-4 border-purple-400 p-4",children:n.jsx("div",{className:"flex",children:n.jsx("div",{className:"ml-3",children:n.jsxs("p",{className:"text-sm text-purple-700",children:[n.jsx("strong",{children:"Check it works"}),n.jsx("br",{}),"See how your factoid looks with council data. Choose a council and year below, or use sample data if real data isn't available."]})})})}),n.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Preview settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"council-select",className:"block text-sm font-medium text-gray-700 mb-1",children:"Council"}),n.jsxs("select",{id:"council-select",value:et,onChange:ue=>{tt(ue.target.value),Oe()},className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",children:[n.jsx("option",{value:"",children:"Use sample data"}),ge.map(ue=>n.jsx("option",{value:ue.slug,children:ue.name},ue.slug))]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Choose a council to use real data, or leave as "sample data" for demo values'})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"year-select",className:"block text-sm font-medium text-gray-700 mb-1",children:"Financial year"}),n.jsx("select",{id:"year-select",value:Xe,onChange:ue=>{Bt(ue.target.value),Oe()},className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",children:rt.map(ue=>n.jsx("option",{value:ue.value,children:ue.label},ue.value))}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Financial year for the data"})]})]}),n.jsx("div",{className:"mt-3",children:n.jsx("button",{onClick:Oe,disabled:Et,className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:Et?"Updating...":"Update preview"})})]}),Et?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),"Generating preview..."]}):ga?n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[n.jsx("h3",{className:"text-sm font-medium text-red-800 mb-2",children:"Preview Error"}),n.jsx("p",{className:"text-sm text-red-700",children:ga}),n.jsx("button",{onClick:Oe,className:"mt-2 px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700",children:"Try again"})]}):N?n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[m.emoji," Preview"]}),N.is_mock_data&&n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Sample data"})]}),n.jsx("div",{className:"text-lg text-gray-700 leading-relaxed mb-4",children:N.rendered_text}),n.jsx("div",{className:"text-sm text-gray-500 border-t pt-3",children:N.is_mock_data?n.jsxs("div",{children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Using sample data"})," - This preview shows how your factoid will look.",et?" Real data not available for this council/year.":" Choose a council above to try with real data."]}),n.jsx("p",{className:"mt-1",children:"You can save this factoid and add real data later."})]}):n.jsxs("p",{children:["Preview using real data from ",n.jsx("strong",{children:N.council_name})," (",N.year_label,")"]})})]}):n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx("p",{children:"No preview available"}),n.jsx("button",{onClick:Oe,className:"mt-2 px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700",children:"Generate preview"})]}),((F=N==null?void 0:N.validation_errors)==null?void 0:F.length)>0&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[n.jsx("h3",{className:"text-sm font-medium text-red-800 mb-2",children:"Issues found:"}),n.jsx("ul",{className:"text-sm text-red-700 list-disc list-inside",children:N.validation_errors.map((ue,be)=>n.jsx("li",{children:ue},be))}),n.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"These issues may prevent the factoid from working correctly. Go back to step 3 to fix them or save anyway using sample data."})]})]})},_n=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-4",children:n.jsx("div",{className:"flex",children:n.jsx("div",{className:"ml-3",children:n.jsxs("p",{className:"text-sm text-green-700",children:[n.jsx("strong",{children:"Ready to save"}),n.jsx("br",{}),"Your factoid is ready! Review the details below and save when you're happy."]})})})}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Review your factoid"}),n.jsxs("dl",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Name"}),n.jsx("dd",{className:"text-sm text-gray-900",children:m.name})]}),n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Type"}),n.jsx("dd",{className:"text-sm text-gray-900 capitalize",children:m.factoid_type})]}),n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Template text"}),n.jsx("dd",{className:"text-sm text-gray-900 font-mono bg-gray-50 p-2 rounded",children:m.template_text})]}),n.jsxs("div",{children:[n.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Preview"}),n.jsx("dd",{className:"text-sm text-gray-900",children:(N==null?void 0:N.rendered_text)||"No preview available"})]})]}),n.jsx("div",{className:"mt-6",children:n.jsx("button",{onClick:Ee,disabled:k,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:k?n.jsxs(n.Fragment,{children:[n.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save factoid"})})]})]}),Xa=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 text-center",children:[n.jsx("div",{className:"text-4xl mb-4",children:""}),n.jsxs("h3",{className:"text-lg font-medium text-green-900 mb-2",children:["Factoid ",de?"updated":"saved"," successfully!"]}),n.jsxs("p",{className:"text-green-700",children:['Your factoid "',m.name,'" has been ',de?"updated":"saved"," and is now available for use."]})]}),n.jsxs("div",{className:"flex justify-center space-x-4",children:[n.jsx("button",{onClick:()=>c("mode-selection"),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Back to Menu"}),n.jsx("button",{onClick:Ne,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Create another factoid"}),de&&n.jsx("button",{onClick:()=>{c("list"),wt()},className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"View all factoids"})]})]}),Ia=()=>{switch(u){case 1:return Fa();case 2:return va();case 3:return Kn();case 4:return Tn();case 5:return _n();case 6:return Xa();default:return null}},En=()=>{var F,ue;return n.jsxs(n.Fragment,{children:[u<=5&&n.jsxs("div",{className:"mb-8",children:[n.jsx("div",{className:"flex items-center justify-between",children:yt.map((be,kt)=>n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full text-sm font-medium ${u>=be.number?"bg-blue-600 text-white":"bg-gray-200 text-gray-500"}`,children:u>be.number?"":be.number}),kt<yt.length-1&&n.jsx("div",{className:`w-12 h-0.5 ml-2 ${u>be.number?"bg-blue-600":"bg-gray-200"}`})]},be.number))}),n.jsx("div",{className:"mt-2 text-center",children:n.jsxs("p",{className:"text-sm text-gray-500",children:["Step ",u," of ",yt.length]})})]}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mb-6",children:[u<=5&&n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:(F=yt[u-1])==null?void 0:F.title}),n.jsx("p",{className:"text-gray-600",children:(ue=yt[u-1])==null?void 0:ue.description})]}),u>1&&n.jsx("button",{onClick:()=>c("mode-selection"),className:"px-3 py-1 text-sm border border-gray-300 rounded text-gray-600 hover:bg-gray-50",children:"Cancel"})]}),de&&n.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("strong",{children:"Editing:"})," ",m.name]})})]}),Ia()]}),u<=5&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("button",{onClick:pa,disabled:u===1,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),n.jsx("button",{onClick:Ht,disabled:!Wn(),className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:u===5?"Review":"Continue"})]})]})},Pn=()=>i==="mode-selection"?Ya():i==="list"?Cn():i==="create"||i==="edit"?En():Ya();return n.jsx("div",{className:`improved-factoid-builder ${l?"integrated-mode":"standalone-mode"} ${l?"p-6":"h-full"} max-w-4xl mx-auto`,children:Pn()})};class Xr extends Um.Component{constructor(i){super(i),this.state={hasError:!1,error:null}}static getDerivedStateFromError(i){return{hasError:!0,error:i}}componentDidCatch(i,c){_t("error_boundary",{componentStack:c.componentStack},i)}render(){var i;return this.state.hasError?this.props.fallback||n.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded",children:[n.jsx("h2",{className:"font-bold text-red-800 mb-2",children:"Something went wrong."}),n.jsx("pre",{className:"text-xs text-red-700 whitespace-pre-wrap",children:(i=this.state.error)==null?void 0:i.message})]}):this.props.children}}function xg(){var c;const l=((c=window==null?void 0:window.FACTOID_BUILDER_CONFIG)==null?void 0:c.isIntegratedMode)||!1;j.useEffect(()=>{console.log(" Enhanced Factoid Builder App initialized"),console.log(" Integrated Mode:",l),console.log(" Config:",window.FACTOID_BUILDER_CONFIG),window.factoidBuilderDebug={getLogs:()=>{try{return JSON.parse(sessionStorage.getItem("factoid_api_logs")||"[]")}catch(m){return console.warn("Failed to retrieve logs:",m),[]}},clearLogs:()=>{try{sessionStorage.removeItem("factoid_api_logs"),console.log(" Factoid API logs cleared")}catch(m){console.warn("Failed to clear logs:",m)}},exportLogs:()=>{const m=window.factoidBuilderDebug.getLogs(),w=JSON.stringify(m,null,2),b="data:application/json;charset=utf-8,"+encodeURIComponent(w),T=`factoid-api-logs-${new Date().toISOString().split("T")[0]}.json`,S=document.createElement("a");S.setAttribute("href",b),S.setAttribute("download",T),S.click(),console.log(` Exported ${m.length} log entries to ${T}`)},getLogStats:()=>{const m=window.factoidBuilderDebug.getLogs(),w={},b=[];return m.forEach(T=>{w[T.action]=(w[T.action]||0)+1,T.error&&b.push(T)}),{total_logs:m.length,error_logs:b.length,actions_summary:w,recent_errors:b.slice(-5)}}},console.log(" Debug utilities available at window.factoidBuilderDebug");const u=m=>{const w=m.error||new Error(m.message);_t("global_error",{message:m.message,source:m.filename,lineno:m.lineno,colno:m.colno},w)},d=m=>{const w=m.reason instanceof Error?m.reason:new Error(String(m.reason));_t("unhandled_rejection",{reason:w.message},w)};return window.addEventListener("error",u),window.addEventListener("unhandledrejection",d),window.dispatchEvent(new CustomEvent("factoidBuilderReady",{detail:{isIntegratedMode:l,config:window.FACTOID_BUILDER_CONFIG}})),()=>{window.removeEventListener("error",u),window.removeEventListener("unhandledrejection",d)}},[l]);const i=vg;return l?n.jsx("div",{className:"factoid-builder-integrated",children:n.jsx(Xr,{children:n.jsx(i,{})})}):n.jsx("div",{className:"min-h-screen bg-gray-50",children:n.jsxs("div",{className:"container mx-auto py-8",children:[n.jsx("div",{className:"mb-8",children:n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:" Enhanced Factoid Builder"})}),n.jsx("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:n.jsx(Xr,{children:n.jsx(i,{})})})]})})}const Hm=j.createContext({dragDropManager:void 0});function la(l){return"Minified Redux error #"+l+"; visit https://redux.js.org/Errors?code="+l+" for the full message or use the non-minified dev environment for full errors. "}var xm=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),bm=function(){return Math.random().toString(36).substring(7).split("").join(".")},ym={INIT:"@@redux/INIT"+bm(),REPLACE:"@@redux/REPLACE"+bm()};function bg(l){if(typeof l!="object"||l===null)return!1;for(var i=l;Object.getPrototypeOf(i)!==null;)i=Object.getPrototypeOf(i);return Object.getPrototypeOf(l)===i}function Vm(l,i,c){var u;if(typeof i=="function"&&typeof c=="function"||typeof c=="function"&&typeof arguments[3]=="function")throw new Error(la(0));if(typeof i=="function"&&typeof c>"u"&&(c=i,i=void 0),typeof c<"u"){if(typeof c!="function")throw new Error(la(1));return c(Vm)(l,i)}if(typeof l!="function")throw new Error(la(2));var d=l,m=i,w=[],b=w,T=!1;function S(){b===w&&(b=w.slice())}function M(){if(T)throw new Error(la(3));return m}function k(x){if(typeof x!="function")throw new Error(la(4));if(T)throw new Error(la(5));var _=!0;return S(),b.push(x),function(){if(_){if(T)throw new Error(la(6));_=!1,S();var Z=b.indexOf(x);b.splice(Z,1),w=null}}}function h(x){if(!bg(x))throw new Error(la(7));if(typeof x.type>"u")throw new Error(la(8));if(T)throw new Error(la(9));try{T=!0,m=d(m,x)}finally{T=!1}for(var _=w=b,le=0;le<_.length;le++){var Z=_[le];Z()}return x}function v(x){if(typeof x!="function")throw new Error(la(10));d=x,h({type:ym.REPLACE})}function y(){var x,_=k;return x={subscribe:function(Z){if(typeof Z!="object"||Z===null)throw new Error(la(11));function z(){Z.next&&Z.next(M())}z();var ae=_(z);return{unsubscribe:ae}}},x[xm]=function(){return this},x}return h({type:ym.INIT}),u={dispatch:h,subscribe:k,getState:M,replaceReducer:v},u[xm]=y,u}function Re(l,i,...c){if(yg()&&i===void 0)throw new Error("invariant requires an error message argument");if(!l){let u;if(i===void 0)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let d=0;u=new Error(i.replace(/%s/g,function(){return c[d++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}}function yg(){return typeof process<"u"&&!0}function jg(l,i,c){return i.split(".").reduce((u,d)=>u&&u[d]?u[d]:c||null,l)}function wg(l,i){return l.filter(c=>c!==i)}function qm(l){return typeof l=="object"}function Ng(l,i){const c=new Map,u=m=>{c.set(m,c.has(m)?c.get(m)+1:1)};l.forEach(u),i.forEach(u);const d=[];return c.forEach((m,w)=>{m===1&&d.push(w)}),d}function Sg(l,i){return l.filter(c=>i.indexOf(c)>-1)}const Lc="dnd-core/INIT_COORDS",cl="dnd-core/BEGIN_DRAG",zc="dnd-core/PUBLISH_DRAG_SOURCE",ul="dnd-core/HOVER",dl="dnd-core/DROP",fl="dnd-core/END_DRAG";function jm(l,i){return{type:Lc,payload:{sourceClientOffset:i||null,clientOffset:l||null}}}const Cg={type:Lc,payload:{clientOffset:null,sourceClientOffset:null}};function Tg(l){return function(c=[],u={publishSource:!0}){const{publishSource:d=!0,clientOffset:m,getSourceClientOffset:w}=u,b=l.getMonitor(),T=l.getRegistry();l.dispatch(jm(m)),_g(c,b,T);const S=kg(c,b);if(S==null){l.dispatch(Cg);return}let M=null;if(m){if(!w)throw new Error("getSourceClientOffset must be defined");Eg(w),M=w(S)}l.dispatch(jm(m,M));const h=T.getSource(S).beginDrag(b,S);if(h==null)return;Og(h),T.pinSource(S);const v=T.getSourceType(S);return{type:cl,payload:{itemType:v,item:h,sourceId:S,clientOffset:m||null,sourceClientOffset:M||null,isSourcePublic:!!d}}}}function _g(l,i,c){Re(!i.isDragging(),"Cannot call beginDrag while dragging."),l.forEach(function(u){Re(c.getSource(u),"Expected sourceIds to be registered.")})}function Eg(l){Re(typeof l=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function Og(l){Re(qm(l),"Item must be an object.")}function kg(l,i){let c=null;for(let u=l.length-1;u>=0;u--)if(i.canDragSource(l[u])){c=l[u];break}return c}function Dg(l,i,c){return i in l?Object.defineProperty(l,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):l[i]=c,l}function Mg(l){for(var i=1;i<arguments.length;i++){var c=arguments[i]!=null?arguments[i]:{},u=Object.keys(c);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(c).filter(function(d){return Object.getOwnPropertyDescriptor(c,d).enumerable}))),u.forEach(function(d){Dg(l,d,c[d])})}return l}function Ag(l){return function(c={}){const u=l.getMonitor(),d=l.getRegistry();Rg(u),Bg(u).forEach((w,b)=>{const T=Lg(w,b,d,u),S={type:dl,payload:{dropResult:Mg({},c,T)}};l.dispatch(S)})}}function Rg(l){Re(l.isDragging(),"Cannot call drop while not dragging."),Re(!l.didDrop(),"Cannot call drop twice during one drag operation.")}function Lg(l,i,c,u){const d=c.getTarget(l);let m=d?d.drop(u,l):void 0;return zg(m),typeof m>"u"&&(m=i===0?{}:u.getDropResult()),m}function zg(l){Re(typeof l>"u"||qm(l),"Drop result must either be an object or undefined.")}function Bg(l){const i=l.getTargetIds().filter(l.canDropOnTarget,l);return i.reverse(),i}function Ug(l){return function(){const c=l.getMonitor(),u=l.getRegistry();Hg(c);const d=c.getSourceId();return d!=null&&(u.getSource(d,!0).endDrag(c,d),u.unpinSource()),{type:fl}}}function Hg(l){Re(l.isDragging(),"Cannot call endDrag while not dragging.")}function kc(l,i){return i===null?l===null:Array.isArray(l)?l.some(c=>c===i):l===i}function Vg(l){return function(c,{clientOffset:u}={}){qg(c);const d=c.slice(0),m=l.getMonitor(),w=l.getRegistry(),b=m.getItemType();return Yg(d,w,b),Gg(d,m,w),Fg(d,m,w),{type:ul,payload:{targetIds:d,clientOffset:u||null}}}}function qg(l){Re(Array.isArray(l),"Expected targetIds to be an array.")}function Gg(l,i,c){Re(i.isDragging(),"Cannot call hover while not dragging."),Re(!i.didDrop(),"Cannot call hover after drop.");for(let u=0;u<l.length;u++){const d=l[u];Re(l.lastIndexOf(d)===u,"Expected targetIds to be unique in the passed array.");const m=c.getTarget(d);Re(m,"Expected targetIds to be registered.")}}function Yg(l,i,c){for(let u=l.length-1;u>=0;u--){const d=l[u],m=i.getTargetType(d);kc(m,c)||l.splice(u,1)}}function Fg(l,i,c){l.forEach(function(u){c.getTarget(u).hover(i,u)})}function Xg(l){return function(){if(l.getMonitor().isDragging())return{type:zc}}}function Ig(l){return{beginDrag:Tg(l),publishDragSource:Xg(l),hover:Vg(l),drop:Ag(l),endDrag:Ug(l)}}class Qg{receiveBackend(i){this.backend=i}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const i=this,{dispatch:c}=this.store;function u(m){return(...w)=>{const b=m.apply(i,w);typeof b<"u"&&c(b)}}const d=Ig(this);return Object.keys(d).reduce((m,w)=>{const b=d[w];return m[w]=u(b),m},{})}dispatch(i){this.store.dispatch(i)}constructor(i,c){this.isSetUp=!1,this.handleRefCountChange=()=>{const u=this.store.getState().refCount>0;this.backend&&(u&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!u&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=i,this.monitor=c,i.subscribe(this.handleRefCountChange)}}function Zg(l,i){return{x:l.x+i.x,y:l.y+i.y}}function Gm(l,i){return{x:l.x-i.x,y:l.y-i.y}}function $g(l){const{clientOffset:i,initialClientOffset:c,initialSourceClientOffset:u}=l;return!i||!c||!u?null:Gm(Zg(i,u),c)}function Wg(l){const{clientOffset:i,initialClientOffset:c}=l;return!i||!c?null:Gm(i,c)}const Yr=[],Bc=[];Yr.__IS_NONE__=!0;Bc.__IS_ALL__=!0;function Kg(l,i){return l===Yr?!1:l===Bc||typeof i>"u"?!0:Sg(i,l).length>0}class Pg{subscribeToStateChange(i,c={}){const{handlerIds:u}=c;Re(typeof i=="function","listener must be a function."),Re(typeof u>"u"||Array.isArray(u),"handlerIds, when specified, must be an array of strings.");let d=this.store.getState().stateId;const m=()=>{const w=this.store.getState(),b=w.stateId;try{b===d||b===d+1&&!Kg(w.dirtyHandlerIds,u)||i()}finally{d=b}};return this.store.subscribe(m)}subscribeToOffsetChange(i){Re(typeof i=="function","listener must be a function.");let c=this.store.getState().dragOffset;const u=()=>{const d=this.store.getState().dragOffset;d!==c&&(c=d,i())};return this.store.subscribe(u)}canDragSource(i){if(!i)return!1;const c=this.registry.getSource(i);return Re(c,`Expected to find a valid source. sourceId=${i}`),this.isDragging()?!1:c.canDrag(this,i)}canDropOnTarget(i){if(!i)return!1;const c=this.registry.getTarget(i);if(Re(c,`Expected to find a valid target. targetId=${i}`),!this.isDragging()||this.didDrop())return!1;const u=this.registry.getTargetType(i),d=this.getItemType();return kc(u,d)&&c.canDrop(this,i)}isDragging(){return!!this.getItemType()}isDraggingSource(i){if(!i)return!1;const c=this.registry.getSource(i,!0);if(Re(c,`Expected to find a valid source. sourceId=${i}`),!this.isDragging()||!this.isSourcePublic())return!1;const u=this.registry.getSourceType(i),d=this.getItemType();return u!==d?!1:c.isDragging(this,i)}isOverTarget(i,c={shallow:!1}){if(!i)return!1;const{shallow:u}=c;if(!this.isDragging())return!1;const d=this.registry.getTargetType(i),m=this.getItemType();if(m&&!kc(d,m))return!1;const w=this.getTargetIds();if(!w.length)return!1;const b=w.indexOf(i);return u?b===w.length-1:b>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return $g(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return Wg(this.store.getState().dragOffset)}constructor(i,c){this.store=i,this.registry=c}}const wm=typeof global<"u"?global:self,Ym=wm.MutationObserver||wm.WebKitMutationObserver;function Fm(l){return function(){const c=setTimeout(d,0),u=setInterval(d,50);function d(){clearTimeout(c),clearInterval(u),l()}}}function Jg(l){let i=1;const c=new Ym(l),u=document.createTextNode("");return c.observe(u,{characterData:!0}),function(){i=-i,u.data=i}}const ep=typeof Ym=="function"?Jg:Fm;class tp{enqueueTask(i){const{queue:c,requestFlush:u}=this;c.length||(u(),this.flushing=!0),c[c.length]=i}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:i}=this;for(;this.index<i.length;){const c=this.index;if(this.index++,i[c].call(),this.index>this.capacity){for(let u=0,d=i.length-this.index;u<d;u++)i[u]=i[u+this.index];i.length-=this.index,this.index=0}}i.length=0,this.index=0,this.flushing=!1},this.registerPendingError=i=>{this.pendingErrors.push(i),this.requestErrorThrow()},this.requestFlush=ep(this.flush),this.requestErrorThrow=Fm(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class ap{call(){try{this.task&&this.task()}catch(i){this.onError(i)}finally{this.task=null,this.release(this)}}constructor(i,c){this.onError=i,this.release=c,this.task=null}}class np{create(i){const c=this.freeTasks,u=c.length?c.pop():new ap(this.onError,d=>c[c.length]=d);return u.task=i,u}constructor(i){this.onError=i,this.freeTasks=[]}}const Xm=new tp,sp=new np(Xm.registerPendingError);function rp(l){Xm.enqueueTask(sp.create(l))}const Uc="dnd-core/ADD_SOURCE",Hc="dnd-core/ADD_TARGET",Vc="dnd-core/REMOVE_SOURCE",ml="dnd-core/REMOVE_TARGET";function ip(l){return{type:Uc,payload:{sourceId:l}}}function lp(l){return{type:Hc,payload:{targetId:l}}}function op(l){return{type:Vc,payload:{sourceId:l}}}function cp(l){return{type:ml,payload:{targetId:l}}}function up(l){Re(typeof l.canDrag=="function","Expected canDrag to be a function."),Re(typeof l.beginDrag=="function","Expected beginDrag to be a function."),Re(typeof l.endDrag=="function","Expected endDrag to be a function.")}function dp(l){Re(typeof l.canDrop=="function","Expected canDrop to be a function."),Re(typeof l.hover=="function","Expected hover to be a function."),Re(typeof l.drop=="function","Expected beginDrag to be a function.")}function Dc(l,i){if(i&&Array.isArray(l)){l.forEach(c=>Dc(c,!1));return}Re(typeof l=="string"||typeof l=="symbol",i?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var oa;(function(l){l.SOURCE="SOURCE",l.TARGET="TARGET"})(oa||(oa={}));let fp=0;function mp(){return fp++}function hp(l){const i=mp().toString();switch(l){case oa.SOURCE:return`S${i}`;case oa.TARGET:return`T${i}`;default:throw new Error(`Unknown Handler Role: ${l}`)}}function Nm(l){switch(l[0]){case"S":return oa.SOURCE;case"T":return oa.TARGET;default:throw new Error(`Cannot parse handler ID: ${l}`)}}function Sm(l,i){const c=l.entries();let u=!1;do{const{done:d,value:[,m]}=c.next();if(m===i)return!0;u=!!d}while(!u);return!1}class gp{addSource(i,c){Dc(i),up(c);const u=this.addHandler(oa.SOURCE,i,c);return this.store.dispatch(ip(u)),u}addTarget(i,c){Dc(i,!0),dp(c);const u=this.addHandler(oa.TARGET,i,c);return this.store.dispatch(lp(u)),u}containsHandler(i){return Sm(this.dragSources,i)||Sm(this.dropTargets,i)}getSource(i,c=!1){return Re(this.isSourceId(i),"Expected a valid source ID."),c&&i===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(i)}getTarget(i){return Re(this.isTargetId(i),"Expected a valid target ID."),this.dropTargets.get(i)}getSourceType(i){return Re(this.isSourceId(i),"Expected a valid source ID."),this.types.get(i)}getTargetType(i){return Re(this.isTargetId(i),"Expected a valid target ID."),this.types.get(i)}isSourceId(i){return Nm(i)===oa.SOURCE}isTargetId(i){return Nm(i)===oa.TARGET}removeSource(i){Re(this.getSource(i),"Expected an existing source."),this.store.dispatch(op(i)),rp(()=>{this.dragSources.delete(i),this.types.delete(i)})}removeTarget(i){Re(this.getTarget(i),"Expected an existing target."),this.store.dispatch(cp(i)),this.dropTargets.delete(i),this.types.delete(i)}pinSource(i){const c=this.getSource(i);Re(c,"Expected an existing source."),this.pinnedSourceId=i,this.pinnedSource=c}unpinSource(){Re(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(i,c,u){const d=hp(i);return this.types.set(d,c),i===oa.SOURCE?this.dragSources.set(d,u):i===oa.TARGET&&this.dropTargets.set(d,u),d}constructor(i){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=i}}const pp=(l,i)=>l===i;function vp(l,i){return!l&&!i?!0:!l||!i?!1:l.x===i.x&&l.y===i.y}function xp(l,i,c=pp){if(l.length!==i.length)return!1;for(let u=0;u<l.length;++u)if(!c(l[u],i[u]))return!1;return!0}function bp(l=Yr,i){switch(i.type){case ul:break;case Uc:case Hc:case ml:case Vc:return Yr;case cl:case zc:case fl:case dl:default:return Bc}const{targetIds:c=[],prevTargetIds:u=[]}=i.payload,d=Ng(c,u);if(!(d.length>0||!xp(c,u)))return Yr;const w=u[u.length-1],b=c[c.length-1];return w!==b&&(w&&d.push(w),b&&d.push(b)),d}function yp(l,i,c){return i in l?Object.defineProperty(l,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):l[i]=c,l}function jp(l){for(var i=1;i<arguments.length;i++){var c=arguments[i]!=null?arguments[i]:{},u=Object.keys(c);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(c).filter(function(d){return Object.getOwnPropertyDescriptor(c,d).enumerable}))),u.forEach(function(d){yp(l,d,c[d])})}return l}const Cm={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function wp(l=Cm,i){const{payload:c}=i;switch(i.type){case Lc:case cl:return{initialSourceClientOffset:c.sourceClientOffset,initialClientOffset:c.clientOffset,clientOffset:c.clientOffset};case ul:return vp(l.clientOffset,c.clientOffset)?l:jp({},l,{clientOffset:c.clientOffset});case fl:case dl:return Cm;default:return l}}function Np(l,i,c){return i in l?Object.defineProperty(l,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):l[i]=c,l}function Ls(l){for(var i=1;i<arguments.length;i++){var c=arguments[i]!=null?arguments[i]:{},u=Object.keys(c);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(c).filter(function(d){return Object.getOwnPropertyDescriptor(c,d).enumerable}))),u.forEach(function(d){Np(l,d,c[d])})}return l}const Sp={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function Cp(l=Sp,i){const{payload:c}=i;switch(i.type){case cl:return Ls({},l,{itemType:c.itemType,item:c.item,sourceId:c.sourceId,isSourcePublic:c.isSourcePublic,dropResult:null,didDrop:!1});case zc:return Ls({},l,{isSourcePublic:!0});case ul:return Ls({},l,{targetIds:c.targetIds});case ml:return l.targetIds.indexOf(c.targetId)===-1?l:Ls({},l,{targetIds:wg(l.targetIds,c.targetId)});case dl:return Ls({},l,{dropResult:c.dropResult,didDrop:!0,targetIds:[]});case fl:return Ls({},l,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return l}}function Tp(l=0,i){switch(i.type){case Uc:case Hc:return l+1;case Vc:case ml:return l-1;default:return l}}function _p(l=0){return l+1}function Ep(l,i,c){return i in l?Object.defineProperty(l,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):l[i]=c,l}function Op(l){for(var i=1;i<arguments.length;i++){var c=arguments[i]!=null?arguments[i]:{},u=Object.keys(c);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(c).filter(function(d){return Object.getOwnPropertyDescriptor(c,d).enumerable}))),u.forEach(function(d){Ep(l,d,c[d])})}return l}function kp(l={},i){return{dirtyHandlerIds:bp(l.dirtyHandlerIds,{type:i.type,payload:Op({},i.payload,{prevTargetIds:jg(l,"dragOperation.targetIds",[])})}),dragOffset:wp(l.dragOffset,i),refCount:Tp(l.refCount,i),dragOperation:Cp(l.dragOperation,i),stateId:_p(l.stateId)}}function Dp(l,i=void 0,c={},u=!1){const d=Mp(u),m=new Pg(d,new gp(d)),w=new Qg(d,m),b=l(w,i,c);return w.receiveBackend(b),w}function Mp(l){const i=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return Vm(kp,l&&i&&i({name:"dnd-core",instanceId:"dnd-core"}))}function Ap(l,i){if(l==null)return{};var c=Rp(l,i),u,d;if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(l);for(d=0;d<m.length;d++)u=m[d],!(i.indexOf(u)>=0)&&Object.prototype.propertyIsEnumerable.call(l,u)&&(c[u]=l[u])}return c}function Rp(l,i){if(l==null)return{};var c={},u=Object.keys(l),d,m;for(m=0;m<u.length;m++)d=u[m],!(i.indexOf(d)>=0)&&(c[d]=l[d]);return c}let Tm=0;const il=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var Lp=j.memo(function(i){var{children:c}=i,u=Ap(i,["children"]);const[d,m]=zp(u);return j.useEffect(()=>{if(m){const w=Im();return++Tm,()=>{--Tm===0&&(w[il]=null)}}},[]),n.jsx(Hm.Provider,{value:d,children:c})});function zp(l){if("manager"in l)return[{dragDropManager:l.manager},!1];const i=Bp(l.backend,l.context,l.options,l.debugMode),c=!l.context;return[i,c]}function Bp(l,i=Im(),c,u){const d=i;return d[il]||(d[il]={dragDropManager:Dp(l,i,c,u)}),d[il]}function Im(){return typeof global<"u"?global:window}var wc,_m;function Up(){return _m||(_m=1,wc=function l(i,c){if(i===c)return!0;if(i&&c&&typeof i=="object"&&typeof c=="object"){if(i.constructor!==c.constructor)return!1;var u,d,m;if(Array.isArray(i)){if(u=i.length,u!=c.length)return!1;for(d=u;d--!==0;)if(!l(i[d],c[d]))return!1;return!0}if(i.constructor===RegExp)return i.source===c.source&&i.flags===c.flags;if(i.valueOf!==Object.prototype.valueOf)return i.valueOf()===c.valueOf();if(i.toString!==Object.prototype.toString)return i.toString()===c.toString();if(m=Object.keys(i),u=m.length,u!==Object.keys(c).length)return!1;for(d=u;d--!==0;)if(!Object.prototype.hasOwnProperty.call(c,m[d]))return!1;for(d=u;d--!==0;){var w=m[d];if(!l(i[w],c[w]))return!1}return!0}return i!==i&&c!==c}),wc}var Hp=Up();const Vp=Bm(Hp),$n=typeof window<"u"?j.useLayoutEffect:j.useEffect;function qp(l,i,c){const[u,d]=j.useState(()=>i(l)),m=j.useCallback(()=>{const w=i(l);Vp(u,w)||(d(w),c&&c())},[u,l,c]);return $n(m),[u,m]}function Gp(l,i,c){const[u,d]=qp(l,i,c);return $n(function(){const w=l.getHandlerId();if(w!=null)return l.subscribeToStateChange(d,{handlerIds:[w]})},[l,d]),u}function Qm(l,i,c){return Gp(i,l||(()=>({})),()=>c.reconnect())}function Zm(l,i){const c=[];return typeof l!="function"&&c.push(l),j.useMemo(()=>typeof l=="function"?l():l,c)}function Yp(l){return j.useMemo(()=>l.hooks.dragSource(),[l])}function Fp(l){return j.useMemo(()=>l.hooks.dragPreview(),[l])}let Nc=!1,Sc=!1;class Xp{receiveHandlerId(i){this.sourceId=i}getHandlerId(){return this.sourceId}canDrag(){Re(!Nc,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Nc=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Nc=!1}}isDragging(){if(!this.sourceId)return!1;Re(!Sc,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Sc=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Sc=!1}}subscribeToStateChange(i,c){return this.internalMonitor.subscribeToStateChange(i,c)}isDraggingSource(i){return this.internalMonitor.isDraggingSource(i)}isOverTarget(i,c){return this.internalMonitor.isOverTarget(i,c)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(i){return this.internalMonitor.subscribeToOffsetChange(i)}canDragSource(i){return this.internalMonitor.canDragSource(i)}canDropOnTarget(i){return this.internalMonitor.canDropOnTarget(i)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(i){this.sourceId=null,this.internalMonitor=i.getMonitor()}}let Cc=!1;class Ip{receiveHandlerId(i){this.targetId=i}getHandlerId(){return this.targetId}subscribeToStateChange(i,c){return this.internalMonitor.subscribeToStateChange(i,c)}canDrop(){if(!this.targetId)return!1;Re(!Cc,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Cc=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Cc=!1}}isOver(i){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,i):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(i){this.targetId=null,this.internalMonitor=i.getMonitor()}}function Qp(l,i,c){const u=c.getRegistry(),d=u.addTarget(l,i);return[d,()=>u.removeTarget(d)]}function Zp(l,i,c){const u=c.getRegistry(),d=u.addSource(l,i);return[d,()=>u.removeSource(d)]}function Mc(l,i,c,u){let d;if(d!==void 0)return!!d;if(l===i)return!0;if(typeof l!="object"||!l||typeof i!="object"||!i)return!1;const m=Object.keys(l),w=Object.keys(i);if(m.length!==w.length)return!1;const b=Object.prototype.hasOwnProperty.bind(i);for(let T=0;T<m.length;T++){const S=m[T];if(!b(S))return!1;const M=l[S],k=i[S];if(d=void 0,d===!1||d===void 0&&M!==k)return!1}return!0}function Ac(l){return l!==null&&typeof l=="object"&&Object.prototype.hasOwnProperty.call(l,"current")}function $p(l){if(typeof l.type=="string")return;const i=l.type.displayName||l.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${i} into a <div>, or turn it into a drag source or a drop target itself.`)}function Wp(l){return(i=null,c=null)=>{if(!j.isValidElement(i)){const m=i;return l(m,c),m}const u=i;return $p(u),Kp(u,c?m=>l(m,c):l)}}function $m(l){const i={};return Object.keys(l).forEach(c=>{const u=l[c];if(c.endsWith("Ref"))i[c]=l[c];else{const d=Wp(u);i[c]=()=>d}}),i}function Em(l,i){typeof l=="function"?l(i):l.current=i}function Kp(l,i){const c=l.ref;return Re(typeof c!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),c?j.cloneElement(l,{ref:u=>{Em(c,u),Em(i,u)}}):j.cloneElement(l,{ref:i})}class Pp{receiveHandlerId(i){this.handlerId!==i&&(this.handlerId=i,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(i){this.dragSourceOptionsInternal=i}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(i){this.dragPreviewOptionsInternal=i}reconnect(){const i=this.reconnectDragSource();this.reconnectDragPreview(i)}reconnectDragSource(){const i=this.dragSource,c=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return c&&this.disconnectDragSource(),this.handlerId?i?(c&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=i,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,i,this.dragSourceOptions)),c):(this.lastConnectedDragSource=i,c):c}reconnectDragPreview(i=!1){const c=this.dragPreview,u=i||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(u&&this.disconnectDragPreview(),!!this.handlerId){if(!c){this.lastConnectedDragPreview=c;return}u&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=c,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,c,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!Mc(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!Mc(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(i){this.hooks=$m({dragSource:(c,u)=>{this.clearDragSource(),this.dragSourceOptions=u||null,Ac(c)?this.dragSourceRef=c:this.dragSourceNode=c,this.reconnectDragSource()},dragPreview:(c,u)=>{this.clearDragPreview(),this.dragPreviewOptions=u||null,Ac(c)?this.dragPreviewRef=c:this.dragPreviewNode=c,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=i}}class Jp{get connectTarget(){return this.dropTarget}reconnect(){const i=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();i&&this.disconnectDropTarget();const c=this.dropTarget;if(this.handlerId){if(!c){this.lastConnectedDropTarget=c;return}i&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=c,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,c,this.dropTargetOptions))}}receiveHandlerId(i){i!==this.handlerId&&(this.handlerId=i,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(i){this.dropTargetOptionsInternal=i}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!Mc(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(i){this.hooks=$m({dropTarget:(c,u)=>{this.clearDropTarget(),this.dropTargetOptions=u,Ac(c)?this.dropTargetRef=c:this.dropTargetNode=c,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=i}}function zs(){const{dragDropManager:l}=j.useContext(Hm);return Re(l!=null,"Expected drag drop context"),l}function ev(l,i){const c=zs(),u=j.useMemo(()=>new Pp(c.getBackend()),[c]);return $n(()=>(u.dragSourceOptions=l||null,u.reconnect(),()=>u.disconnectDragSource()),[u,l]),$n(()=>(u.dragPreviewOptions=i||null,u.reconnect(),()=>u.disconnectDragPreview()),[u,i]),u}function tv(){const l=zs();return j.useMemo(()=>new Xp(l),[l])}class av{beginDrag(){const i=this.spec,c=this.monitor;let u=null;return typeof i.item=="object"?u=i.item:typeof i.item=="function"?u=i.item(c):u={},u??null}canDrag(){const i=this.spec,c=this.monitor;return typeof i.canDrag=="boolean"?i.canDrag:typeof i.canDrag=="function"?i.canDrag(c):!0}isDragging(i,c){const u=this.spec,d=this.monitor,{isDragging:m}=u;return m?m(d):c===i.getSourceId()}endDrag(){const i=this.spec,c=this.monitor,u=this.connector,{end:d}=i;d&&d(c.getItem(),c),u.reconnect()}constructor(i,c,u){this.spec=i,this.monitor=c,this.connector=u}}function nv(l,i,c){const u=j.useMemo(()=>new av(l,i,c),[i,c]);return j.useEffect(()=>{u.spec=l},[l]),u}function sv(l){return j.useMemo(()=>{const i=l.type;return Re(i!=null,"spec.type must be defined"),i},[l])}function rv(l,i,c){const u=zs(),d=nv(l,i,c),m=sv(l);$n(function(){if(m!=null){const[b,T]=Zp(m,d,u);return i.receiveHandlerId(b),c.receiveHandlerId(b),T}},[u,i,c,d,m])}function iv(l,i){const c=Zm(l);Re(!c.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const u=tv(),d=ev(c.options,c.previewOptions);return rv(c,u,d),[Qm(c.collect,u,d),Yp(d),Fp(d)]}function lv(l){return j.useMemo(()=>l.hooks.dropTarget(),[l])}function ov(l){const i=zs(),c=j.useMemo(()=>new Jp(i.getBackend()),[i]);return $n(()=>(c.dropTargetOptions=l||null,c.reconnect(),()=>c.disconnectDropTarget()),[l]),c}function cv(){const l=zs();return j.useMemo(()=>new Ip(l),[l])}function uv(l){const{accept:i}=l;return j.useMemo(()=>(Re(l.accept!=null,"accept must be defined"),Array.isArray(i)?i:[i]),[i])}class dv{canDrop(){const i=this.spec,c=this.monitor;return i.canDrop?i.canDrop(c.getItem(),c):!0}hover(){const i=this.spec,c=this.monitor;i.hover&&i.hover(c.getItem(),c)}drop(){const i=this.spec,c=this.monitor;if(i.drop)return i.drop(c.getItem(),c)}constructor(i,c){this.spec=i,this.monitor=c}}function fv(l,i){const c=j.useMemo(()=>new dv(l,i),[i]);return j.useEffect(()=>{c.spec=l},[l]),c}function mv(l,i,c){const u=zs(),d=fv(l,i),m=uv(l);$n(function(){const[b,T]=Qp(m,d,u);return i.receiveHandlerId(b),c.receiveHandlerId(b),T},[u,i,d,c,m.map(w=>w.toString()).join("|")])}function hv(l,i){const c=Zm(l),u=cv(),d=ov(c.options);return mv(c,u,d),[Qm(c.collect,u,d),lv(d)]}function Wm(l){let i=null;return()=>(i==null&&(i=l()),i)}function gv(l,i){return l.filter(c=>c!==i)}function pv(l,i){const c=new Set,u=m=>c.add(m);l.forEach(u),i.forEach(u);const d=[];return c.forEach(m=>d.push(m)),d}class vv{enter(i){const c=this.entered.length,u=d=>this.isNodeInDocument(d)&&(!d.contains||d.contains(i));return this.entered=pv(this.entered.filter(u),[i]),c===0&&this.entered.length>0}leave(i){const c=this.entered.length;return this.entered=gv(this.entered.filter(this.isNodeInDocument),i),c>0&&this.entered.length===0}reset(){this.entered=[]}constructor(i){this.entered=[],this.isNodeInDocument=i}}class xv{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(i=>{Object.defineProperty(this.item,i,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${i}" until the drop event.`),null}})})}loadDataTransfer(i){if(i){const c={};Object.keys(this.config.exposeProperties).forEach(u=>{const d=this.config.exposeProperties[u];d!=null&&(c[u]={value:d(i,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,c)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(i,c){return c===i.getSourceId()}endDrag(){}constructor(i){this.config=i,this.item={},this.initializeExposedProperties()}}const Km="__NATIVE_FILE__",Pm="__NATIVE_URL__",Jm="__NATIVE_TEXT__",eh="__NATIVE_HTML__",Om=Object.freeze(Object.defineProperty({__proto__:null,FILE:Km,HTML:eh,TEXT:Jm,URL:Pm},Symbol.toStringTag,{value:"Module"}));function Tc(l,i,c){const u=i.reduce((d,m)=>d||l.getData(m),"");return u??c}const Rc={[Km]:{exposeProperties:{files:l=>Array.prototype.slice.call(l.files),items:l=>l.items,dataTransfer:l=>l},matchesTypes:["Files"]},[eh]:{exposeProperties:{html:(l,i)=>Tc(l,i,""),dataTransfer:l=>l},matchesTypes:["Html","text/html"]},[Pm]:{exposeProperties:{urls:(l,i)=>Tc(l,i,"").split(`
`),dataTransfer:l=>l},matchesTypes:["Url","text/uri-list"]},[Jm]:{exposeProperties:{text:(l,i)=>Tc(l,i,""),dataTransfer:l=>l},matchesTypes:["Text","text/plain"]}};function bv(l,i){const c=Rc[l];if(!c)throw new Error(`native type ${l} has no configuration`);const u=new xv(c);return u.loadDataTransfer(i),u}function _c(l){if(!l)return null;const i=Array.prototype.slice.call(l.types||[]);return Object.keys(Rc).filter(c=>{const u=Rc[c];return u!=null&&u.matchesTypes?u.matchesTypes.some(d=>i.indexOf(d)>-1):!1})[0]||null}const yv=Wm(()=>/firefox/i.test(navigator.userAgent)),th=Wm(()=>!!window.safari);class km{interpolate(i){const{xs:c,ys:u,c1s:d,c2s:m,c3s:w}=this;let b=c.length-1;if(i===c[b])return u[b];let T=0,S=w.length-1,M;for(;T<=S;){M=Math.floor(.5*(T+S));const v=c[M];if(v<i)T=M+1;else if(v>i)S=M-1;else return u[M]}b=Math.max(0,S);const k=i-c[b],h=k*k;return u[b]+d[b]*k+m[b]*h+w[b]*k*h}constructor(i,c){const{length:u}=i,d=[];for(let v=0;v<u;v++)d.push(v);d.sort((v,y)=>i[v]<i[y]?-1:1);const m=[],w=[];let b,T;for(let v=0;v<u-1;v++)b=i[v+1]-i[v],T=c[v+1]-c[v],m.push(b),w.push(T/b);const S=[w[0]];for(let v=0;v<m.length-1;v++){const y=w[v],x=w[v+1];if(y*x<=0)S.push(0);else{b=m[v];const _=m[v+1],le=b+_;S.push(3*le/((le+_)/y+(le+b)/x))}}S.push(w[w.length-1]);const M=[],k=[];let h;for(let v=0;v<S.length-1;v++){h=w[v];const y=S[v],x=1/m[v],_=y+S[v+1]-h-h;M.push((h-y-_)*x),k.push(_*x*x)}this.xs=i,this.ys=c,this.c1s=S,this.c2s=M,this.c3s=k}}const jv=1;function ah(l){const i=l.nodeType===jv?l:l.parentElement;if(!i)return null;const{top:c,left:u}=i.getBoundingClientRect();return{x:u,y:c}}function rl(l){return{x:l.clientX,y:l.clientY}}function wv(l){var i;return l.nodeName==="IMG"&&(yv()||!(!((i=document.documentElement)===null||i===void 0)&&i.contains(l)))}function Nv(l,i,c,u){let d=l?i.width:c,m=l?i.height:u;return th()&&l&&(m/=window.devicePixelRatio,d/=window.devicePixelRatio),{dragPreviewWidth:d,dragPreviewHeight:m}}function Sv(l,i,c,u,d){const m=wv(i),b=ah(m?l:i),T={x:c.x-b.x,y:c.y-b.y},{offsetWidth:S,offsetHeight:M}=l,{anchorX:k,anchorY:h}=u,{dragPreviewWidth:v,dragPreviewHeight:y}=Nv(m,i,S,M),x=()=>{let fe=new km([0,.5,1],[T.y,T.y/M*y,T.y+y-M]).interpolate(h);return th()&&m&&(fe+=(window.devicePixelRatio-1)*y),fe},_=()=>new km([0,.5,1],[T.x,T.x/S*v,T.x+v-S]).interpolate(k),{offsetX:le,offsetY:Z}=d,z=le===0||le,ae=Z===0||Z;return{x:z?le:_(),y:ae?Z:x()}}let Cv=class{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var i;return!((i=this.globalContext)===null||i===void 0)&&i.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var i;return((i=this.optionsArgs)===null||i===void 0?void 0:i.rootElement)||this.window}constructor(i,c){this.ownerDocument=null,this.globalContext=i,this.optionsArgs=c}};function Tv(l,i,c){return i in l?Object.defineProperty(l,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):l[i]=c,l}function Dm(l){for(var i=1;i<arguments.length;i++){var c=arguments[i]!=null?arguments[i]:{},u=Object.keys(c);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(c).filter(function(d){return Object.getOwnPropertyDescriptor(c,d).enumerable}))),u.forEach(function(d){Tv(l,d,c[d])})}return l}class _v{profile(){var i,c;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((i=this.dragStartSourceIds)===null||i===void 0?void 0:i.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((c=this.dragOverTargetIds)===null||c===void 0?void 0:c.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const i=this.rootElement;if(i!==void 0){if(i.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");i.__isReactDndBackendSetUp=!0,this.addEventListeners(i)}}teardown(){const i=this.rootElement;if(i!==void 0&&(i.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var c;(c=this.window)===null||c===void 0||c.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(i,c,u){return this.sourcePreviewNodeOptions.set(i,u),this.sourcePreviewNodes.set(i,c),()=>{this.sourcePreviewNodes.delete(i),this.sourcePreviewNodeOptions.delete(i)}}connectDragSource(i,c,u){this.sourceNodes.set(i,c),this.sourceNodeOptions.set(i,u);const d=w=>this.handleDragStart(w,i),m=w=>this.handleSelectStart(w);return c.setAttribute("draggable","true"),c.addEventListener("dragstart",d),c.addEventListener("selectstart",m),()=>{this.sourceNodes.delete(i),this.sourceNodeOptions.delete(i),c.removeEventListener("dragstart",d),c.removeEventListener("selectstart",m),c.setAttribute("draggable","false")}}connectDropTarget(i,c){const u=w=>this.handleDragEnter(w,i),d=w=>this.handleDragOver(w,i),m=w=>this.handleDrop(w,i);return c.addEventListener("dragenter",u),c.addEventListener("dragover",d),c.addEventListener("drop",m),()=>{c.removeEventListener("dragenter",u),c.removeEventListener("dragover",d),c.removeEventListener("drop",m)}}addEventListeners(i){i.addEventListener&&(i.addEventListener("dragstart",this.handleTopDragStart),i.addEventListener("dragstart",this.handleTopDragStartCapture,!0),i.addEventListener("dragend",this.handleTopDragEndCapture,!0),i.addEventListener("dragenter",this.handleTopDragEnter),i.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),i.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),i.addEventListener("dragover",this.handleTopDragOver),i.addEventListener("dragover",this.handleTopDragOverCapture,!0),i.addEventListener("drop",this.handleTopDrop),i.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(i){i.removeEventListener&&(i.removeEventListener("dragstart",this.handleTopDragStart),i.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),i.removeEventListener("dragend",this.handleTopDragEndCapture,!0),i.removeEventListener("dragenter",this.handleTopDragEnter),i.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),i.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),i.removeEventListener("dragover",this.handleTopDragOver),i.removeEventListener("dragover",this.handleTopDragOverCapture,!0),i.removeEventListener("drop",this.handleTopDrop),i.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const i=this.monitor.getSourceId(),c=this.sourceNodeOptions.get(i);return Dm({dropEffect:this.altKeyPressed?"copy":"move"},c||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const i=this.monitor.getSourceId(),c=this.sourcePreviewNodeOptions.get(i);return Dm({anchorX:.5,anchorY:.5,captureDraggingState:!1},c||{})}isDraggingNativeItem(){const i=this.monitor.getItemType();return Object.keys(Om).some(c=>Om[c]===i)}beginDragNativeItem(i,c){this.clearCurrentDragSourceNode(),this.currentNativeSource=bv(i,c),this.currentNativeHandle=this.registry.addSource(i,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(i){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=i;const c=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var u;return(u=this.rootElement)===null||u===void 0?void 0:u.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},c)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var i;(i=this.window)===null||i===void 0||i.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(i,c){i.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(c))}handleDragEnter(i,c){this.dragEnterTargetIds.unshift(c)}handleDragOver(i,c){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(c)}handleDrop(i,c){this.dropTargetIds.unshift(c)}constructor(i,c,u){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=d=>{const m=this.sourceNodes.get(d);return m&&ah(m)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=d=>!!(d&&this.document&&this.document.body&&this.document.body.contains(d)),this.endDragIfSourceWasRemovedFromDOM=()=>{const d=this.currentDragSourceNode;d==null||this.isNodeInDocument(d)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=d=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(d||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=d=>{if(d.defaultPrevented)return;const{dragStartSourceIds:m}=this;this.dragStartSourceIds=null;const w=rl(d);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(m||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:w});const{dataTransfer:b}=d,T=_c(b);if(this.monitor.isDragging()){if(b&&typeof b.setDragImage=="function"){const M=this.monitor.getSourceId(),k=this.sourceNodes.get(M),h=this.sourcePreviewNodes.get(M)||k;if(h){const{anchorX:v,anchorY:y,offsetX:x,offsetY:_}=this.getCurrentSourcePreviewNodeOptions(),z=Sv(k,h,w,{anchorX:v,anchorY:y},{offsetX:x,offsetY:_});b.setDragImage(h,z.x,z.y)}}try{b==null||b.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(d.target);const{captureDraggingState:S}=this.getCurrentSourcePreviewNodeOptions();S?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(T)this.beginDragNativeItem(T);else{if(b&&!b.types&&(d.target&&!d.target.hasAttribute||!d.target.hasAttribute("draggable")))return;d.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=d=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var m;(m=this.currentNativeSource)===null||m===void 0||m.loadDataTransfer(d.dataTransfer)}if(!this.enterLeaveCounter.enter(d.target)||this.monitor.isDragging())return;const{dataTransfer:b}=d,T=_c(b);T&&this.beginDragNativeItem(T,b)},this.handleTopDragEnter=d=>{const{dragEnterTargetIds:m}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=d.altKey,m.length>0&&this.actions.hover(m,{clientOffset:rl(d)}),m.some(b=>this.monitor.canDropOnTarget(b))&&(d.preventDefault(),d.dataTransfer&&(d.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=d=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var m;(m=this.currentNativeSource)===null||m===void 0||m.loadDataTransfer(d.dataTransfer)}},this.handleTopDragOver=d=>{const{dragOverTargetIds:m}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){d.preventDefault(),d.dataTransfer&&(d.dataTransfer.dropEffect="none");return}this.altKeyPressed=d.altKey,this.lastClientOffset=rl(d),this.scheduleHover(m),(m||[]).some(b=>this.monitor.canDropOnTarget(b))?(d.preventDefault(),d.dataTransfer&&(d.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?d.preventDefault():(d.preventDefault(),d.dataTransfer&&(d.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=d=>{this.isDraggingNativeItem()&&d.preventDefault(),this.enterLeaveCounter.leave(d.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=d=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var m;d.preventDefault(),(m=this.currentNativeSource)===null||m===void 0||m.loadDataTransfer(d.dataTransfer)}else _c(d.dataTransfer)&&d.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=d=>{const{dropTargetIds:m}=this;this.dropTargetIds=[],this.actions.hover(m,{clientOffset:rl(d)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=d=>{const m=d.target;typeof m.dragDrop=="function"&&(m.tagName==="INPUT"||m.tagName==="SELECT"||m.tagName==="TEXTAREA"||m.isContentEditable||(d.preventDefault(),m.dragDrop()))},this.options=new Cv(c,u),this.actions=i.getActions(),this.monitor=i.getMonitor(),this.registry=i.getRegistry(),this.enterLeaveCounter=new vv(this.isNodeInDocument)}}const Ev=function(i,c,u){return new _v(i,c,u)};var Sn;(function(l){l.mouse="mouse",l.touch="touch",l.keyboard="keyboard"})(Sn||(Sn={}));class Ov{get delay(){var i;return(i=this.args.delay)!==null&&i!==void 0?i:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var i;return(i=this.args.ignoreContextMenu)!==null&&i!==void 0?i:!1}get enableHoverOutsideTarget(){var i;return(i=this.args.enableHoverOutsideTarget)!==null&&i!==void 0?i:!1}get enableKeyboardEvents(){var i;return(i=this.args.enableKeyboardEvents)!==null&&i!==void 0?i:!1}get enableMouseEvents(){var i;return(i=this.args.enableMouseEvents)!==null&&i!==void 0?i:!1}get enableTouchEvents(){var i;return(i=this.args.enableTouchEvents)!==null&&i!==void 0?i:!0}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var i,c,u,d;return(d=(u=(i=this.args)===null||i===void 0?void 0:i.delayTouchStart)!==null&&u!==void 0?u:(c=this.args)===null||c===void 0?void 0:c.delay)!==null&&d!==void 0?d:0}get delayMouseStart(){var i,c,u,d;return(d=(u=(i=this.args)===null||i===void 0?void 0:i.delayMouseStart)!==null&&u!==void 0?u:(c=this.args)===null||c===void 0?void 0:c.delay)!==null&&d!==void 0?d:0}get window(){if(this.context&&this.context.window)return this.context.window;if(typeof window<"u")return window}get document(){var i;if(!((i=this.context)===null||i===void 0)&&i.document)return this.context.document;if(this.window)return this.window.document}get rootElement(){var i;return((i=this.args)===null||i===void 0?void 0:i.rootElement)||this.document}constructor(i,c){this.args=i,this.context=c}}function kv(l,i,c,u){return Math.sqrt(Math.pow(Math.abs(c-l),2)+Math.pow(Math.abs(u-i),2))}function Dv(l,i,c,u,d){if(!d)return!1;const m=Math.atan2(u-i,c-l)*180/Math.PI+180;for(let w=0;w<d.length;++w){const b=d[w];if(b&&(b.start==null||m>=b.start)&&(b.end==null||m<=b.end))return!0}return!1}const Mv={Left:1},Av={Left:0};function Ec(l){return l.button===void 0||l.button===Av.Left}function Rv(l){return l.buttons===void 0||(l.buttons&Mv.Left)===0}function nh(l){return!!l.targetTouches}const Lv=1;function zv(l){const i=l.nodeType===Lv?l:l.parentElement;if(!i)return;const{top:c,left:u}=i.getBoundingClientRect();return{x:u,y:c}}function Bv(l,i){if(l.targetTouches.length===1)return ll(l.targetTouches[0]);if(i&&l.touches.length===1&&l.touches[0].target===i.target)return ll(l.touches[0])}function ll(l,i){return nh(l)?Bv(l,i):{x:l.clientX,y:l.clientY}}const Mm=(()=>{let l=!1;try{addEventListener("test",()=>{},Object.defineProperty({},"passive",{get(){return l=!0,!0}}))}catch{}return l})(),qr={[Sn.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[Sn.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[Sn.keyboard]:{keydown:"keydown"}};class Fr{profile(){var i;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:((i=this.dragOverTargetIds)===null||i===void 0?void 0:i.length)||0}}get document(){return this.options.document}setup(){const i=this.options.rootElement;i&&(Re(!Fr.isSetUp,"Cannot have two Touch backends at the same time."),Fr.isSetUp=!0,this.addEventListener(i,"start",this.getTopMoveStartHandler()),this.addEventListener(i,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(i,"move",this.handleTopMove),this.addEventListener(i,"move",this.handleTopMoveCapture,!0),this.addEventListener(i,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(i,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(i,"keydown",this.handleCancelOnEscape,!0))}teardown(){const i=this.options.rootElement;i&&(Fr.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(i,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(i,"start",this.handleTopMoveStart),this.removeEventListener(i,"move",this.handleTopMoveCapture,!0),this.removeEventListener(i,"move",this.handleTopMove),this.removeEventListener(i,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(i,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(i,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(i,c,u,d=!1){const m=Mm?{capture:d,passive:!1}:d;this.listenerTypes.forEach(function(w){const b=qr[w][c];b&&i.addEventListener(b,u,m)})}removeEventListener(i,c,u,d=!1){const m=Mm?{capture:d,passive:!1}:d;this.listenerTypes.forEach(function(w){const b=qr[w][c];b&&i.removeEventListener(b,u,m)})}connectDragSource(i,c){const u=this.handleMoveStart.bind(this,i);return this.sourceNodes.set(i,c),this.addEventListener(c,"start",u),()=>{this.sourceNodes.delete(i),this.removeEventListener(c,"start",u)}}connectDragPreview(i,c,u){return this.sourcePreviewNodeOptions.set(i,u),this.sourcePreviewNodes.set(i,c),()=>{this.sourcePreviewNodes.delete(i),this.sourcePreviewNodeOptions.delete(i)}}connectDropTarget(i,c){const u=this.options.rootElement;if(!this.document||!u)return()=>{};const d=m=>{if(!this.document||!u||!this.monitor.isDragging())return;let w;switch(m.type){case qr.mouse.move:w={x:m.clientX,y:m.clientY};break;case qr.touch.move:var b,T;w={x:((b=m.touches[0])===null||b===void 0?void 0:b.clientX)||0,y:((T=m.touches[0])===null||T===void 0?void 0:T.clientY)||0};break}const S=w!=null?this.document.elementFromPoint(w.x,w.y):void 0,M=S&&c.contains(S);if(S===c||M)return this.handleMove(m,i)};return this.addEventListener(this.document.body,"move",d),this.targetNodes.set(i,c),()=>{this.document&&(this.targetNodes.delete(i),this.removeEventListener(this.document.body,"move",d))}}getTopMoveStartHandler(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}installSourceNodeRemovalObserver(i){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=i,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{i&&!i.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),!(!i||!i.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(i.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(i,c,u){this.getSourceClientOffset=d=>{const m=this.sourceNodes.get(d);return m&&zv(m)},this.handleTopMoveStartCapture=d=>{Ec(d)&&(this.moveStartSourceIds=[])},this.handleMoveStart=d=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(d)},this.handleTopMoveStart=d=>{if(!Ec(d))return;const m=ll(d);m&&(nh(d)&&(this.lastTargetTouchFallback=d.targetTouches[0]),this._mouseClientOffset=m),this.waitingForDelay=!1},this.handleTopMoveStartDelay=d=>{if(!Ec(d))return;const m=d.type===qr.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,d),m),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(d,m)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(m)},this.handleTopMove=d=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;const{moveStartSourceIds:m,dragOverTargetIds:w}=this,b=this.options.enableHoverOutsideTarget,T=ll(d,this.lastTargetTouchFallback);if(!T)return;if(this._isScrolling||!this.monitor.isDragging()&&Dv(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,T.x,T.y,this.options.scrollAngleRanges)){this._isScrolling=!0;return}if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&m&&kv(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,T.x,T.y)>(this.options.touchSlop?this.options.touchSlop:0)&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(m,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;const S=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(S),this.actions.publishDragSource(),d.cancelable&&d.preventDefault();const M=(w||[]).map(y=>this.targetNodes.get(y)).filter(y=>!!y),k=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(T.x,T.y,M):this.document.elementsFromPoint(T.x,T.y),h=[];for(const y in k){if(!k.hasOwnProperty(y))continue;let x=k[y];for(x!=null&&h.push(x);x;)x=x.parentElement,x&&h.indexOf(x)===-1&&h.push(x)}const v=h.filter(y=>M.indexOf(y)>-1).map(y=>this._getDropTargetId(y)).filter(y=>!!y).filter((y,x,_)=>_.indexOf(y)===x);if(b)for(const y in this.targetNodes){const x=this.targetNodes.get(y);if(S&&x&&x.contains(S)&&v.indexOf(y)===-1){v.unshift(y);break}}v.reverse(),this.actions.hover(v,{clientOffset:T})},this._getDropTargetId=d=>{const m=this.targetNodes.keys();let w=m.next();for(;w.done===!1;){const b=w.value;if(d===this.targetNodes.get(b))return b;w=m.next()}},this.handleTopMoveEndCapture=d=>{if(this._isScrolling=!1,this.lastTargetTouchFallback=void 0,!!Rv(d)){if(!this.monitor.isDragging()||this.monitor.didDrop()){this.moveStartSourceIds=void 0;return}d.cancelable&&d.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()}},this.handleCancelOnEscape=d=>{d.key==="Escape"&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new Ov(u,c),this.actions=i.getActions(),this.monitor=i.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(Sn.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(Sn.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(Sn.keyboard)}}const Uv=function(i,c={},u={}){return new Fr(i,c,u)};var xe={},Gr={exports:{}},Hv=Gr.exports,Am;function Vv(){return Am||(Am=1,function(l,i){(function(c,u){var d="1.0.40",m="",w="?",b="function",T="undefined",S="object",M="string",k="major",h="model",v="name",y="type",x="vendor",_="version",le="architecture",Z="console",z="mobile",ae="tablet",Q="smarttv",fe="wearable",de="embedded",Y=500,J="Amazon",re="Apple",ne="ASUS",ie="BlackBerry",ce="Browser",je="Chrome",we="Edge",N="Firefox",A="Google",q="Huawei",X="LG",p="Microsoft",L="Motorola",K="Opera",ee="Samsung",$="Sharp",I="Sony",he="Xiaomi",_e="Zebra",ve="Facebook",Ue="Chromium OS",me="Mac OS",pe=" Browser",ge=function(Me,Ee){var Ce={};for(var Oe in Me)Ee[Oe]&&Ee[Oe].length%2===0?Ce[Oe]=Ee[Oe].concat(Me[Oe]):Ce[Oe]=Me[Oe];return Ce},Ae=function(Me){for(var Ee={},Ce=0;Ce<Me.length;Ce++)Ee[Me[Ce].toUpperCase()]=Me[Ce];return Ee},rt=function(Me,Ee){return typeof Me===M?nt(Ee).indexOf(nt(Me))!==-1:!1},nt=function(Me){return Me.toLowerCase()},et=function(Me){return typeof Me===M?Me.replace(/[^\d\.]/g,m).split(".")[0]:u},tt=function(Me,Ee){if(typeof Me===M)return Me=Me.replace(/^\s\s*/,m),typeof Ee===T?Me:Me.substring(0,Y)},Xe=function(Me,Ee){for(var Ce=0,Oe,wt,Ot,Ve,Ne,ht;Ce<Ee.length&&!Ne;){var Rt=Ee[Ce],Ht=Ee[Ce+1];for(Oe=wt=0;Oe<Rt.length&&!Ne&&Rt[Oe];)if(Ne=Rt[Oe++].exec(Me),Ne)for(Ot=0;Ot<Ht.length;Ot++)ht=Ne[++wt],Ve=Ht[Ot],typeof Ve===S&&Ve.length>0?Ve.length===2?typeof Ve[1]==b?this[Ve[0]]=Ve[1].call(this,ht):this[Ve[0]]=Ve[1]:Ve.length===3?typeof Ve[1]===b&&!(Ve[1].exec&&Ve[1].test)?this[Ve[0]]=ht?Ve[1].call(this,ht,Ve[2]):u:this[Ve[0]]=ht?ht.replace(Ve[1],Ve[2]):u:Ve.length===4&&(this[Ve[0]]=ht?Ve[3].call(this,ht.replace(Ve[1],Ve[2])):u):this[Ve]=ht||u;Ce+=2}},Bt=function(Me,Ee){for(var Ce in Ee)if(typeof Ee[Ce]===S&&Ee[Ce].length>0){for(var Oe=0;Oe<Ee[Ce].length;Oe++)if(rt(Ee[Ce][Oe],Me))return Ce===w?u:Ce}else if(rt(Ee[Ce],Me))return Ce===w?u:Ce;return Ee.hasOwnProperty("*")?Ee["*"]:Me},Et={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},bt={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},ga={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[_,[v,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[_,[v,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[v,_],[/opios[\/ ]+([\w\.]+)/i],[_,[v,K+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[_,[v,K+" GX"]],[/\bopr\/([\w\.]+)/i],[_,[v,K]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[_,[v,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[_,[v,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[v,_],[/quark(?:pc)?\/([-\w\.]+)/i],[_,[v,"Quark"]],[/\bddg\/([\w\.]+)/i],[_,[v,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[_,[v,"UC"+ce]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[_,[v,"WeChat"]],[/konqueror\/([\w\.]+)/i],[_,[v,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[_,[v,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[_,[v,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[_,[v,"Smart Lenovo "+ce]],[/(avast|avg)\/([\w\.]+)/i],[[v,/(.+)/,"$1 Secure "+ce],_],[/\bfocus\/([\w\.]+)/i],[_,[v,N+" Focus"]],[/\bopt\/([\w\.]+)/i],[_,[v,K+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[_,[v,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[_,[v,"Dolphin"]],[/coast\/([\w\.]+)/i],[_,[v,K+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[_,[v,"MIUI"+pe]],[/fxios\/([\w\.-]+)/i],[_,[v,N]],[/\bqihoobrowser\/?([\w\.]*)/i],[_,[v,"360"]],[/\b(qq)\/([\w\.]+)/i],[[v,/(.+)/,"$1Browser"],_],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[v,/(.+)/,"$1"+pe],_],[/samsungbrowser\/([\w\.]+)/i],[_,[v,ee+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[_,[v,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[v,"Sogou Mobile"],_],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[v,_],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[v],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[_,v],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[v,ve],_],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[v,_],[/\bgsa\/([\w\.]+) .*safari\//i],[_,[v,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[_,[v,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[_,[v,je+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[v,je+" WebView"],_],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[_,[v,"Android "+ce]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[v,_],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[_,[v,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[_,v],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[v,[_,Bt,Et]],[/(webkit|khtml)\/([\w\.]+)/i],[v,_],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[v,"Netscape"],_],[/(wolvic|librewolf)\/([\w\.]+)/i],[v,_],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[_,[v,N+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[v,[_,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[v,[_,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[le,"amd64"]],[/(ia32(?=;))/i],[[le,nt]],[/((?:i[346]|x)86)[;\)]/i],[[le,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[le,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[le,"armhf"]],[/windows (ce|mobile); ppc;/i],[[le,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[le,/ower/,m,nt]],[/(sun4\w)[;\)]/i],[[le,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[le,nt]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[h,[x,ee],[y,ae]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[h,[x,ee],[y,z]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[h,[x,re],[y,z]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[h,[x,re],[y,ae]],[/(macintosh);/i],[h,[x,re]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[h,[x,$],[y,z]],[/(?:honor)([-\w ]+)[;\)]/i],[h,[x,"Honor"],[y,z]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[h,[x,q],[y,ae]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[h,[x,q],[y,z]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[h,/_/g," "],[x,he],[y,z]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[h,/_/g," "],[x,he],[y,ae]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[h,[x,"OPPO"],[y,z]],[/\b(opd2\d{3}a?) bui/i],[h,[x,"OPPO"],[y,ae]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[h,[x,"Vivo"],[y,z]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[h,[x,"Realme"],[y,z]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[h,[x,L],[y,z]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[h,[x,L],[y,ae]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[h,[x,X],[y,ae]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[h,[x,X],[y,z]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[h,[x,"Lenovo"],[y,ae]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[h,/_/g," "],[x,"Nokia"],[y,z]],[/(pixel c)\b/i],[h,[x,A],[y,ae]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[h,[x,A],[y,z]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[h,[x,I],[y,z]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[h,"Xperia Tablet"],[x,I],[y,ae]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[h,[x,"OnePlus"],[y,z]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[h,[x,J],[y,ae]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[h,/(.+)/g,"Fire Phone $1"],[x,J],[y,z]],[/(playbook);[-\w\),; ]+(rim)/i],[h,x,[y,ae]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[h,[x,ie],[y,z]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[h,[x,ne],[y,ae]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[h,[x,ne],[y,z]],[/(nexus 9)/i],[h,[x,"HTC"],[y,ae]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[x,[h,/_/g," "],[y,z]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[h,[x,"TCL"],[y,ae]],[/(itel) ((\w+))/i],[[x,nt],h,[y,Bt,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[h,[x,"Acer"],[y,ae]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[h,[x,"Meizu"],[y,z]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[h,[x,"Ulefone"],[y,z]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[h,[x,"Energizer"],[y,z]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[h,[x,"Cat"],[y,z]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[h,[x,"Smartfren"],[y,z]],[/droid.+; (a(?:015|06[35]|142p?))/i],[h,[x,"Nothing"],[y,z]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (imo) ((?!tab)[\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[x,h,[y,z]],[/(imo) (tab \w+)/i,/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[x,h,[y,ae]],[/(surface duo)/i],[h,[x,p],[y,ae]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[h,[x,"Fairphone"],[y,z]],[/(u304aa)/i],[h,[x,"AT&T"],[y,z]],[/\bsie-(\w*)/i],[h,[x,"Siemens"],[y,z]],[/\b(rct\w+) b/i],[h,[x,"RCA"],[y,ae]],[/\b(venue[\d ]{2,7}) b/i],[h,[x,"Dell"],[y,ae]],[/\b(q(?:mv|ta)\w+) b/i],[h,[x,"Verizon"],[y,ae]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[h,[x,"Barnes & Noble"],[y,ae]],[/\b(tm\d{3}\w+) b/i],[h,[x,"NuVision"],[y,ae]],[/\b(k88) b/i],[h,[x,"ZTE"],[y,ae]],[/\b(nx\d{3}j) b/i],[h,[x,"ZTE"],[y,z]],[/\b(gen\d{3}) b.+49h/i],[h,[x,"Swiss"],[y,z]],[/\b(zur\d{3}) b/i],[h,[x,"Swiss"],[y,ae]],[/\b((zeki)?tb.*\b) b/i],[h,[x,"Zeki"],[y,ae]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[x,"Dragon Touch"],h,[y,ae]],[/\b(ns-?\w{0,9}) b/i],[h,[x,"Insignia"],[y,ae]],[/\b((nxa|next)-?\w{0,9}) b/i],[h,[x,"NextBook"],[y,ae]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[x,"Voice"],h,[y,z]],[/\b(lvtel\-)?(v1[12]) b/i],[[x,"LvTel"],h,[y,z]],[/\b(ph-1) /i],[h,[x,"Essential"],[y,z]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[h,[x,"Envizen"],[y,ae]],[/\b(trio[-\w\. ]+) b/i],[h,[x,"MachSpeed"],[y,ae]],[/\btu_(1491) b/i],[h,[x,"Rotor"],[y,ae]],[/(shield[\w ]+) b/i],[h,[x,"Nvidia"],[y,ae]],[/(sprint) (\w+)/i],[x,h,[y,z]],[/(kin\.[onetw]{3})/i],[[h,/\./g," "],[x,p],[y,z]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[h,[x,_e],[y,ae]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[h,[x,_e],[y,z]],[/smart-tv.+(samsung)/i],[x,[y,Q]],[/hbbtv.+maple;(\d+)/i],[[h,/^/,"SmartTV"],[x,ee],[y,Q]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[x,X],[y,Q]],[/(apple) ?tv/i],[x,[h,re+" TV"],[y,Q]],[/crkey/i],[[h,je+"cast"],[x,A],[y,Q]],[/droid.+aft(\w+)( bui|\))/i],[h,[x,J],[y,Q]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[h,[x,$],[y,Q]],[/(bravia[\w ]+)( bui|\))/i],[h,[x,I],[y,Q]],[/(mitv-\w{5}) bui/i],[h,[x,he],[y,Q]],[/Hbbtv.*(technisat) (.*);/i],[x,h,[y,Q]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[x,tt],[h,tt],[y,Q]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[y,Q]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[x,h,[y,Z]],[/droid.+; (shield) bui/i],[h,[x,"Nvidia"],[y,Z]],[/(playstation [345portablevi]+)/i],[h,[x,I],[y,Z]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[h,[x,p],[y,Z]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[h,[x,ee],[y,fe]],[/((pebble))app/i],[x,h,[y,fe]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[h,[x,re],[y,fe]],[/droid.+; (glass) \d/i],[h,[x,A],[y,fe]],[/droid.+; (wt63?0{2,3})\)/i],[h,[x,_e],[y,fe]],[/droid.+; (glass) \d/i],[h,[x,A],[y,fe]],[/(pico) (4|neo3(?: link|pro)?)/i],[x,h,[y,fe]],[/; (quest( \d| pro)?)/i],[h,[x,ve],[y,fe]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[x,[y,de]],[/(aeobc)\b/i],[h,[x,J],[y,de]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[h,[y,z]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[h,[y,ae]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[y,ae]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[y,z]],[/(android[-\w\. ]{0,9});.+buil/i],[h,[x,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[_,[v,we+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[v,_],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[_,[v,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[v,_],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[_,v]],os:[[/microsoft (windows) (vista|xp)/i],[v,_],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[v,[_,Bt,bt]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[_,Bt,bt],[v,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[_,/_/g,"."],[v,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[v,me],[_,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[_,v],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[v,_],[/\(bb(10);/i],[_,[v,ie]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[_,[v,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[_,[v,N+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[_,[v,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[_,[v,"watchOS"]],[/crkey\/([\d\.]+)/i],[_,[v,je+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[v,Ue],_],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[v,_],[/(sunos) ?([\w\.\d]*)/i],[[v,"Solaris"],_],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[v,_]]},ut=function(Me,Ee){if(typeof Me===S&&(Ee=Me,Me=u),!(this instanceof ut))return new ut(Me,Ee).getResult();var Ce=typeof c!==T&&c.navigator?c.navigator:u,Oe=Me||(Ce&&Ce.userAgent?Ce.userAgent:m),wt=Ce&&Ce.userAgentData?Ce.userAgentData:u,Ot=Ee?ge(ga,Ee):ga,Ve=Ce&&Ce.userAgent==Oe;return this.getBrowser=function(){var Ne={};return Ne[v]=u,Ne[_]=u,Xe.call(Ne,Oe,Ot.browser),Ne[k]=et(Ne[_]),Ve&&Ce&&Ce.brave&&typeof Ce.brave.isBrave==b&&(Ne[v]="Brave"),Ne},this.getCPU=function(){var Ne={};return Ne[le]=u,Xe.call(Ne,Oe,Ot.cpu),Ne},this.getDevice=function(){var Ne={};return Ne[x]=u,Ne[h]=u,Ne[y]=u,Xe.call(Ne,Oe,Ot.device),Ve&&!Ne[y]&&wt&&wt.mobile&&(Ne[y]=z),Ve&&Ne[h]=="Macintosh"&&Ce&&typeof Ce.standalone!==T&&Ce.maxTouchPoints&&Ce.maxTouchPoints>2&&(Ne[h]="iPad",Ne[y]=ae),Ne},this.getEngine=function(){var Ne={};return Ne[v]=u,Ne[_]=u,Xe.call(Ne,Oe,Ot.engine),Ne},this.getOS=function(){var Ne={};return Ne[v]=u,Ne[_]=u,Xe.call(Ne,Oe,Ot.os),Ve&&!Ne[v]&&wt&&wt.platform&&wt.platform!="Unknown"&&(Ne[v]=wt.platform.replace(/chrome os/i,Ue).replace(/macos/i,me)),Ne},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Oe},this.setUA=function(Ne){return Oe=typeof Ne===M&&Ne.length>Y?tt(Ne,Y):Ne,this},this.setUA(Oe),this};ut.VERSION=d,ut.BROWSER=Ae([v,_,k]),ut.CPU=Ae([le]),ut.DEVICE=Ae([h,x,y,Z,z,Q,ae,fe,de]),ut.ENGINE=ut.OS=Ae([v,_]),l.exports&&(i=l.exports=ut),i.UAParser=ut;var yt=typeof c!==T&&(c.jQuery||c.Zepto);if(yt&&!yt.ua){var jt=new ut;yt.ua=jt.getResult(),yt.ua.get=function(){return jt.getUA()},yt.ua.set=function(Me){jt.setUA(Me);var Ee=jt.getResult();for(var Ce in Ee)yt.ua[Ce]=Ee[Ce]}}})(typeof window=="object"?window:Hv)}(Gr,Gr.exports)),Gr.exports}var Rm;function qv(){if(Rm)return xe;Rm=1,Object.defineProperty(xe,"__esModule",{value:!0});function l(B){return B&&typeof B=="object"&&"default"in B?B.default:B}var i=ol(),c=l(i),u=Vv(),d=new u,m=d.getBrowser(),w=d.getCPU(),b=d.getDevice(),T=d.getEngine(),S=d.getOS(),M=d.getUA(),k=function(C){return d.setUA(C)},h=function(C){if(!C){console.error("No userAgent string was provided");return}var O=new u(C);return{UA:O,browser:O.getBrowser(),cpu:O.getCPU(),device:O.getDevice(),engine:O.getEngine(),os:O.getOS(),ua:O.getUA(),setUserAgent:function(oe){return O.setUA(oe)}}},v=Object.freeze({ClientUAInstance:d,browser:m,cpu:w,device:b,engine:T,os:S,ua:M,setUa:k,parseUserAgent:h});function y(B,C){var O=Object.keys(B);if(Object.getOwnPropertySymbols){var W=Object.getOwnPropertySymbols(B);C&&(W=W.filter(function(oe){return Object.getOwnPropertyDescriptor(B,oe).enumerable})),O.push.apply(O,W)}return O}function x(B){for(var C=1;C<arguments.length;C++){var O=arguments[C]!=null?arguments[C]:{};C%2?y(Object(O),!0).forEach(function(W){ae(B,W,O[W])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(O)):y(Object(O)).forEach(function(W){Object.defineProperty(B,W,Object.getOwnPropertyDescriptor(O,W))})}return B}function _(B){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_=function(C){return typeof C}:_=function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},_(B)}function le(B,C){if(!(B instanceof C))throw new TypeError("Cannot call a class as a function")}function Z(B,C){for(var O=0;O<C.length;O++){var W=C[O];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(B,W.key,W)}}function z(B,C,O){return C&&Z(B.prototype,C),B}function ae(B,C,O){return C in B?Object.defineProperty(B,C,{value:O,enumerable:!0,configurable:!0,writable:!0}):B[C]=O,B}function Q(){return Q=Object.assign||function(B){for(var C=1;C<arguments.length;C++){var O=arguments[C];for(var W in O)Object.prototype.hasOwnProperty.call(O,W)&&(B[W]=O[W])}return B},Q.apply(this,arguments)}function fe(B,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function");B.prototype=Object.create(C&&C.prototype,{constructor:{value:B,writable:!0,configurable:!0}}),C&&Y(B,C)}function de(B){return de=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},de(B)}function Y(B,C){return Y=Object.setPrototypeOf||function(W,oe){return W.__proto__=oe,W},Y(B,C)}function J(B,C){if(B==null)return{};var O={},W=Object.keys(B),oe,ze;for(ze=0;ze<W.length;ze++)oe=W[ze],!(C.indexOf(oe)>=0)&&(O[oe]=B[oe]);return O}function re(B,C){if(B==null)return{};var O=J(B,C),W,oe;if(Object.getOwnPropertySymbols){var ze=Object.getOwnPropertySymbols(B);for(oe=0;oe<ze.length;oe++)W=ze[oe],!(C.indexOf(W)>=0)&&Object.prototype.propertyIsEnumerable.call(B,W)&&(O[W]=B[W])}return O}function ne(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}function ie(B,C){if(C&&(typeof C=="object"||typeof C=="function"))return C;if(C!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ne(B)}function ce(B,C){return je(B)||we(B,C)||N(B,C)||q()}function je(B){if(Array.isArray(B))return B}function we(B,C){var O=B==null?null:typeof Symbol<"u"&&B[Symbol.iterator]||B["@@iterator"];if(O!=null){var W=[],oe=!0,ze=!1,Ye,lt;try{for(O=O.call(B);!(oe=(Ye=O.next()).done)&&(W.push(Ye.value),!(C&&W.length===C));oe=!0);}catch(Oa){ze=!0,lt=Oa}finally{try{!oe&&O.return!=null&&O.return()}finally{if(ze)throw lt}}return W}}function N(B,C){if(B){if(typeof B=="string")return A(B,C);var O=Object.prototype.toString.call(B).slice(8,-1);if(O==="Object"&&B.constructor&&(O=B.constructor.name),O==="Map"||O==="Set")return Array.from(B);if(O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return A(B,C)}}function A(B,C){(C==null||C>B.length)&&(C=B.length);for(var O=0,W=new Array(C);O<C;O++)W[O]=B[O];return W}function q(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var X={Mobile:"mobile",Tablet:"tablet",SmartTv:"smarttv",Console:"console",Wearable:"wearable",Embedded:"embedded",Browser:void 0},p={Chrome:"Chrome",Firefox:"Firefox",Opera:"Opera",Yandex:"Yandex",Safari:"Safari",InternetExplorer:"Internet Explorer",Edge:"Edge",Chromium:"Chromium",Ie:"IE",MobileSafari:"Mobile Safari",EdgeChromium:"Edge Chromium",MIUI:"MIUI Browser",SamsungBrowser:"Samsung Browser"},L={IOS:"iOS",Android:"Android",WindowsPhone:"Windows Phone",Windows:"Windows",MAC_OS:"Mac OS"},K={isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1},ee=function(C){switch(C){case X.Mobile:return{isMobile:!0};case X.Tablet:return{isTablet:!0};case X.SmartTv:return{isSmartTV:!0};case X.Console:return{isConsole:!0};case X.Wearable:return{isWearable:!0};case X.Browser:return{isBrowser:!0};case X.Embedded:return{isEmbedded:!0};default:return K}},$=function(C){return k(C)},I=function(C){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none";return C||O},he=function(){return typeof window<"u"&&(window.navigator||navigator)?window.navigator||navigator:!1},_e=function(C){var O=he();return O&&O.platform&&(O.platform.indexOf(C)!==-1||O.platform==="MacIntel"&&O.maxTouchPoints>1&&!window.MSStream)},ve=function(C,O,W,oe,ze){return{isBrowser:C,browserMajorVersion:I(O.major),browserFullVersion:I(O.version),browserName:I(O.name),engineName:I(W.name),engineVersion:I(W.version),osName:I(oe.name),osVersion:I(oe.version),userAgent:I(ze)}},Ue=function(C,O,W,oe){return x({},C,{vendor:I(O.vendor),model:I(O.model),os:I(W.name),osVersion:I(W.version),ua:I(oe)})},me=function(C,O,W,oe){return{isSmartTV:C,engineName:I(O.name),engineVersion:I(O.version),osName:I(W.name),osVersion:I(W.version),userAgent:I(oe)}},pe=function(C,O,W,oe){return{isConsole:C,engineName:I(O.name),engineVersion:I(O.version),osName:I(W.name),osVersion:I(W.version),userAgent:I(oe)}},ge=function(C,O,W,oe){return{isWearable:C,engineName:I(O.name),engineVersion:I(O.version),osName:I(W.name),osVersion:I(W.version),userAgent:I(oe)}},Ae=function(C,O,W,oe,ze){return{isEmbedded:C,vendor:I(O.vendor),model:I(O.model),engineName:I(W.name),engineVersion:I(W.version),osName:I(oe.name),osVersion:I(oe.version),userAgent:I(ze)}};function rt(B){var C=B?h(B):v,O=C.device,W=C.browser,oe=C.engine,ze=C.os,Ye=C.ua,lt=ee(O.type),Oa=lt.isBrowser,Dn=lt.isMobile,jl=lt.isTablet,ss=lt.isSmartTV,rs=lt.isConsole,tn=lt.isWearable,Mn=lt.isEmbedded;if(Oa)return ve(Oa,W,oe,ze,Ye);if(ss)return me(ss,oe,ze,Ye);if(rs)return pe(rs,oe,ze,Ye);if(Dn||jl)return Ue(lt,O,ze,Ye);if(tn)return ge(tn,oe,ze,Ye);if(Mn)return Ae(Mn,O,oe,ze,Ye)}var nt=function(C){var O=C.type;return O===X.Mobile},et=function(C){var O=C.type;return O===X.Tablet},tt=function(C){var O=C.type;return O===X.Mobile||O===X.Tablet},Xe=function(C){var O=C.type;return O===X.SmartTv},Bt=function(C){var O=C.type;return O===X.Browser},Et=function(C){var O=C.type;return O===X.Wearable},bt=function(C){var O=C.type;return O===X.Console},ga=function(C){var O=C.type;return O===X.Embedded},ut=function(C){var O=C.vendor;return I(O)},yt=function(C){var O=C.model;return I(O)},jt=function(C){var O=C.type;return I(O,"browser")},Me=function(C){var O=C.name;return O===L.Android},Ee=function(C){var O=C.name;return O===L.Windows},Ce=function(C){var O=C.name;return O===L.MAC_OS},Oe=function(C){var O=C.name;return O===L.WindowsPhone},wt=function(C){var O=C.name;return O===L.IOS},Ot=function(C){var O=C.version;return I(O)},Ve=function(C){var O=C.name;return I(O)},Ne=function(C){var O=C.name;return O===p.Chrome},ht=function(C){var O=C.name;return O===p.Firefox},Rt=function(C){var O=C.name;return O===p.Chromium},Ht=function(C){var O=C.name;return O===p.Edge},pa=function(C){var O=C.name;return O===p.Yandex},Wn=function(C){var O=C.name;return O===p.Safari||O===p.MobileSafari},Ya=function(C){var O=C.name;return O===p.MobileSafari},Cn=function(C){var O=C.name;return O===p.Opera},Fa=function(C){var O=C.name;return O===p.InternetExplorer||O===p.Ie},va=function(C){var O=C.name;return O===p.MIUI},Kn=function(C){var O=C.name;return O===p.SamsungBrowser},Tn=function(C){var O=C.version;return I(O)},_n=function(C){var O=C.major;return I(O)},Xa=function(C){var O=C.name;return I(O)},Ia=function(C){var O=C.name;return I(O)},En=function(C){var O=C.version;return I(O)},Pn=function(){var C=he(),O=C&&C.userAgent&&C.userAgent.toLowerCase();return typeof O=="string"?/electron/.test(O):!1},Nt=function(C){return typeof C=="string"&&C.indexOf("Edg/")!==-1},F=function(){var C=he();return C&&(/iPad|iPhone|iPod/.test(C.platform)||C.platform==="MacIntel"&&C.maxTouchPoints>1)&&!window.MSStream},ue=function(){return _e("iPad")},be=function(){return _e("iPhone")},kt=function(){return _e("iPod")},Ta=function(C){return I(C)};function xa(B){var C=B||v,O=C.device,W=C.browser,oe=C.os,ze=C.engine,Ye=C.ua;return{isSmartTV:Xe(O),isConsole:bt(O),isWearable:Et(O),isEmbedded:ga(O),isMobileSafari:Ya(W)||ue(),isChromium:Rt(W),isMobile:tt(O)||ue(),isMobileOnly:nt(O),isTablet:et(O)||ue(),isBrowser:Bt(O),isDesktop:Bt(O),isAndroid:Me(oe),isWinPhone:Oe(oe),isIOS:wt(oe)||ue(),isChrome:Ne(W),isFirefox:ht(W),isSafari:Wn(W),isOpera:Cn(W),isIE:Fa(W),osVersion:Ot(oe),osName:Ve(oe),fullBrowserVersion:Tn(W),browserVersion:_n(W),browserName:Xa(W),mobileVendor:ut(O),mobileModel:yt(O),engineName:Ia(ze),engineVersion:En(ze),getUA:Ta(Ye),isEdge:Ht(W)||Nt(Ye),isYandex:pa(W),deviceType:jt(O),isIOS13:F(),isIPad13:ue(),isIPhone13:be(),isIPod13:kt(),isElectron:Pn(),isEdgeChromium:Nt(Ye),isLegacyEdge:Ht(W)&&!Nt(Ye),isWindows:Ee(oe),isMacOs:Ce(oe),isMIUI:va(W),isSamsungBrowser:Kn(W)}}var Qa=Xe(b),ca=bt(b),Pt=Et(b),ba=ga(b),Za=Ya(m)||ue(),On=Rt(m),ua=tt(b)||ue(),dt=nt(b),Us=et(b)||ue(),Hs=Bt(b),_a=Bt(b),Ea=Me(S),Ir=Oe(S),Vs=wt(S)||ue(),Qr=Ne(m),hl=ht(m),Jn=Wn(m),es=Cn(m),Jt=Fa(m),qs=Ot(S),Zr=Ve(S),$a=Tn(m),Gs=_n(m),Ys=Xa(m),gl=ut(b),$r=yt(b),Vt=Ia(T),Wr=En(T),pl=Ta(M),ts=Ht(m)||Nt(M),Kr=pa(m),as=jt(b),vl=F(),qt=ue(),Fs=be(),Pr=kt(),Xs=Pn(),Wa=Nt(M),Jr=Ht(m)&&!Nt(M),ei=Ee(S),Ka=Ce(S),xl=va(m),ti=Kn(m),ai=function(C){if(!C||typeof C!="string"){console.error("No valid user agent string was provided");return}var O=h(C),W=O.device,oe=O.browser,ze=O.os,Ye=O.engine,lt=O.ua;return xa({device:W,browser:oe,os:ze,engine:Ye,ua:lt})},Is=function(C){var O=C.renderWithFragment,W=C.children,oe=re(C,["renderWithFragment","children"]);return Ea?O?c.createElement(i.Fragment,null,W):c.createElement("div",oe,W):null},bl=function(C){var O=C.renderWithFragment,W=C.children,oe=re(C,["renderWithFragment","children"]);return Hs?O?c.createElement(i.Fragment,null,W):c.createElement("div",oe,W):null},yl=function(C){var O=C.renderWithFragment,W=C.children,oe=re(C,["renderWithFragment","children"]);return Jt?O?c.createElement(i.Fragment,null,W):c.createElement("div",oe,W):null},ns=function(C){var O=C.renderWithFragment,W=C.children,oe=re(C,["renderWithFragment","children"]);return Vs?O?c.createElement(i.Fragment,null,W):c.createElement("div",oe,W):null},Qs=function(C){var O=C.renderWithFragment,W=C.children,oe=re(C,["renderWithFragment","children"]);return ua?O?c.createElement(i.Fragment,null,W):c.createElement("div",oe,W):null},Zs=function(C){var O=C.renderWithFragment,W=C.children,oe=re(C,["renderWithFragment","children"]);return Us?O?c.createElement(i.Fragment,null,W):c.createElement("div",oe,W):null},Pa=function(C){var O=C.renderWithFragment,W=C.children,oe=re(C,["renderWithFragment","children"]);return Ir?O?c.createElement(i.Fragment,null,W):c.createElement("div",oe,W):null},Ja=function(C){var O=C.renderWithFragment,W=C.children;C.viewClassName,C.style;var oe=re(C,["renderWithFragment","children","viewClassName","style"]);return dt?O?c.createElement(i.Fragment,null,W):c.createElement("div",oe,W):null},ni=function(C){var O=C.renderWithFragment,W=C.children,oe=re(C,["renderWithFragment","children"]);return Qa?O?c.createElement(i.Fragment,null,W):c.createElement("div",oe,W):null},$s=function(C){var O=C.renderWithFragment,W=C.children,oe=re(C,["renderWithFragment","children"]);return ca?O?c.createElement(i.Fragment,null,W):c.createElement("div",oe,W):null},si=function(C){var O=C.renderWithFragment,W=C.children,oe=re(C,["renderWithFragment","children"]);return Pt?O?c.createElement(i.Fragment,null,W):c.createElement("div",oe,W):null},kn=function(C){var O=C.renderWithFragment,W=C.children;C.viewClassName,C.style;var oe=C.condition,ze=re(C,["renderWithFragment","children","viewClassName","style","condition"]);return oe?O?c.createElement(i.Fragment,null,W):c.createElement("div",ze,W):null};function da(B){return function(C){fe(O,C);function O(W){var oe;return le(this,O),oe=ie(this,de(O).call(this,W)),oe.isEventListenerAdded=!1,oe.handleOrientationChange=oe.handleOrientationChange.bind(ne(oe)),oe.onOrientationChange=oe.onOrientationChange.bind(ne(oe)),oe.onPageLoad=oe.onPageLoad.bind(ne(oe)),oe.state={isLandscape:!1,isPortrait:!1},oe}return z(O,[{key:"handleOrientationChange",value:function(){this.isEventListenerAdded||(this.isEventListenerAdded=!0);var oe=window.innerWidth>window.innerHeight?90:0;this.setState({isPortrait:oe===0,isLandscape:oe===90})}},{key:"onOrientationChange",value:function(){this.handleOrientationChange()}},{key:"onPageLoad",value:function(){this.handleOrientationChange()}},{key:"componentDidMount",value:function(){(typeof window>"u"?"undefined":_(window))!==void 0&&ua&&(this.isEventListenerAdded?window.removeEventListener("load",this.onPageLoad,!1):(this.handleOrientationChange(),window.addEventListener("load",this.onPageLoad,!1)),window.addEventListener("resize",this.onOrientationChange,!1))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onOrientationChange,!1)}},{key:"render",value:function(){return c.createElement(B,Q({},this.props,{isLandscape:this.state.isLandscape,isPortrait:this.state.isPortrait}))}}]),O}(c.Component)}function Ws(){var B=i.useState(function(){var ze=window.innerWidth>window.innerHeight?90:0;return{isPortrait:ze===0,isLandscape:ze===90,orientation:ze===0?"portrait":"landscape"}}),C=ce(B,2),O=C[0],W=C[1],oe=i.useCallback(function(){var ze=window.innerWidth>window.innerHeight?90:0,Ye={isPortrait:ze===0,isLandscape:ze===90,orientation:ze===0?"portrait":"landscape"};O.orientation!==Ye.orientation&&W(Ye)},[O.orientation]);return i.useEffect(function(){return(typeof window>"u"?"undefined":_(window))!==void 0&&ua&&(oe(),window.addEventListener("load",oe,!1),window.addEventListener("resize",oe,!1)),function(){window.removeEventListener("resize",oe,!1),window.removeEventListener("load",oe,!1)}},[oe]),O}function en(B){var C=B||window.navigator.userAgent;return h(C)}function ya(B){var C=B||window.navigator.userAgent,O=en(C),W=xa(O);return[W,O]}return xe.AndroidView=Is,xe.BrowserTypes=p,xe.BrowserView=bl,xe.ConsoleView=$s,xe.CustomView=kn,xe.IEView=yl,xe.IOSView=ns,xe.MobileOnlyView=Ja,xe.MobileView=Qs,xe.OsTypes=L,xe.SmartTVView=ni,xe.TabletView=Zs,xe.WearableView=si,xe.WinPhoneView=Pa,xe.browserName=Ys,xe.browserVersion=Gs,xe.deviceDetect=rt,xe.deviceType=as,xe.engineName=Vt,xe.engineVersion=Wr,xe.fullBrowserVersion=$a,xe.getSelectorsByUserAgent=ai,xe.getUA=pl,xe.isAndroid=Ea,xe.isBrowser=Hs,xe.isChrome=Qr,xe.isChromium=On,xe.isConsole=ca,xe.isDesktop=_a,xe.isEdge=ts,xe.isEdgeChromium=Wa,xe.isElectron=Xs,xe.isEmbedded=ba,xe.isFirefox=hl,xe.isIE=Jt,xe.isIOS=Vs,xe.isIOS13=vl,xe.isIPad13=qt,xe.isIPhone13=Fs,xe.isIPod13=Pr,xe.isLegacyEdge=Jr,xe.isMIUI=xl,xe.isMacOs=Ka,xe.isMobile=ua,xe.isMobileOnly=dt,xe.isMobileSafari=Za,xe.isOpera=es,xe.isSafari=Jn,xe.isSamsungBrowser=ti,xe.isSmartTV=Qa,xe.isTablet=Us,xe.isWearable=Pt,xe.isWinPhone=Ir,xe.isWindows=ei,xe.isYandex=Kr,xe.mobileModel=$r,xe.mobileVendor=gl,xe.osName=Zr,xe.osVersion=qs,xe.parseUserAgent=h,xe.setUserAgent=$,xe.useDeviceData=en,xe.useDeviceSelectors=ya,xe.useMobileOrientation=Ws,xe.withOrientationChange=da,xe}var Lm=qv();const Bs=({size:l="default",overlay:i=!0})=>{const c={small:"w-4 h-4",default:"w-8 h-8",large:"w-12 h-12"},u=n.jsx("div",{className:`inline-block ${c[l]} animate-spin rounded-full border-4 border-solid border-current border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]`,children:n.jsx("span",{className:"!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]",children:"Loading..."})});return i?n.jsx("div",{id:"my-lists-loading-overlay",className:"fixed inset-0 bg-black bg-opacity-25 flex items-center justify-center z-50",children:n.jsx("div",{id:"my-lists-loading-modal",className:"bg-white rounded-lg p-6 shadow-xl",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"text-blue-600",children:u}),n.jsx("span",{className:"text-gray-700 font-medium",children:"Loading..."})]})})}):n.jsx("div",{className:"text-blue-600",children:u})},Gv=({onAddToFavourites:l,onAddToList:i,lists:c=[],apiUrls:u,csrfToken:d})=>{const[m,w]=j.useState(""),[b,T]=j.useState([]),[S,M]=j.useState(!1),[k,h]=j.useState(!1),v=j.useRef(null),y=j.useRef(null),x=j.useCallback(async Z=>{if(Z.length<2){T([]),h(!1);return}try{M(!0);const z=await fetch(`${u.searchCouncils}?q=${encodeURIComponent(Z)}`,{headers:{"X-CSRFToken":d}});if(!z.ok)throw new Error("Search failed");const ae=await z.json();T(ae.results||[]),h(!0)}catch(z){console.error("Search error:",z),T([]),h(!1)}finally{M(!1)}},[u.searchCouncils,d]);j.useEffect(()=>{const Z=setTimeout(()=>{x(m)},300);return()=>clearTimeout(Z)},[m,x]),j.useEffect(()=>{const Z=z=>{y.current&&!y.current.contains(z.target)&&!v.current.contains(z.target)&&h(!1)};return document.addEventListener("mousedown",Z),()=>document.removeEventListener("mousedown",Z)},[]);const _=j.useCallback(async(Z,z)=>{try{await l(Z),h(!1),w("")}catch{}},[l]),le=j.useCallback(async(Z,z,ae)=>{try{await i(Z,z),h(!1),w("")}catch{}},[i]);return n.jsxs("div",{id:"my-lists-search-section",className:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 sm:p-6",children:[n.jsxs("div",{id:"my-lists-search-header",className:"mb-4",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Find Councils"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Search for councils to add to your favourites or custom lists"})]}),n.jsxs("div",{id:"my-lists-search-input-container",className:"relative mb-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("input",{ref:v,id:"my-lists-search-input",type:"text",value:m,onChange:Z=>w(Z.target.value),className:"w-full px-4 py-3 pl-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 min-h-[44px]",placeholder:"Search councils by name, type, or location...",autoComplete:"off"}),n.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:S?n.jsx(Bs,{size:"small",overlay:!1}):n.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),k&&b.length>0&&n.jsx("div",{id:"my-lists-search-results",ref:y,className:"absolute z-50 w-full bg-white border border-gray-300 rounded-lg shadow-lg mt-1 max-h-96 overflow-y-auto",children:b.map(Z=>n.jsx("div",{className:"p-4 border-b border-gray-100 last:border-b-0 hover:bg-gray-50",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-medium text-gray-900 truncate",children:n.jsx("a",{href:`/councils/${Z.slug}/`,className:"text-blue-600 hover:text-blue-700 hover:underline",target:"_blank",rel:"noopener noreferrer",children:Z.name})}),n.jsxs("div",{className:"mt-1 text-sm text-gray-600 space-y-1",children:[Z.type&&n.jsx("div",{children:Z.type}),(Z.nation||Z.region)&&n.jsx("div",{children:Z.nation||Z.region}),Z.population&&n.jsxs("div",{children:["Population: ",Z.population.toLocaleString()]})]})]}),n.jsxs("div",{className:"flex flex-col gap-2 min-w-0",children:[n.jsxs("button",{onClick:()=>_(Z.slug,Z.name),className:"inline-flex items-center px-3 py-2 text-xs font-medium rounded-md text-blue-700 bg-blue-50 border border-blue-300 hover:bg-blue-100 transition-colors min-w-[80px] justify-center",title:"Add to favourites",children:[n.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),"Favourite"]}),c.length>0&&n.jsx("div",{className:"flex gap-1",children:n.jsxs("select",{className:"flex-1 text-xs border border-gray-300 rounded-md px-2 py-1 min-w-[100px]",onChange:z=>{z.target.value&&(le(z.target.value,Z.slug,Z.name),z.target.value="")},children:[n.jsx("option",{value:"",children:"Add to list..."}),c.filter(z=>!z.is_default).map(z=>n.jsx("option",{value:z.id,children:z.name},z.id))]})})]})]})},Z.slug))}),k&&b.length===0&&m.length>=2&&!S&&n.jsx("div",{className:"absolute z-50 w-full bg-white border border-gray-300 rounded-lg shadow-lg mt-1",children:n.jsxs("div",{className:"p-4 text-center text-gray-500",children:[n.jsx("svg",{className:"w-8 h-8 mx-auto mb-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),n.jsxs("p",{children:['No councils found matching "',m,'"']}),n.jsx("p",{className:"text-sm mt-1",children:"Try a different search term"})]})})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("svg",{className:"w-5 h-5 text-blue-500 mt-0.5 mr-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),n.jsxs("div",{className:"text-sm text-blue-800",children:[n.jsx("strong",{children:"Search Tips:"}),' Try searching by council name (e.g., "Birmingham"), type (e.g., "District"), or location (e.g., "Yorkshire"). You can add councils to your favourites or custom lists for easy access.']})]})})]})},sh=({council:l,onRemove:i,onAddToList:c,lists:u=[],showRemoveButton:d=!1,isDraggable:m=!0,listId:w=null})=>{const[b,T]=j.useState(!1),[{isDragging:S},M]=iv({type:"council",item:{slug:l.slug,name:l.name,fromListId:w},collect:h=>({isDragging:h.isDragging()}),canDrag:m}),k=S?.5:1;return n.jsxs("div",{id:`council-card-${l.slug}`,ref:m?M:null,className:`
        p-4 transition-all duration-200 cursor-${m?"move":"default"}
        ${S?"opacity-50":""}
        hover:bg-gray-50
      `,style:{opacity:k},onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1),children:[n.jsxs("div",{id:`council-card-content-${l.slug}`,className:"flex items-start gap-3",children:[m&&n.jsx("div",{id:`council-card-drag-handle-${l.slug}`,className:"flex-shrink-0 touch-manipulation",children:n.jsx("div",{className:"w-6 h-6 flex items-center justify-center text-gray-400 hover:text-gray-600",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})})}),n.jsx("div",{id:`council-card-logo-${l.slug}`,className:"flex-shrink-0",children:n.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-lg shadow-sm overflow-hidden bg-gray-100 flex items-center justify-center",children:l.logo_url?n.jsx("img",{src:l.logo_url,alt:l.name,className:"w-full h-full object-cover",loading:"lazy"}):n.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-2m-2 0H5m14 0a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2h2m0 0V9a2 2 0 012-2h2a2 2 0 012 2v10"})})})}),n.jsxs("div",{id:`council-card-info-${l.slug}`,className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-semibold text-gray-900 text-sm sm:text-base leading-tight mb-1",children:n.jsx("a",{href:`/councils/${l.slug}/`,className:"hover:text-blue-600 transition-colors",target:"_blank",rel:"noopener noreferrer",children:l.name})}),n.jsxs("div",{className:"text-xs sm:text-sm text-gray-600 space-y-1",children:[l.type&&n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-3 h-3 mr-1 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-2m-2 0H5m14 0a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2h2m0 0V9a2 2 0 012-2h2a2 2 0 012 2v10"})}),l.type]}),l.nation&&n.jsxs("div",{className:"flex items-center",children:[n.jsxs("svg",{className:"w-3 h-3 mr-1 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),l.nation]}),l.population&&n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-3 h-3 mr-1 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Population: ",parseInt(l.population).toLocaleString()]})]})]}),n.jsx("div",{id:`council-card-actions-${l.slug}`,className:`flex-shrink-0 transition-opacity duration-200 ${b||"sm:opacity-0 sm:group-hover:opacity-100"}`,children:n.jsxs("div",{className:"flex flex-col gap-2 min-w-0",children:[u.length>0&&c&&n.jsxs("select",{id:`council-card-add-to-list-${l.slug}`,className:"text-xs border border-gray-300 rounded-md px-2 py-1 min-w-[100px]",onChange:h=>{h.target.value&&(c(h.target.value,l.slug),h.target.value="")},children:[n.jsx("option",{value:"",children:"Add to list..."}),u.map(h=>n.jsx("option",{value:h.id,children:h.name},h.id))]}),d&&i&&n.jsxs("button",{id:`council-card-remove-btn-${l.slug}`,onClick:()=>i(),className:"inline-flex items-center justify-center px-2 py-1 text-xs font-medium rounded-md text-red-700 bg-red-50 border border-red-300 hover:bg-red-100 transition-colors min-h-[28px]",title:"Remove from list",children:[n.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Remove"]})]})})]}),m&&n.jsxs("div",{id:`council-card-drag-indicator-${l.slug}`,className:"mt-2 text-xs text-gray-500 flex items-center",children:[n.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),"Drag to move between lists"]})]})},Yv=({councils:l=[],onRemoveFromFavourites:i,onAddToList:c,lists:u=[]})=>{const[d,m]=j.useState("name"),[w,b]=j.useState("asc"),T=l.reduce((k,h)=>{const v=parseInt(h.population)||0;return k+v},0),S=[...l].sort((k,h)=>{let v,y;switch(d){case"population":v=parseInt(k.population)||0,y=parseInt(h.population)||0;break;case"name":default:v=k.name.toLowerCase(),y=h.name.toLowerCase();break}return typeof v=="string"?w==="asc"?v.localeCompare(y):y.localeCompare(v):w==="asc"?v-y:y-v}),M=k=>{d===k?b(w==="asc"?"desc":"asc"):(m(k),b("asc"))};return l.length===0?n.jsxs("div",{id:"my-lists-favourites-section",className:"bg-white border border-gray-200 rounded-lg shadow-sm p-6",children:[n.jsxs("div",{id:"my-lists-favourites-header-empty",className:"flex items-start mb-4",children:[n.jsx("svg",{className:"w-6 h-6 text-blue-500 mr-3 mt-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"My Favourites"}),n.jsx("p",{className:"text-gray-600",children:"Your default list for quick access to councils you follow"})]})]}),n.jsxs("div",{id:"my-lists-favourites-empty-state",className:"text-center py-8",children:[n.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No favourite councils yet"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Use the search above to find councils and add them to your favourites for quick access."})]})]}):n.jsxs("div",{id:"my-lists-favourites-section",className:"bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden",children:[n.jsx("div",{id:"my-lists-favourites-header",className:"px-4 sm:px-6 py-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-start",children:[n.jsx("svg",{className:"w-6 h-6 text-blue-500 mr-3 mt-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"My Favourites"}),n.jsxs("p",{id:"my-lists-favourites-stats",className:"text-sm text-gray-600 mt-1",children:[l.length," council",l.length!==1?"s":"","  Total population: ",T.toLocaleString()]})]})]}),n.jsxs("div",{id:"my-lists-favourites-sort-controls",className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm text-gray-500",children:"Sort by:"}),n.jsxs("select",{id:"my-lists-favourites-sort-select",value:`${d}-${w}`,onChange:k=>{const[h,v]=k.target.value.split("-");m(h),b(v)},className:"text-sm border border-gray-300 rounded-md px-2 py-1",children:[n.jsx("option",{value:"name-asc",children:"Name (A-Z)"}),n.jsx("option",{value:"name-desc",children:"Name (Z-A)"}),n.jsx("option",{value:"population-desc",children:"Population (High-Low)"}),n.jsx("option",{value:"population-asc",children:"Population (Low-High)"})]})]})]})}),n.jsx("div",{id:"my-lists-favourites-desktop-view",className:"overflow-x-auto",children:n.jsxs("table",{id:"my-lists-favourites-table",className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{id:"my-lists-favourites-table-head",className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{id:"my-lists-favourites-header-name",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>M("name"),children:n.jsxs("div",{className:"flex items-center",children:["Council Name",d==="name"&&n.jsx("svg",{className:`w-4 h-4 ml-1 ${w==="desc"?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l4-4 4 4m0 6l-4 4-4-4"})})]})}),n.jsx("th",{id:"my-lists-favourites-header-population",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>M("population"),children:n.jsxs("div",{className:"flex items-center",children:["Population",d==="population"&&n.jsx("svg",{className:`w-4 h-4 ml-1 ${w==="desc"?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l4-4 4 4m0 6l-4 4-4-4"})})]})}),n.jsx("th",{id:"my-lists-favourites-header-actions",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{id:"my-lists-favourites-table-body",className:"bg-white divide-y divide-gray-200",children:S.map(k=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:k.logo_url?n.jsx("img",{className:"h-10 w-10 rounded-lg object-cover",src:k.logo_url,alt:k.name}):n.jsx("div",{className:"h-10 w-10 rounded-lg bg-gray-200 flex items-center justify-center",children:n.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-2m-2 0H5m14 0a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2h2m0 0V9a2 2 0 012-2h2a2 2 0 012 2v10"})})})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:n.jsx("a",{href:`/councils/${k.slug}/`,className:"text-blue-600 hover:text-blue-700 hover:underline",children:k.name})}),n.jsxs("div",{className:"text-sm text-gray-500",children:[k.type,"  ",k.nation]})]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:k.population?k.population.toLocaleString():"Not available"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[u.filter(h=>!h.is_default).length>0&&n.jsxs("select",{className:"text-xs border border-gray-300 rounded-md px-2 py-1",onChange:h=>{h.target.value&&(c(h.target.value,k.slug),h.target.value="")},children:[n.jsx("option",{value:"",children:"Add to list..."}),u.filter(h=>!h.is_default).map(h=>n.jsx("option",{value:h.id,children:h.name},h.id))]}),n.jsxs("button",{onClick:()=>i(k.slug),className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-md text-red-700 bg-red-50 border border-red-300 hover:bg-red-100 transition-colors",title:"Remove from favourites",children:[n.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Remove"]})]})})]},k.slug))})]})}),n.jsx("div",{id:"my-lists-favourites-mobile-view",className:"md:hidden",children:n.jsx("div",{id:"my-lists-favourites-mobile-container",className:"divide-y divide-gray-200",children:S.map(k=>n.jsx(sh,{council:k,onRemove:()=>i(k.slug),onAddToList:c,lists:u.filter(h=>!h.is_default),showRemoveButton:!0,isDraggable:!1},k.slug))})})]})},Fv=({list:l,expanded:i=!1,onToggleExpand:c,onMoveCouncil:u,onAddToList:d,years:m=[],metricChoices:w=[],apiUrls:b})=>{var re,ne,ie;const[T,S]=j.useState(((re=m[0])==null?void 0:re.id)||""),[M,k]=j.useState(((ne=w[0])==null?void 0:ne.value)||"total-debt"),[h,v]=j.useState({values:{},total:0}),[y,x]=j.useState(!1),[_,le]=j.useState(l.councils||[]);j.useEffect(()=>{le(l.councils||[])},[l.councils,l.name]);const[{isOver:Z},z]=hv({accept:"council",drop:ce=>{ce.fromListId!==l.id&&u(ce.slug,ce.fromListId,l.id)},collect:ce=>({isOver:ce.isOver()})}),ae=j.useCallback(async()=>{if(!(!T||!M||!(b!=null&&b.listMetric)))try{x(!0);const ce=await fetch(`${b.listMetric(l.id)}?field=${M}&year=${T}`);if(!ce.ok)throw new Error("Failed to load metrics");const je=await ce.json();v(je)}catch(ce){console.error("Error loading metrics:",ce),v({values:{},total:0})}finally{x(!1)}},[T,M,l.id,b]);j.useEffect(()=>{i&&ae()},[i,ae]);const Q=j.useCallback(ce=>{le(je=>je.filter(we=>we.slug!==ce))},[]),fe=_.length,de=_.reduce((ce,je)=>{const we=parseInt(je.population)||0;return ce+we},0),Y={blue:"border-blue-200 bg-blue-50",green:"border-green-200 bg-green-50",purple:"border-purple-200 bg-purple-50",red:"border-red-200 bg-red-50",yellow:"border-yellow-200 bg-yellow-50",indigo:"border-indigo-200 bg-indigo-50",pink:"border-pink-200 bg-pink-50",gray:"border-gray-200 bg-gray-50"}[l.color]||"border-blue-200 bg-blue-50",J={blue:"text-blue-800",green:"text-green-800",purple:"text-purple-800",red:"text-red-800",yellow:"text-yellow-800",indigo:"text-indigo-800",pink:"text-pink-800",gray:"text-gray-800"}[l.color]||"text-blue-800";return n.jsxs("div",{ref:z,className:`
        bg-white border-2 rounded-lg shadow-sm overflow-hidden transition-all duration-200
        ${Z?`${Y} border-dashed`:"border-gray-200 hover:border-gray-300"}
      `,children:[n.jsxs("div",{className:"p-4 cursor-pointer hover:bg-gray-50 transition-colors",onClick:c,children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-start min-w-0 flex-1",children:[n.jsx("div",{className:`
              w-4 h-4 rounded-full flex-shrink-0 mt-1 mr-3 border-2 border-white shadow-sm
              ${Y.replace("bg-","bg-").replace("-50","-400")}
            `}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("h3",{className:"font-semibold text-gray-900 text-base leading-tight mb-1",children:l.name}),l.description&&n.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:l.description}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-4 h-4 mr-1 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-2m-2 0H5m14 0a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2h2m0 0V9a2 2 0 012-2h2a2 2 0 012 2v10"})}),fe," council",fe!==1?"s":""]}),de>0&&n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-4 h-4 mr-1 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),de.toLocaleString()," population"]})]})]})]}),n.jsx("div",{className:"flex-shrink-0 ml-2",children:n.jsx("svg",{className:`w-5 h-5 text-gray-400 transition-transform duration-200 ${i?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),Z&&n.jsx("div",{className:`mt-3 p-3 border-2 border-dashed rounded-lg ${J} ${Y}`,children:n.jsxs("div",{className:"text-center",children:[n.jsx("svg",{className:"w-8 h-8 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),n.jsxs("p",{className:"font-medium",children:['Drop council here to add to "',l.name,'"']})]})})]}),i&&n.jsxs("div",{className:"border-t border-gray-200",children:[n.jsxs("div",{className:"p-4 bg-gray-50 border-b border-gray-200",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Year:"}),n.jsx("select",{value:T,onChange:ce=>S(ce.target.value),className:"text-sm border border-gray-300 rounded-md px-2 py-1",children:m.map(ce=>n.jsx("option",{value:ce.id,children:ce.label},ce.id))})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Financial Data:"}),n.jsx("select",{value:M,onChange:ce=>k(ce.target.value),className:"text-sm border border-gray-300 rounded-md px-2 py-1 flex-1 sm:flex-none",children:w.map(([ce,je])=>n.jsx("option",{value:ce,children:je},ce))})]}),y&&n.jsx("div",{className:"flex items-center",children:n.jsx(Bs,{size:"small",overlay:!1})})]}),h.total>0&&n.jsx("div",{className:"mt-3 p-3 bg-white border border-gray-200 rounded-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Total ",(ie=w.find(([ce])=>ce===M))==null?void 0:ie[1],":"]}),n.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["",h.total.toLocaleString()]})]})})]}),fe>0?n.jsx("div",{className:"divide-y divide-gray-200",children:_.map(ce=>n.jsx(sh,{council:ce,onRemove:()=>Q(ce.slug),listId:l.id,showRemoveButton:!0,isDraggable:!0},ce.slug))}):n.jsxs("div",{className:"p-8 text-center text-gray-500",children:[n.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),n.jsx("p",{className:"font-medium text-gray-900 mb-1",children:"No councils in this list yet"}),n.jsx("p",{className:"text-sm",children:"Drag councils from your favourites or other lists, or use the search above to add councils."})]})]})]})},Xv=({lists:l=[],onMoveCouncil:i,onAddToList:c,years:u=[],metricChoices:d=[],apiUrls:m})=>{const[w,b]=j.useState(new Set),T=l.filter(h=>!h.is_default),S=h=>{const v=new Set(w);v.has(h)?v.delete(h):v.add(h),b(v)},M=T.length,k=T.reduce((h,v)=>h+(v.council_count||0),0);return T.length===0?n.jsxs("div",{id:"my-lists-custom-section",className:"bg-white border border-gray-200 rounded-lg shadow-sm p-6",children:[n.jsxs("div",{id:"my-lists-custom-header",className:"flex items-start mb-4",children:[n.jsx("svg",{className:"w-6 h-6 text-purple-500 mr-3 mt-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"My Custom Lists"}),n.jsx("p",{className:"text-gray-600",children:"Create custom lists to organize councils by region, type, or any criteria you choose"})]})]}),n.jsxs("div",{id:"my-lists-custom-empty-state",className:"text-center py-8",children:[n.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No custom lists yet"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Create your first custom list to start organizing councils by themes like:"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-6 text-sm",children:[n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsx("div",{className:"font-medium text-blue-900 mb-1",children:"By Region"}),n.jsx("div",{className:"text-blue-700",children:"North London Boroughs, Yorkshire Districts, Welsh Councils"})]}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[n.jsx("div",{className:"font-medium text-green-900 mb-1",children:"By Type"}),n.jsx("div",{className:"text-green-700",children:"Metropolitan Boroughs, County Councils, Unitary Authorities"})]}),n.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[n.jsx("div",{className:"font-medium text-purple-900 mb-1",children:"By Interest"}),n.jsx("div",{className:"text-purple-700",children:"High Debt Councils, Growing Populations, Budget Comparisons"})]})]})]})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 sm:p-6",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-start",children:[n.jsx("svg",{className:"w-6 h-6 text-purple-500 mr-3 mt-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"My Custom Lists"}),n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[M," list",M!==1?"s":""," ",k," council",k!==1?"s":""," total"]})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("button",{onClick:()=>{w.size===T.length?b(new Set):b(new Set(T.map(h=>h.id)))},className:"text-sm text-gray-600 hover:text-gray-800 transition-colors",children:w.size===T.length?"Collapse All":"Expand All"})})]})}),n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:T.map(h=>n.jsx(Fv,{list:h,expanded:w.has(h.id),onToggleExpand:()=>S(h.id),onMoveCouncil:i,onAddToList:c,years:u,metricChoices:d,apiUrls:m},h.id))}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("svg",{className:"w-5 h-5 text-blue-500 mt-0.5 mr-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),n.jsxs("div",{className:"text-sm text-blue-800",children:[n.jsx("strong",{children:" Pro Tip:"})," You can drag councils between lists to reorganize them. On mobile, tap and hold to drag. Use the grip icon () to easily grab councils. Changes are saved automatically!"]})]})})]})},Iv=({onClose:l,onCreate:i,loading:c=!1})=>{const[u,d]=j.useState({name:"",description:"",color:"blue"}),[m,w]=j.useState({}),b=[{value:"blue",label:"Blue",class:"bg-blue-400"},{value:"green",label:"Green",class:"bg-green-400"},{value:"purple",label:"Purple",class:"bg-purple-400"},{value:"red",label:"Red",class:"bg-red-400"},{value:"yellow",label:"Yellow",class:"bg-yellow-400"},{value:"indigo",label:"Indigo",class:"bg-indigo-400"},{value:"pink",label:"Pink",class:"bg-pink-400"},{value:"gray",label:"Gray",class:"bg-gray-400"}],T=h=>{const{name:v,value:y}=h.target;d(x=>({...x,[v]:y})),m[v]&&w(x=>({...x,[v]:""}))},S=()=>{const h={};return u.name.trim()?u.name.trim().length<2?h.name="List name must be at least 2 characters":u.name.trim().length>100&&(h.name="List name must be less than 100 characters"):h.name="List name is required",u.description.length>500&&(h.description="Description must be less than 500 characters"),w(h),Object.keys(h).length===0},M=async h=>{if(h.preventDefault(),!!S())try{await i({name:u.name.trim(),description:u.description.trim(),color:u.color})}catch(v){w({submit:v.message})}},k=h=>{h.target===h.currentTarget&&l()};return n.jsx("div",{id:"my-lists-create-modal-backdrop",className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:k,children:n.jsxs("div",{id:"my-lists-create-modal",className:"bg-white rounded-xl shadow-2xl border border-gray-200 w-full max-w-lg max-h-screen overflow-y-auto",children:[n.jsxs("div",{id:"my-lists-create-modal-header",className:"flex items-center justify-between p-6 border-b border-gray-200",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[n.jsx("svg",{className:"w-6 h-6 text-blue-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create New List"]}),n.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600 transition-colors p-1",disabled:c,children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("form",{id:"my-lists-create-form",onSubmit:M,className:"p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"List Name *"}),n.jsx("input",{type:"text",id:"name",name:"name",value:u.name,onChange:T,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${m.name?"border-red-300":"border-gray-300"}`,placeholder:"e.g., North London Boroughs, Yorkshire Councils",maxLength:100,disabled:c}),m.name&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.name}),n.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[u.name.length,"/100 characters"]})]}),n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:["Description",n.jsx("span",{className:"text-gray-400 font-normal ml-1",children:"(optional)"})]}),n.jsx("textarea",{id:"description",name:"description",value:u.description,onChange:T,rows:3,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${m.description?"border-red-300":"border-gray-300"}`,placeholder:"Add notes about what this list is for...",maxLength:500,disabled:c}),m.description&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.description}),n.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[u.description.length,"/500 characters"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Color Theme"}),n.jsx("div",{className:"grid grid-cols-4 gap-3",children:b.map(h=>n.jsxs("label",{className:`
                    relative flex items-center justify-center p-3 border rounded-lg cursor-pointer transition-all
                    ${u.color===h.value?"border-gray-800 bg-gray-50":"border-gray-300 hover:border-gray-400"}
                  `,children:[n.jsx("input",{type:"radio",name:"color",value:h.value,checked:u.color===h.value,onChange:T,className:"sr-only",disabled:c}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:`w-8 h-8 rounded-full ${h.class} mx-auto mb-1`}),n.jsx("span",{className:"text-xs font-medium text-gray-700",children:h.label})]}),u.color===h.value&&n.jsx("div",{className:"absolute top-1 right-1",children:n.jsx("svg",{className:"w-4 h-4 text-gray-800",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},h.value))}),n.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Choose a color to help identify this list at a glance"})]}),m.submit&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("svg",{className:"w-5 h-5 text-red-500 mt-0.5 mr-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),n.jsxs("div",{className:"text-sm text-red-800",children:[n.jsx("strong",{children:"Error:"})," ",m.submit]})]})}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[n.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:c,children:"Cancel"}),n.jsx("button",{type:"submit",className:"inline-flex items-center px-6 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:c,children:c?n.jsxs(n.Fragment,{children:[n.jsx(Bs,{size:"small",overlay:!1}),n.jsx("span",{className:"ml-2",children:"Creating..."})]}):n.jsxs(n.Fragment,{children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create List"]})})]})]}),n.jsxs("div",{className:"px-6 pb-6 border-t border-gray-100",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:" List Ideas"}),n.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[n.jsxs("div",{children:[" ",n.jsx("strong",{children:"By Region:"})," North London Boroughs, Welsh Councils, Yorkshire Districts"]}),n.jsxs("div",{children:[" ",n.jsx("strong",{children:"By Type:"})," Metropolitan Boroughs, County Councils, Unitary Authorities"]}),n.jsxs("div",{children:[" ",n.jsx("strong",{children:"By Interest:"})," High Debt Councils, Growing Populations, Budget Comparisons"]})]})]})]})})},Qv=({initialData:l={}})=>{var Y;const[i,c]=j.useState(l.lists||[]),[u,d]=j.useState(l.favourites||[]),[m,w]=j.useState(!1),[b,T]=j.useState(null),[S,M]=j.useState(!1),[k,h]=j.useState(null),[v]=j.useState({apiUrls:{searchCouncils:"/api/councils/search/",createList:"/lists/create/",addFavourite:"/lists/favourites/add/",removeFavourite:"/lists/favourites/remove/",addToList:J=>`/lists/${J}/add/`,removeFromList:J=>`/lists/${J}/remove/`,moveCouncil:"/lists/move/",listMetric:J=>`/lists/${J}/metric/`},csrfToken:((Y=document.querySelector("[name=csrfmiddlewaretoken]"))==null?void 0:Y.value)||y(),user:l.user||{},years:l.years||[],metricChoices:l.metricChoices||[]});function y(){const J="csrftoken",re=document.cookie.split(";");for(let ne of re){const[ie,ce]=ne.trim().split("=");if(ie===J)return decodeURIComponent(ce)}return""}const x=j.useCallback((J,re="success")=>{h({message:J,type:re}),setTimeout(()=>h(null),3e3)},[]),_=j.useCallback(async(J,re={})=>{try{T(null);const ne=await fetch(J,{method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded","X-CSRFToken":v.csrfToken,...re.headers},...re});if(!ne.ok)throw new Error(`HTTP ${ne.status}: ${ne.statusText}`);return await ne.json()}catch(ne){throw console.error("API call failed:",ne),T(ne.message),x(`Error: ${ne.message}`,"error"),ne}},[v.csrfToken,x]),le=j.useCallback(async J=>{try{w(!0);const re=await _(v.apiUrls.addFavourite,{method:"POST",body:`council=${encodeURIComponent(J)}`});re.success&&(re.council&&d(ne=>ne.some(ce=>ce.slug===J)?ne:[...ne,re.council]),x("Added to favourites","success"))}catch{}finally{w(!1)}},[_,v.apiUrls.addFavourite,x]),Z=j.useCallback(async J=>{try{w(!0),(await _(v.apiUrls.removeFavourite,{method:"POST",body:`council=${encodeURIComponent(J)}`})).success&&(d(ne=>ne.filter(ie=>ie.slug!==J)),x("Removed from favourites","success"))}catch{}finally{w(!1)}},[_,v.apiUrls.removeFavourite,x]),z=j.useCallback(async(J,re)=>{try{w(!0);const ne=await _(v.apiUrls.addToList(J),{method:"POST",body:`council=${encodeURIComponent(re)}`});ne.success&&(x(ne.message,"success"),c(ie=>ie.map(ce=>ce.id===parseInt(J)&&!ce.councils.some(we=>we.slug===re)&&ne.council?{...ce,councils:[...ce.councils,ne.council],council_count:ce.council_count+1}:ce)))}catch{}finally{w(!1)}},[_,v.apiUrls.addToList,x]),ae=j.useCallback(async(J,re,ne)=>{if(re!==ne)try{w(!0);const ie=await _(v.apiUrls.moveCouncil,{method:"POST",body:`council=${encodeURIComponent(J)}&from=${re}&to=${ne}`});ie.success&&(x(ie.message,"success"),c(ce=>ce.map(we=>{if(we.id===parseInt(re)){const N=we.councils.filter(A=>A.slug!==J);return{...we,councils:N,council_count:N.length}}else if(we.id===parseInt(ne)&&!we.councils.some(A=>A.slug===J)&&ie.council)return{...we,councils:[...we.councils,ie.council],council_count:we.council_count+1};return we})))}catch{}finally{w(!1)}},[_,v.apiUrls.moveCouncil,x]),Q=j.useCallback(async J=>{try{w(!0);const re=await _(v.apiUrls.createList,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(J)});re.success&&(x(re.message,"success"),M(!1),c(ne=>[...ne,re.list]))}catch(re){throw x(`Failed to create list: ${re.message}`,"error"),re}finally{w(!1)}},[_,v.apiUrls.createList,x]),fe=Lm.isMobile?Uv:Ev,de=Lm.isMobile?{enableMouseEvents:!0}:{};return n.jsx(Xr,{children:n.jsx(Lp,{backend:fe,options:de,children:n.jsxs("div",{id:"my-lists-app-container",className:"my-lists-app",children:[k&&n.jsx("div",{id:"my-lists-notification",className:`fixed top-4 right-4 z-50 max-w-sm p-4 rounded-lg shadow-lg ${k.type==="success"?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"flex-1",children:k.message}),n.jsx("button",{onClick:()=>h(null),className:"ml-3 text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),m&&n.jsx(Bs,{}),b&&n.jsx("div",{id:"my-lists-error-display",className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("svg",{className:"w-5 h-5 text-red-500 mt-0.5 mr-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),n.jsxs("div",{className:"text-sm text-red-800",children:[n.jsx("strong",{children:"Error:"})," ",b]})]})}),n.jsxs("div",{id:"my-lists-main-content",className:"space-y-6",children:[n.jsx(Gv,{onAddToFavourites:le,onAddToList:z,lists:i,apiUrls:v.apiUrls,csrfToken:v.csrfToken}),n.jsx(Yv,{councils:u,onRemoveFromFavourites:Z,onAddToList:z,lists:i}),n.jsx(Xv,{lists:i,onMoveCouncil:ae,onAddToList:z,years:v.years,metricChoices:v.metricChoices,apiUrls:v.apiUrls}),n.jsx("div",{className:"text-center",children:n.jsxs("button",{onClick:()=>M(!0),className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create New List"]})})]}),S&&n.jsx(Iv,{onClose:()=>M(!1),onCreate:Q,loading:m})]})})})},Zv=()=>{const l=()=>{const i=document.getElementById("my-lists-react-root");if(i){console.log(" MyListsIntegration: Found React container, initializing app...");try{const c=document.getElementById("my-lists-initial-data");let u={};if(c)try{u=JSON.parse(c.textContent),console.log(" MyListsIntegration: Loaded initial data:",u)}catch(m){console.error(" MyListsIntegration: Failed to parse initial data:",m)}else console.warn(" MyListsIntegration: No initial data found in template");Zn.createRoot(i).render(n.jsx(Xr,{children:n.jsx(Qv,{initialData:u})})),i.setAttribute("data-react-mounted","true"),console.log(" MyListsIntegration: React app successfully mounted!")}catch(c){console.error(" MyListsIntegration: Failed to mount React app:",c),i.innerHTML=`
        <div class="bg-red-50 border border-red-200 rounded-lg p-6 m-4">
          <div class="flex items-start">
            <svg class="w-6 h-6 text-red-500 mt-1 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
            </svg>
            <div>
              <h3 class="text-lg font-medium text-red-800 mb-2">React App Failed to Load</h3>
              <p class="text-red-700 mb-3">
                The enhanced My Lists interface encountered an error. The page will fall back to the basic version.
              </p>
              <details class="text-sm text-red-600">
                <summary class="cursor-pointer font-medium">Technical Details</summary>
                <pre class="mt-2 p-3 bg-red-100 rounded border overflow-auto">${c.message}

${c.stack}</pre>
              </details>
              <button onclick="window.location.reload()" class="mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors">
                Reload Page
              </button>
            </div>
          </div>
        </div>
      `}}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",l):l()},$v=()=>{const[l,i]=j.useState({isMobile:!1,isTablet:!1,isDesktop:!1,width:0,height:0});return j.useEffect(()=>{const c=()=>{const u=window.innerWidth,d=window.innerHeight,m=u<640,w=u>=640&&u<1024,b=u>=1024;i({isMobile:m,isTablet:w,isDesktop:b,width:u,height:d})};return c(),window.addEventListener("resize",c),window.addEventListener("orientationchange",()=>{setTimeout(c,100)}),()=>{window.removeEventListener("resize",c),window.removeEventListener("orientationchange",c)}},[]),l},Wv=({councilData:l,progress:i={},onChoiceSelect:c,className:u=""})=>{const d=(w,b)=>!b||b===0?"0%":`${Math.round(w/b*100)}%`,m=()=>"2 weeks ago by Mike Rouse";return n.jsx("div",{id:"council-edit-landing-main",className:`bg-white ${u}`,children:n.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6 sm:px-6 sm:py-8",children:[n.jsx("div",{id:"council-edit-back-nav",className:"mb-6",children:n.jsxs("a",{href:`/councils/${l==null?void 0:l.slug}/`,className:"inline-flex items-center text-blue-600 hover:text-blue-800 text-sm font-medium",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),"Back to ",l==null?void 0:l.name]})}),n.jsxs("div",{id:"council-edit-header",className:"mb-8",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:l==null?void 0:l.name}),n.jsx("p",{className:"text-lg text-gray-600",children:"Choose what you'd like to edit:"})]}),n.jsxs("div",{id:"council-edit-choice-cards",className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[n.jsxs("div",{id:"council-edit-characteristics-card",className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow cursor-pointer group",onClick:()=>c("characteristics"),children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsx("div",{className:"text-4xl",children:""}),n.jsxs("div",{className:"text-right",children:[n.jsx("span",{className:"text-sm text-gray-500",children:"Status"}),n.jsxs("div",{className:"text-sm font-medium text-green-600",children:[d(i.characteristics||0,8)," complete"]})]})]}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3 group-hover:text-blue-600",children:"Council Details"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Basic information that doesn't change by year"}),n.jsxs("ul",{className:"text-sm text-gray-500 space-y-1 mb-6",children:[n.jsx("li",{children:" Population and demographics"}),n.jsx("li",{children:" Council type and nation"}),n.jsx("li",{children:" Website and contact details"}),n.jsx("li",{children:" Leadership information"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700 group-hover:bg-blue-700 transition-colors",children:"Edit Details "}),n.jsx("span",{className:"text-xs text-gray-400",children:"Usually takes 5 minutes"})]})]}),n.jsxs("div",{id:"council-edit-financial-card",className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow cursor-pointer group",onClick:()=>c("financial"),children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsx("div",{className:"text-4xl",children:""}),n.jsxs("div",{className:"text-right",children:[n.jsx("span",{className:"text-sm text-gray-500",children:"Status"}),n.jsxs("div",{className:"text-sm font-medium text-amber-600",children:[d(i.financial||0,20)," complete"]})]})]}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3 group-hover:text-blue-600",children:"Financial Data"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Upload statements or edit financial figures for a specific year"}),n.jsxs("ul",{className:"text-sm text-gray-500 space-y-1 mb-6",children:[n.jsx("li",{children:" Balance sheet items"}),n.jsx("li",{children:" Income & expenditure"}),n.jsx("li",{children:" PDF upload & AI extraction"}),n.jsx("li",{children:" Year-specific population data"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700 group-hover:bg-blue-700 transition-colors",children:"Edit Financial Data "}),n.jsx("span",{className:"text-xs text-gray-400",children:"Usually takes 10-15 minutes"})]})]})]}),n.jsxs("div",{id:"council-edit-recent-activity",className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Recent activity"}),n.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[n.jsxs("li",{children:[" Financial data for 2024/25 - ",d(i.financial||0,20)," complete"]}),n.jsxs("li",{children:[" Council details - ",d(i.characteristics||0,8)," complete"]}),n.jsxs("li",{children:[" Last updated ",m()]})]})]}),n.jsx("div",{id:"council-edit-help",className:"mt-6 text-center",children:n.jsxs("p",{className:"text-sm text-gray-500",children:["Need help? Check our"," ",n.jsx("a",{href:"/help/council-editing",className:"text-blue-600 hover:text-blue-800 underline",children:"council editing guide"})," ","or"," ",n.jsx("a",{href:"/contact",className:"text-blue-600 hover:text-blue-800 underline",children:"contact us"})]})})]})})},Kv=({field:l,value:i="",onSave:c,onValidate:u,error:d,disabled:m=!1,showHelp:w=!0,showPopulationContext:b=!1,yearContext:T=null,allFieldValues:S={},className:M=""})=>{const[k,h]=j.useState(i||""),[v,y]=j.useState(!1),[x,_]=j.useState(""),[le,Z]=j.useState(null),[z,ae]=j.useState(i||""),[Q,fe]=j.useState(!1),[de,Y]=j.useState(null),[J,re]=j.useState(0);j.useEffect(()=>{h(i||""),ae(i||"")},[i]);const ne=j.useCallback(async $=>{if(!(!u||$===i||!$.trim()))try{const I=await u(l.slug,$);if(I){const he=I.message||"",_e=I.type||"info",ve=A($,l.slug);ve&&ve.type==="error"?_(ve.message):he&&_(` ${he}`)}}catch(I){console.warn("Server validation failed:",I)}},[i,u,l.slug]),ie=j.useCallback(async($,I=!1)=>{le&&clearTimeout(le);const he=setTimeout(async()=>{var _e,ve;if($!==z&&$.trim()!==""){y(!0),_(""),Y(null);try{await ne($);const Ue=await c($);if(Ue!=null&&Ue.success)_(" Saved automatically"),ae($),re(0),setTimeout(()=>_(""),2e3);else if(Ue!=null&&Ue.error)throw new Error(Ue.error)}catch(Ue){console.error("Save error:",Ue),Y(Ue.message||"Failed to save"),!I&&J<3&&((_e=Ue.message)!=null&&_e.includes("network"))?(re(me=>me+1),_(` Network error - retrying (${J+1}/3)...`),setTimeout(()=>ie($,!0),2e3)):_((ve=Ue.message)!=null&&ve.includes("network")?" Network error - please check your connection":` ${Ue.message||"Failed to save - please try again"}`)}finally{y(!1)}}},I?500:1e3);Z(he)},[le,z,c,ne,J]),ce=j.useCallback(()=>{h(z),_(" Reverted to last saved value"),Y(null),fe(!1),setTimeout(()=>_(""),2e3)},[z]),je=j.useCallback(()=>{k&&k.trim()&&window.confirm(`Are you sure you want to clear the ${l.name||l.slug} field?`)&&(h(""),ie(""),_(" Field cleared"),setTimeout(()=>_(""),2e3))},[k,l,ie]),we=j.useCallback($=>{if(!$||$==="")return null;const I=parseFloat($);if(isNaN(I))return null;const he=I*1e6,_e=new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:0,maximumFractionDigits:0}).format(he),ve=`${I}m`;return{full:_e,millions:ve,actualValue:he}},[]),N=j.useCallback(($,I,he={})=>{if(!$||$==="")return null;const _e=parseFloat($);if(isNaN(_e))return null;const Ue={"total-expenditure":{"total-income":{check:(me,pe)=>Math.abs(me-pe)/Math.max(me,pe)>.5,message:"Large difference between income and expenditure may indicate data entry error",guidance:"Check: Are both values from the same statement year? Include all income/expenditure categories?"}},"current-liabilities":{"usable-reserves":{check:(me,pe)=>me>pe*2,message:"Current liabilities significantly exceed usable reserves",guidance:"This ratio suggests potential liquidity concerns. Verify both figures are from the Balance Sheet."}},"interest-paid":{"long-term-liabilities":{check:(me,pe)=>pe>0&&me/pe>.1,message:"Interest rate appears unusually high (>10%)",guidance:"Double-check: Is interest from annual I&E statement? Is debt the total outstanding balance?"}},"interest-payments":{"long-term-liabilities":{check:(me,pe)=>pe>0&&me/pe>.1,message:"Interest payments seem high relative to debt",guidance:"Ensure interest is annual amount and debt is total outstanding (not just annual repayment)."}},"business-rates-income":{"total-income":{check:(me,pe)=>me>pe*.8,message:"Business rates seem unusually high compared to total income",guidance:"Check if total income includes all sources (grants, fees, charges, etc.)."}},"council-tax-income":{"total-income":{check:(me,pe)=>me>pe*.9,message:"Council tax seems unusually high compared to total income",guidance:"Verify total income includes government grants and other revenue sources."}},"long-term-liabilities":{"current-liabilities":{check:(me,pe)=>pe>me*2,message:"Current liabilities exceed long-term liabilities significantly",guidance:"This is unusual but possible. Verify classification of liabilities by maturity date."}},"usable-reserves":{"unusable-reserves":{check:(me,pe)=>me>pe,message:"Usable reserves exceed unusable reserves",guidance:"This is uncommon. Check if reserves are correctly classified (revaluation reserves are unusable)."}}}[I];if(!Ue)return null;for(const[me,pe]of Object.entries(Ue)){const ge=parseFloat(he[me]);if(!isNaN(ge)&&pe.check(_e,ge))return{type:"warning",message:` ${pe.message}`,guidance:pe.guidance}}return null},[]),A=j.useCallback(($,I,he={})=>{if(!$||$==="")return null;const _e=parseFloat($);if(isNaN(_e))return{type:"error",message:" Please enter a valid number"};const ve=N($,I,he);if(ve&&ve.type==="warning")return ve;const me={"current-liabilities":{min:1,max:5e3,typical:[10,500],unit:"millions"},"long-term-liabilities":{min:0,max:1e4,typical:[20,1e3],unit:"millions"},"total-income":{min:5,max:2e4,typical:[50,2e3],unit:"millions"},"total-expenditure":{min:5,max:2e4,typical:[50,2e3],unit:"millions"},"business-rates-income":{min:.1,max:5e3,typical:[10,500],unit:"millions"},"council-tax-income":{min:1,max:1e4,typical:[20,800],unit:"millions"},"interest-paid":{min:0,max:500,typical:[1,50],unit:"millions"},"interest-payments":{min:0,max:500,typical:[1,50],unit:"millions"},"usable-reserves":{min:-500,max:2e3,typical:[5,200],unit:"millions",canBeNegative:!0},"unusable-reserves":{min:-5e3,max:1e4,typical:[50,1e3],unit:"millions",canBeNegative:!0},"total-reserves":{min:-1e3,max:12e3,typical:[50,1200],unit:"millions",canBeNegative:!0},"finance-leases-pfi-liabilities":{min:0,max:2e3,typical:[0,100],unit:"millions"},"finance-leases":{min:0,max:2e3,typical:[0,100],unit:"millions"},"current-assets":{min:1,max:5e3,typical:[20,500],unit:"millions"},"capital-expenditure":{min:0,max:2e3,typical:[5,200],unit:"millions"},"pension-liability":{min:0,max:1e4,typical:[50,2e3],unit:"millions"},"total-debt":{min:0,max:15e3,typical:[20,1500],unit:"millions"}}[I];if(!me)return null;if(_e<0&&!me.canBeNegative)return{type:"error",message:` ${l.name} cannot be negative. Use positive values only.`,guidance:"If the statement shows brackets (negative), enter as positive for liabilities."};if(_e<me.min)return{type:"warning",message:` This seems quite low for ${l.name}. Are you sure this is in millions?`,guidance:"Common error: Entering thousands instead of millions. 247,300k should be entered as 247.3"};if(_e>me.max)return{type:"warning",message:` This seems unusually high for ${l.name}. Please double-check the figure.`,guidance:"Verify: Is this the Group total (not just Entity)? Is it definitely in millions?"};if(_e<me.typical[0]||_e>me.typical[1]){const pe=_e<me.typical[0],ge=pe?"This is lower than typical for most councils.":"This is higher than typical for most councils.",Ae=pe?"Double-check: Are you using Group figures? Is the value in millions (not thousands)?":"Large councils or those with significant PFI/housing stock may have higher values. Verify the figure.";return{type:"info",message:` ${ge}`,guidance:Ae}}return{type:"success",message:" Value looks reasonable"}},[l]),q=j.useCallback($=>{h($),_("");const I=l.contentType||l.content_type;if(I==="url"&&$)try{new URL($),_(" Valid URL format")}catch{_(" Invalid URL format")}else if(I==="integer"&&$)/^\d+$/.test($)?(_(" Valid number"),u&&!m&&setTimeout(()=>ne($),500)):_(" Please enter numbers only");else if(I==="monetary"&&$){const he=parseFloat($);isNaN(he)?_(" Please enter a valid number"):he<0?_(" Please enter a positive value"):(_(" Valid monetary amount"),u&&!m&&setTimeout(()=>ne($),500))}else I==="postcode"&&$?/^[A-Z]{1,2}[0-9][A-Z0-9]?\s?[0-9][A-Z]{2}$/i.test($)?_(" Valid UK postcode"):_(" Please enter a valid UK postcode (e.g., SW1A 1AA)"):$&&u&&!m&&setTimeout(()=>ne($),500);m||ie($)},[l,ie,ne,u,m,S]),X=()=>l.name?l.name:l.slug||"Unknown Field",p=()=>{var I;return l.description?l.description:{population:b?`Population data ${T?`for ${T}`:"for display purposes"}`:"Current population of the council area",households:"Number of households in the council area",council_hq_post_code:"Postcode for the main council headquarters","current-liabilities":"Short-term financial obligations due within one year (from Balance Sheet)","long-term-liabilities":"Financial obligations due after one year (from Balance Sheet)","usable-reserves":"Funds available for council use (from Balance Sheet)","unusable-reserves":"Restricted funds not available for general use (from Balance Sheet)","finance-leases-pfi-liabilities":"PFI and lease obligations (from Balance Sheet)","total-income":"All revenue received during the financial year (from Income & Expenditure)","total-expenditure":"All spending during the financial year (from Income & Expenditure)","business-rates-income":"Revenue from business rates (from Income & Expenditure)","council-tax-income":"Revenue from council tax (from Income & Expenditure)","non-ring-fenced-government-grants-income":"Government grants without spending restrictions (from Income & Expenditure)","interest-paid":"Interest payments on borrowing (from Income & Expenditure)",website:"Official council website URL","council-type":"Type of local authority",nation:"Country within the UK","chief-executive":"Name of the Chief Executive",leader:"Name of the Council Leader","political-control":"Current political party in control","contact-url":"Contact page URL",email:"Main contact email address"}[l.slug]||`Enter ${((I=l.name)==null?void 0:I.toLowerCase())||"value"}`},L=()=>b?T?n.jsxs("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[n.jsxs("p",{className:"text-sm text-blue-800",children:[" ",n.jsxs("strong",{children:["Historical Population (",T,")"]})]}),n.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"This population figure is used to calculate accurate per capita figures for this financial year. It may differ from the current population due to annual changes."})]}):n.jsxs("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:[n.jsxs("p",{className:"text-sm text-green-800",children:[" ",n.jsx("strong",{children:"Current Population"})]}),n.jsx("p",{className:"text-xs text-green-700 mt-1",children:"This is the latest population figure displayed on the council page. Historical population data for financial calculations is entered separately."})]}):null,K=()=>(l.contentType||l.content_type)!=="monetary"?null:n.jsxs("div",{className:"mt-2 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[n.jsxs("p",{className:"text-sm text-amber-800",children:[" ",n.jsx("strong",{children:"Reading Financial Statements"})]}),n.jsxs("div",{className:"text-xs text-amber-700 mt-1 space-y-1",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Important:"})," Enter values in millions. The system will automatically convert to the full amount."]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Balance Sheet Format:"}),' If the statement shows "247,300" (in thousands), enter "247.3" here.']}),n.jsxs("p",{children:[n.jsx("strong",{children:"Group vs Entity:"})," For councils with subsidiaries, use the",n.jsx("em",{children:"Group"})," figures rather than Entity-only figures."]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Example:"}),' Statement shows "(268,900)"  Enter "268.9"  Saves as 268,900,000']})]})]}),ee=()=>{var he;const $=l.contentType||l.content_type,I=`
      block w-full border border-gray-300 px-3 py-2
      text-base min-h-[44px] font-normal bg-white
      focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none
      transition-colors duration-200
      ${m?"border-gray-300 bg-gray-100 text-gray-600 cursor-not-allowed":"hover:border-gray-400"}
      ${x.startsWith("")?"!border-green-500":x.startsWith("")?"!border-yellow-500":""}
      ${d?"!border-red-500":""}
    `;switch($){case"url":return n.jsx("input",{id:`field-${l.slug}`,type:"url",value:k,onChange:ve=>q(ve.target.value),className:I,placeholder:"https://example.com",disabled:v||m,autoComplete:"url",inputMode:"url"});case"integer":return n.jsx("input",{id:`field-${l.slug}`,type:"number",value:k,onChange:ve=>q(ve.target.value),className:I,placeholder:"Enter number...",min:"0",step:"1",disabled:v||m,inputMode:"numeric",pattern:"[0-9]*"});case"monetary":return n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 pointer-events-none",children:""}),n.jsx("input",{id:`field-${l.slug}`,type:"number",value:k,onChange:ve=>q(ve.target.value),className:`${I} pl-7 pr-20`,placeholder:"0.00",min:"0",step:"0.01",disabled:v||m,inputMode:"decimal"}),n.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-sm text-gray-500 pointer-events-none",children:"millions"})]});case"postcode":return n.jsx("input",{id:`field-${l.slug}`,type:"text",value:k,onChange:ve=>q(ve.target.value.toUpperCase()),className:I,placeholder:"SW1A 1AA",disabled:v||m,autoComplete:"postal-code",pattern:"[A-Z]{1,2}[0-9][A-Z0-9]? ?[0-9][A-Z]{2}",maxLength:"8"});case"list":const _e=l.choices||[];return n.jsxs("select",{id:`field-${l.slug}`,value:k,onChange:ve=>q(ve.target.value),className:I,disabled:v||m,children:[n.jsx("option",{value:"",children:"Please select..."}),_e.map(ve=>n.jsx("option",{value:ve.value,children:ve.label},ve.value))]});default:return n.jsx("input",{id:`field-${l.slug}`,type:"text",value:k,onChange:ve=>q(ve.target.value),className:I,placeholder:`Enter ${((he=l.name)==null?void 0:he.toLowerCase())||"value"}...`,disabled:v||m,autoComplete:"off"})}};return n.jsxs("div",{className:`space-y-2 ${M}`,children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-900",htmlFor:`field-${l.slug}`,children:[X(),l.required&&n.jsx("span",{className:"text-red-500 ml-1",children:"*"}),v&&n.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(saving...)"})]}),w&&n.jsx("p",{className:"text-sm text-gray-600",children:p()}),n.jsx("div",{children:ee()}),(l.contentType==="monetary"||l.content_type==="monetary")&&k&&(()=>{const $=we(k);return $?n.jsxs("div",{className:"mt-2 p-2 bg-gray-50 border border-gray-200 rounded-md",children:[n.jsxs("p",{className:"text-xs text-gray-700",children:[n.jsx("span",{className:"font-medium",children:"Preview:"})," ",$.full," or ",$.millions]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"If this doesn't look right, adjust the figure above."})]}):null})(),x&&n.jsx("div",{className:`text-xs space-y-1 ${x.startsWith("")?"text-green-600":x.startsWith("")?"text-yellow-600":x.startsWith("")?"text-blue-600":x.startsWith("")?"text-purple-600":x.startsWith("")||x.startsWith("")?"text-gray-600":"text-red-600"}`,children:x.split(`
`).map(($,I)=>n.jsx("p",{children:$},I))}),de&&n.jsxs("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded-md",children:[n.jsx("p",{className:"text-xs text-red-700 mb-2",children:" Unable to save changes"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>ie(k,!0),className:"text-xs px-2 py-1 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",disabled:v,children:"Retry Save"}),n.jsx("button",{onClick:ce,className:"text-xs px-2 py-1 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors",children:"Revert Changes"})]})]}),d&&n.jsx("p",{className:"text-sm text-red-600 mt-1",children:d}),k&&k.trim()&&!m&&n.jsx("div",{className:"mt-2",children:n.jsx("button",{onClick:je,className:"text-xs text-gray-500 hover:text-gray-700 underline",type:"button",children:"Clear this field"})}),b&&L(),K()]})},Pv=({councilData:l,characteristics:i={},availableFields:c=[],onSave:u,onValidate:d,onBack:m,errors:w={},loading:b=!1,className:T=""})=>{const[S,M]=j.useState(!1),[k,h]=j.useState(""),v={basic:{title:"Basic Information",description:"Core council details",fields:c.filter(z=>["population","households"].includes(z.slug))},location:{title:"Location & Contact",description:"Physical location information",fields:c.filter(z=>["council_hq_post_code"].includes(z.slug))},other:{title:"Other Available Fields",description:"Additional characteristic data",fields:c.filter(z=>!["population","households","council_hq_post_code"].includes(z.slug))}};Object.keys(v).forEach(z=>{v[z].fields.length===0&&delete v[z]});const y=j.useCallback(async(z,ae)=>{M(!0),h("");try{const Q=await u(z,ae);return Q!=null&&Q.success&&(h(`Field updated successfully! +${Q.points||3} points`),setTimeout(()=>h(""),3e3)),Q}catch(Q){return console.error("Save error:",Q),{success:!1,error:Q.message}}finally{M(!1)}},[u]),x=j.useCallback(z=>i[z]||"",[i]),le=(()=>{const z=c.filter(ae=>i[ae.slug]&&i[ae.slug].toString().trim().length>0).length;return{completed:z,total:c.length,percentage:c.length>0?Math.round(z/c.length*100):0}})(),Z=(z,ae)=>z.fields.length?n.jsxs("div",{id:`characteristics-group-${ae}`,className:"mb-8",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:z.title}),n.jsx("p",{className:"text-sm text-gray-600",children:z.description})]}),n.jsx("div",{className:"space-y-4",children:z.fields.map(Q=>n.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:n.jsx(Kv,{field:Q,value:x(Q.slug),onSave:fe=>y(Q.slug,fe),onValidate:d,error:w[Q.slug],disabled:S,showHelp:!0,showPopulationContext:Q.slug==="population",allFieldValues:i})},Q.slug))})]},ae):null;return n.jsx("div",{id:"characteristics-editor-main",className:`bg-white ${T}`,children:n.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6 sm:px-6 sm:py-8",children:[n.jsxs("div",{id:"characteristics-editor-header",className:"mb-8",children:[n.jsxs("button",{onClick:m,className:"inline-flex items-center text-blue-600 hover:text-blue-800 text-sm font-medium mb-4",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),"Back"]}),n.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"Council Details"}),n.jsxs("p",{className:"text-lg text-gray-600",children:["Edit basic information for ",l==null?void 0:l.name]})]}),n.jsxs("div",{id:"characteristics-progress",className:"mb-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Progress: ",le.completed," of ",le.total," fields complete"]}),n.jsxs("span",{className:"text-sm text-gray-500",children:[le.percentage,"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${le.percentage}%`}})})]}),k&&n.jsx("div",{id:"characteristics-success",className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 text-green-400 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),n.jsx("p",{className:"text-green-800",children:k})]})}),n.jsx("div",{id:"characteristics-field-groups",children:Object.keys(v).length>0?Object.entries(v).map(([z,ae])=>Z(ae,z)):n.jsx("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:n.jsxs("div",{className:"text-gray-500",children:[n.jsx("svg",{className:"w-12 h-12 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),n.jsx("h3",{className:"text-lg font-medium mb-2",children:"Limited Characteristic Fields Available"}),n.jsx("p",{className:"text-sm mb-4",children:"Currently, only basic demographic data can be edited here. More council information fields will be added in future updates."}),n.jsx("p",{className:"text-xs text-gray-400",children:"Available fields: Population, Households, and HQ Postcode"})]})})}),b&&n.jsxs("div",{id:"characteristics-loading",className:"flex items-center justify-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-blue-500 border-t-transparent mr-3"}),n.jsx("span",{className:"text-gray-600",children:"Loading council data..."})]}),n.jsxs("div",{id:"characteristics-actions",className:"flex flex-col sm:flex-row gap-4 pt-8 border-t border-gray-200",children:[n.jsx("button",{onClick:m,className:"px-6 py-3 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 font-medium transition-colors",children:"Back to Overview"}),n.jsx("div",{className:"flex-1"}),n.jsx("div",{className:"text-sm text-gray-500 self-center",children:"Changes are saved automatically"})]}),n.jsxs("div",{id:"characteristics-help",className:"mt-8 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Tips for completing council details"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsxs("li",{children:[" ",n.jsx("strong",{children:"Population:"})," This is the current population used for display on council pages"]}),n.jsxs("li",{children:[" ",n.jsx("strong",{children:"Website:"})," Must be a valid URL starting with https://"]}),n.jsxs("li",{children:[" ",n.jsx("strong",{children:"Political Control:"})," Current party or coalition in control"]}),n.jsx("li",{children:" All changes are reviewed before being published"})]})]})]})})},Jv=({availableCategories:l=[],selectedCategory:i,onCategorySelect:c,onBack:u,className:d=""})=>{var w;const m={basic:{title:"Basic Information",description:"Council details, population, and document links",icon:"",estimatedTime:"2-3 minutes",priority:"Required"},income:{title:"Income & Expenditure",description:"Revenue, spending, and operational finances",icon:"",estimatedTime:"5-7 minutes",priority:"Required"},balance:{title:"Balance Sheet",description:"Assets, liabilities, and reserves",icon:"",estimatedTime:"4-6 minutes",priority:"Required"},debt:{title:"Debt & Obligations",description:"Borrowing, pensions, and long-term commitments",icon:"",estimatedTime:"3-4 minutes",priority:"Optional"},other:{title:"Additional Fields",description:"Other council information and financial data",icon:"",estimatedTime:"2-3 minutes",priority:"Optional"}};return n.jsxs("div",{className:`max-w-4xl mx-auto px-4 py-6 ${d}`,children:[n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("button",{onClick:u,className:"mr-4 p-2 text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Go back",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Choose Data Category"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Select which financial information you'd like to work on. You can complete categories in any order."})]})]})}),n.jsxs("div",{className:"mb-8 p-4 bg-blue-50 border-l-4 border-blue-500",children:[n.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:" Smart Approach"}),n.jsx("p",{className:"text-sm text-blue-800",children:"Work on one category at a time to stay focused. Required categories help calculate key metrics like per-capita figures. You can always come back to add more data later."})]}),n.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:l.map(b=>{const T=m[b.key]||{},S=i===b.key,M=b.completionPercentage||0,k=M>=100;return n.jsxs("button",{onClick:()=>c(b.key),className:`
                p-6 border-2 text-left transition-all duration-200 hover:shadow-md
                ${S?"border-blue-600 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}
                ${k?"ring-2 ring-green-500":""}
              `,children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-3xl mr-3",children:T.icon}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-900 text-lg",children:T.title}),n.jsx("span",{className:`text-xs px-2 py-1 border inline-block mt-1 ${T.priority==="Required"?"border-orange-500 bg-orange-50 text-orange-700":"border-gray-400 bg-gray-50 text-gray-600"}`,children:T.priority})]})]}),k&&n.jsx("div",{className:"text-green-600",children:n.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:T.description}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[n.jsxs("span",{children:[b.completed||0," of ",b.total||0," fields"]}),n.jsxs("span",{children:[M,"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 h-2",children:n.jsx("div",{className:`h-2 transition-all duration-300 ${k?"bg-green-600":"bg-blue-600"}`,style:{width:`${M}%`}})})]}),n.jsxs("div",{className:"text-xs text-gray-500 flex items-center",children:[n.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Est. ",T.estimatedTime]})]},b.key)})}),i&&n.jsx("div",{className:"mt-8 flex justify-center",children:n.jsxs("button",{onClick:()=>c(i),className:"px-8 py-3 bg-blue-600 text-white font-semibold hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200",children:["Continue with ",(w=m[i])==null?void 0:w.title]})}),n.jsx("div",{className:"mt-8 text-center",children:n.jsxs("p",{className:"text-sm text-gray-500",children:[" ",n.jsx("strong",{children:"Tip:"})," Start with required categories (Basic Information, Income & Expenditure, Balance Sheet) for the most accurate calculations."]})})]})},ex=({isVisible:l=!1,title:i="Confirm Action",message:c="Are you sure you want to proceed?",confirmText:u="Confirm",cancelText:d="Cancel",onConfirm:m,onCancel:w,type:b="default",className:T=""})=>{if(!l)return null;const M=(()=>{switch(b){case"warning":return{iconColor:"text-yellow-600",confirmButton:"bg-yellow-600 hover:bg-yellow-700 text-white",icon:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})};case"danger":return{iconColor:"text-red-600",confirmButton:"bg-red-600 hover:bg-red-700 text-white",icon:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})};default:return{iconColor:"text-blue-600",confirmButton:"bg-blue-600 hover:bg-blue-700 text-white",icon:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}}})();return n.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 ${T}`,children:n.jsxs("div",{className:"bg-white max-w-md w-full border-0 shadow-xl",children:[n.jsx("div",{className:"p-6 pb-4",children:n.jsxs("div",{className:"flex items-start space-x-4",children:[n.jsx("div",{className:`flex-shrink-0 ${M.iconColor}`,children:M.icon}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:i}),n.jsx("div",{className:"text-sm text-gray-600 space-y-2",children:typeof c=="string"?n.jsx("p",{children:c}):c})]})]})}),n.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[n.jsx("button",{onClick:w,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 font-medium transition-colors",children:d}),n.jsx("button",{onClick:m,className:`px-4 py-2 font-medium transition-colors ${M.confirmButton}`,children:u})]})]})})},tx=({isVisible:l=!1,fieldName:i="",enteredValue:c="",validationIssue:u={},onAcceptValue:d,onUseCorrection:m,onEditValue:w,onCancel:b,className:T=""})=>{if(!l)return null;const S=M=>{const k=parseFloat(M);return isNaN(k)?M:new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:1,maximumFractionDigits:1}).format(k)};return n.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 ${T}`,children:n.jsxs("div",{className:"bg-white max-w-lg w-full border-0 shadow-xl",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"mx-auto w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center mr-4",children:n.jsx("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L3.232 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Value Seems Unusually High"}),n.jsx("p",{className:"text-sm text-gray-600",children:i})]})]})}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{className:"bg-red-50 border border-red-200 p-4",children:[n.jsx("div",{className:"flex items-center mb-2",children:n.jsx("span",{className:"text-sm font-medium text-red-800",children:"You entered:"})}),n.jsxs("div",{className:"text-lg font-semibold text-red-900",children:[S(c*1e6)," (",c," million)"]})]}),n.jsx("p",{className:"text-sm text-gray-700",children:u.message}),u.suggestedValue&&n.jsxs("div",{className:"bg-green-50 border border-green-200 p-4",children:[n.jsx("div",{className:"flex items-center mb-2",children:n.jsx("span",{className:"text-sm font-medium text-green-800",children:"Did you mean:"})}),n.jsxs("div",{className:"text-lg font-semibold text-green-900",children:[S(u.suggestedValue*1e6)," (",u.suggestedValue," million)"]}),n.jsx("p",{className:"text-xs text-green-700 mt-1",children:u.suggestion})]})]}),n.jsxs("div",{className:"px-6 pb-6 space-y-3",children:[u.suggestedValue&&n.jsxs("button",{onClick:()=>m(u.suggestedValue),className:"w-full px-4 py-3 bg-green-600 text-white hover:bg-green-700 font-medium transition-colors flex items-center justify-center",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Use Suggested Value (",u.suggestedValue," million)"]}),n.jsxs("button",{onClick:w,className:"w-full px-4 py-3 bg-blue-600 text-white hover:bg-blue-700 font-medium transition-colors flex items-center justify-center",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit Value Again"]}),n.jsx("button",{onClick:()=>d(c),className:"w-full px-4 py-3 bg-gray-100 text-gray-700 hover:bg-gray-200 font-medium transition-colors",children:"Keep Original Value (I'm Sure)"})]}),n.jsx("div",{className:"px-6 pb-4 border-t border-gray-200 pt-4",children:n.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-3",children:[n.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-1",children:" Common Mistakes"}),n.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[n.jsx("li",{children:" Entering amounts in pounds instead of millions (e.g., 208487000 instead of 208.487)"}),n.jsx("li",{children:" Missing decimal point (e.g., 208487 instead of 208.487)"}),n.jsx("li",{children:" Including thousands instead of millions (e.g., 208487 thousands = 208.487 millions)"})]})]})}),n.jsx("button",{onClick:b,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600","aria-label":"Close",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})})},ax=(l,i,c={})=>{const u=parseFloat(i);if(isNaN(u)||u<=0)return{isValid:!0};const m={"business-rates-income":{min:5e6,max:5e8,typical:{min:2e7,max:2e8}},"council-tax-income":{min:1e7,max:8e8,typical:{min:5e7,max:4e8}},"total-income":{min:5e7,max:2e9,typical:{min:2e8,max:1e9}},"non-ring-fenced-government-grants-income":{min:1e6,max:3e8,typical:{min:1e7,max:15e7}},"total-expenditure":{min:5e7,max:2e9,typical:{min:2e8,max:1e9}},"interest-paid":{min:1e5,max:5e7,typical:{min:1e6,max:2e7}},"capital-expenditure":{min:5e6,max:5e8,typical:{min:2e7,max:2e8}},"current-liabilities":{min:1e7,max:5e8,typical:{min:3e7,max:2e8}},"long-term-liabilities":{min:2e7,max:1e9,typical:{min:5e7,max:4e8}},"total-debt":{min:2e7,max:15e8,typical:{min:1e8,max:6e8}},"usable-reserves":{min:5e6,max:3e8,typical:{min:15e6,max:1e8}},"unusable-reserves":{min:5e7,max:2e9,typical:{min:2e8,max:8e8}},"pension-liability":{min:1e8,max:3e9,typical:{min:3e8,max:15e8}},"finance-leases-pfi-liabilities":{min:1e6,max:2e8,typical:{min:5e6,max:5e7}}}[l];if(!m)return{isValid:!0};const w=u<m.typical.min||u>m.typical.max;if(u<m.min||u>m.max){let T=null,S="";if(u>m.max*100)T=u/1e6,S="Looks like you entered pounds instead of millions";else if(u>m.max*10){const M=u.toString();M.length>=3&&(T=parseFloat(M.slice(0,-3)+"."+M.slice(-3)),S="Missing decimal point?")}else u>m.max*1e3&&u%1e3===0&&(T=u/1e3,S="You may have entered thousands instead of millions");return T&&(T<m.min||T>m.max)&&(T=null),{isValid:!1,severity:"error",message:`This value (${(u*1e6).toLocaleString("en-GB")}) seems unrealistic for ${Oc(l)}. Most UK councils have ${Oc(l).toLowerCase()} between ${(m.typical.min*1e6).toLocaleString("en-GB")} and ${(m.typical.max*1e6).toLocaleString("en-GB")}.`,suggestedValue:T,suggestion:S,range:m}}else if(w)return{isValid:!1,severity:"warning",message:`This value is higher than typical for ${Oc(l)}. Most UK councils range from ${(m.typical.min*1e6).toLocaleString("en-GB")} to ${(m.typical.max*1e6).toLocaleString("en-GB")}. Please double-check this figure.`,suggestedValue:null,range:m};return{isValid:!0}},Oc=l=>({"business-rates-income":"Business Rates Income","council-tax-income":"Council Tax Income","total-income":"Total Income","non-ring-fenced-government-grants-income":"Government Grants Income","total-expenditure":"Total Expenditure","interest-paid":"Interest Paid","capital-expenditure":"Capital Expenditure","current-liabilities":"Current Liabilities","long-term-liabilities":"Long-term Liabilities","total-debt":"Total Debt","usable-reserves":"Usable Reserves","unusable-reserves":"Unusable Reserves","pension-liability":"Pension Liability","finance-leases-pfi-liabilities":"Finance Leases & PFI Liabilities"})[l]||l.split("-").map(c=>c.charAt(0).toUpperCase()+c.slice(1)).join(" "),nx=(l,i,c={})=>{const u=parseInt(i);if(isNaN(u)||u<=0)return{isValid:!0};if(l==="population"&&(u<5e4||u>17e5)){let w=null,b="";return u<1e3&&(w=u*1e3,b="Did you mean thousands?"),{isValid:!1,severity:"error",message:`Population of ${u.toLocaleString()} seems unrealistic for a UK council. Most councils serve between 50,000 and 1,700,000 people.`,suggestedValue:w,suggestion:b}}return{isValid:!0}},sx=(l,i,c={})=>{if(!i||i==="")return{isValid:!0};switch(l.contentType||l.content_type){case"monetary":return ax(l.slug,i,c);case"integer":return nx(l.slug,i,c);default:return{isValid:!0}}},rx=({field:l,value:i="",onSave:c,onValidate:u,onTrackChange:d,error:m,disabled:w=!1,showPopulationContext:b=!1,yearContext:T=null,allFieldValues:S={},className:M=""})=>{const[k,h]=j.useState(i||""),[v,y]=j.useState(i||""),[x,_]=j.useState(!i||i===""),[le,Z]=j.useState(!1),[z,ae]=j.useState(!1),[Q,fe]=j.useState(""),[de,Y]=j.useState(null),[J,re]=j.useState(!1),[ne,ie]=j.useState(!1),[ce,je]=j.useState(!1),[we,N]=j.useState(null),[A,q]=j.useState(null);j.useEffect(()=>{(!x||!k)&&(h(i||""),(!i||i==="")&&_(!0))},[i]);const X=j.useCallback(ge=>{if(!ge||ge==="")return"Not set";if((l.contentType||l.content_type)==="monetary"){const rt=parseFloat(ge);if(!isNaN(rt)){const nt=rt,et=rt>=1e6?`${(rt/1e6).toFixed(1)}m`:`${rt.toLocaleString()}`;return`${new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:0,maximumFractionDigits:0}).format(nt)} (${et})`}}return ge},[l]),p=()=>l.name?l.name:l.slug||"Unknown Field",L=()=>{var Ae;return l.description?l.description:{population:b?`Population data ${T?`for ${T}`:"for display purposes"}`:"Current population of the council area",households:"Number of households in the council area","council-hq-post-code":"Postcode for the main council headquarters","current-liabilities":"Short-term financial obligations due within one year","long-term-liabilities":"Financial obligations due after one year","usable-reserves":"Funds available for council use","unusable-reserves":"Restricted funds not available for general use","finance-leases-pfi-liabilities":"PFI and lease obligations","total-income":"All revenue received during the financial year","total-expenditure":"All spending during the financial year","business-rates-income":"Revenue from business rates","council-tax-income":"Revenue from council tax","non-ring-fenced-government-grants-income":"Government grants without spending restrictions","interest-paid":"Interest payments on borrowing"}[l.slug]||`Enter ${((Ae=l.name)==null?void 0:Ae.toLowerCase())||"value"}`},K=()=>(l.contentType||l.content_type)!=="monetary"?null:{"current-liabilities":"Find in Balance Sheet  Current Liabilities section","long-term-liabilities":"Find in Balance Sheet  Long-term Liabilities section","total-income":"Find in Income & Expenditure Statement  Total Income","total-expenditure":"Find in Income & Expenditure Statement  Total Expenditure","usable-reserves":"Find in Balance Sheet  Reserves section","unusable-reserves":"Find in Balance Sheet  Reserves section"}[l.slug],ee=()=>{v&&v!==""?re(!0):(_(!0),Z(!0))},$=()=>{_(!0),Z(!0),re(!1)},I=()=>{re(!1)},he=()=>{h(v),_(!1),Z(!1),fe("")},_e=j.useCallback(async ge=>{const Ae=sx(l,ge);if(!Ae.isValid&&Ae.severity==="error"){N(Ae),q(ge),je(!0);return}!Ae.isValid&&Ae.severity==="warning"&&fe(` ${Ae.message}`),await ve(ge)},[l]),ve=j.useCallback(async ge=>{ae(!0),fe("");try{const Ae=await c(ge);Ae!=null&&Ae.success&&(fe(" Saved successfully"),d&&d(l.slug,{fieldName:p(),fieldSlug:l.slug,originalValue:v,newValue:ge,originalFormatted:X(v),newFormatted:X(ge),saved:!0}),ie(!1),y(ge),setTimeout(()=>{fe("")},2e3))}catch(Ae){fe(` ${Ae.message||"Failed to save"}`)}finally{ae(!1)}},[v,c,d,l,p,X]),Ue=j.useCallback(async ge=>{de&&clearTimeout(de);const Ae=setTimeout(async()=>{ge!==v&&await _e(ge)},1e3);Y(Ae)},[de,v,_e]),me=ge=>{h(ge),fe(""),ie(ge!==v),ge!==v&&d&&d(l.slug,{fieldName:p(),fieldSlug:l.slug,originalValue:v,newValue:ge,originalFormatted:X(v),newFormatted:X(ge)}),w||Ue(ge)},pe=()=>{var et;const ge=l.contentType||l.content_type,Ae=`
      block w-full border-2 border-gray-300 px-3 py-3
      text-base min-h-[48px] font-normal bg-white
      focus:ring-0 focus:border-blue-600 focus:outline-none
      transition-colors duration-200
      ${w||z?"border-gray-300 bg-gray-50 text-gray-600 cursor-not-allowed":"hover:border-gray-400"}
      ${Q.startsWith("")?"!border-green-500":Q.startsWith("")?"!border-yellow-500":""}
      ${m?"!border-red-500":""}
    `,rt=()=>{Z(!0)},nt=()=>{x||Z(!1)};switch(ge){case"monetary":const tt=()=>{let Xe="monetary-input-group input-group--both";return m&&(Xe+=" monetary-input-group--error"),Q.startsWith("")&&(Xe+=" monetary-input-group--success"),(z||w)&&(Xe+=" monetary-input-group--disabled"),Xe};return n.jsxs("div",{className:tt(),children:[n.jsx("span",{className:"input-group__leading",children:""}),n.jsx("input",{id:`field-${l.slug}`,type:"number",value:k,onChange:Xe=>me(Xe.target.value),onFocus:rt,onBlur:nt,className:`input-group__input ${m?"error":Q.startsWith("")?"success":Q.startsWith("")?"warning":""}`,placeholder:"0.00",min:"0",step:"0.01",disabled:z||w,inputMode:"decimal"}),n.jsx("span",{className:"input-group__trailing",children:"pounds"})]});case"integer":return n.jsx("input",{id:`field-${l.slug}`,type:"number",value:k,onChange:Xe=>me(Xe.target.value),onFocus:rt,onBlur:nt,className:Ae,placeholder:"Enter number...",min:"0",step:"1",disabled:z||w,inputMode:"numeric"});default:return n.jsx("input",{id:`field-${l.slug}`,type:"text",value:k,onChange:Xe=>me(Xe.target.value),onFocus:rt,onBlur:nt,className:Ae,placeholder:`Enter ${((et=l.name)==null?void 0:et.toLowerCase())||"value"}...`,disabled:z||w})}};return n.jsxs("div",{className:`space-y-4 ${M}`,children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-900",htmlFor:`field-${l.slug}`,children:[p(),l.required&&n.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),!x&&v&&n.jsx("button",{onClick:ee,className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Edit"}),x&&v&&n.jsx("button",{onClick:he,className:"text-sm text-gray-600 hover:text-gray-800",children:"Cancel"})]}),n.jsx("p",{className:"text-sm text-gray-600",children:L()}),!x&&v&&n.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium text-green-800",children:"Current value:"}),n.jsx("div",{className:"text-green-600",children:n.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]}),n.jsx("div",{className:"text-lg font-semibold text-green-900",children:X(v)})]}),x&&n.jsxs("div",{className:"space-y-2",children:[pe(),z&&n.jsxs("p",{className:"text-xs text-gray-500 flex items-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border border-gray-400 border-t-transparent mr-2"}),"Saving..."]})]}),le&&n.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200",children:n.jsxs("div",{className:"space-y-2",children:[K()&&n.jsxs("p",{className:"text-sm text-blue-800",children:[n.jsx("strong",{children:" Where to find:"})," ",K()]}),(l.contentType==="monetary"||l.content_type==="monetary")&&n.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[n.jsx("p",{children:n.jsx("strong",{children:" Entry tips:"})}),n.jsxs("ul",{className:"list-disc list-inside ml-2 space-y-1",children:[n.jsx("li",{children:'Enter full amount in pounds (e.g., "4200000" for 4.2m)'}),n.jsx("li",{children:'You can use decimals for precision (e.g., "4200000.50")'}),n.jsx("li",{children:"Use Group figures if council has subsidiaries"}),n.jsx("li",{children:'Brackets "(268900)" means negative - enter "-268900"'})]})]})]})}),Q&&n.jsx("p",{className:`text-sm ${Q.startsWith("")?"text-green-600":Q.startsWith("")?"text-yellow-600":"text-red-600"}`,children:Q}),m&&n.jsx("p",{className:"text-sm text-red-600",children:m}),n.jsx(ex,{isVisible:J,title:`Edit ${p()}?`,message:n.jsxs("div",{className:"space-y-3",children:[n.jsx("p",{children:"You're about to edit existing data:"}),n.jsxs("div",{className:"p-3 bg-gray-100 border border-gray-200",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Current value:"}),n.jsx("div",{className:"font-medium text-gray-900",children:X(v)})]}),n.jsx("p",{className:"text-sm text-gray-600",children:"Any changes will be tracked and shown for your review before being saved permanently."})]}),confirmText:"Edit Field",cancelText:"Keep Current Value",type:"default",onConfirm:$,onCancel:I}),n.jsx(tx,{isVisible:ce,fieldName:p(),enteredValue:A,validationIssue:we,onAcceptValue:async ge=>{je(!1),await ve(ge)},onUseCorrection:async ge=>{je(!1),h(ge),await ve(ge)},onEditValue:()=>{je(!1),setTimeout(()=>{const ge=document.getElementById(`field-${l.slug}`);ge&&(ge.focus(),ge.select())},100)},onCancel:()=>{je(!1),h(v),q(null)}})]})},ix=({changes:l=[],onConfirm:i,onCancel:c,onEditField:u,isVisible:d=!1,className:m=""})=>{if(!d||!l.length)return null;const w=l.length;return n.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 ${m}`,children:n.jsxs("div",{className:"bg-white max-w-4xl w-full max-h-[80vh] overflow-hidden flex flex-col",children:[n.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Review Your Changes"}),n.jsxs("p",{className:"text-gray-600 mt-1",children:[w," field",w!==1?"s":""," will be updated"]})]}),n.jsx("button",{onClick:c,className:"text-gray-400 hover:text-gray-600","aria-label":"Close",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:n.jsx("div",{className:"space-y-4",children:l.map((b,T)=>n.jsxs("div",{className:"border border-gray-200 p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:b.fieldName}),n.jsx("button",{onClick:()=>u(b.fieldSlug),className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Edit Again"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"text-sm font-medium text-gray-700 flex items-center",children:[n.jsx("svg",{className:"w-4 h-4 mr-1 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 12H4"})}),"Original"]}),n.jsx("div",{className:"p-3 bg-red-50 border border-red-200 text-red-900",children:b.originalFormatted||"Not set"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"text-sm font-medium text-gray-700 flex items-center",children:[n.jsx("svg",{className:"w-4 h-4 mr-1 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"New"]}),n.jsx("div",{className:"p-3 bg-green-50 border border-green-200 text-green-900",children:b.newFormatted})]})]}),b.originalValue&&b.newValue&&n.jsx("div",{className:"mt-3 p-2 bg-blue-50 border border-blue-200",children:n.jsxs("p",{className:"text-xs text-blue-800",children:[n.jsx("strong",{children:"Impact:"})," This change will affect per-capita calculations and may update related metrics."]})})]},b.fieldSlug))})}),n.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"These changes will be saved immediately and update the council's financial data."}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{onClick:c,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 font-medium transition-colors",children:"Cancel Changes"}),n.jsxs("button",{onClick:i,className:"px-6 py-2 bg-blue-600 text-white hover:bg-blue-700 font-medium transition-colors",children:["Confirm ",w," Change",w!==1?"s":""]})]})]}),n.jsx("div",{className:"px-6 py-3 bg-gray-50 border-t border-gray-200",children:n.jsxs("div",{className:"flex items-start space-x-2 text-xs text-gray-600",children:[n.jsx("svg",{className:"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Data Security:"})," All changes are logged and can be reviewed in the council's edit history."]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Calculations:"})," Updated figures will automatically recalculate per-capita metrics and comparisons."]})]})]})})]})})},lx=({councilData:l,selectedYear:i,selectedCategory:c,financialData:u={},availableFields:d=[],onSave:m,onValidate:w,onTrackChange:b,errors:T={},loading:S=!1,className:M=""})=>{const[k,h]=j.useState(!1),[v,y]=j.useState(""),[x,_]=j.useState({}),[le,Z]=j.useState(!1),z=j.useCallback(async(ie,ce)=>{h(!0),y("");try{const je=await m(ie,ce,i==null?void 0:i.id);return je!=null&&je.success&&(_(we=>{const N={...we};return delete N[ie],N}),y(`Field updated successfully! +${je.points||3} points`),setTimeout(()=>y(""),3e3)),je}catch(je){return console.error("Save error:",je),{success:!1,error:je.message}}finally{h(!1)}},[m,i==null?void 0:i.id]),ae=j.useCallback((ie,ce)=>{_(je=>({...je,[ie]:ce})),b&&b(ie,ce)},[b]),Q=j.useCallback(()=>{Object.values(x).length>0&&Z(!0)},[x]),fe=j.useCallback(async()=>{_({}),Z(!1),y("All changes confirmed! Category progress updated."),setTimeout(()=>y(""),3e3)},[]),de=j.useCallback(()=>{Z(!1)},[]),Y=j.useCallback(ie=>{Z(!1);const ce=document.getElementById(`field-${ie}`);ce&&(ce.focus(),ce.scrollIntoView({behavior:"smooth",block:"center"}))},[]),J=j.useCallback(ie=>u[ie]||"",[u]),ne=(()=>{const ie=d.filter(ce=>u[ce.slug]&&u[ce.slug].toString().trim().length>0).length;return{completed:ie,total:d.length,percentage:d.length>0?Math.round(ie/d.length*100):0}})();return S?n.jsxs("div",{className:"flex items-center justify-center py-12",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-blue-500 border-t-transparent mr-3"}),n.jsx("span",{className:"text-gray-600",children:"Loading fields..."})]}):d.length?n.jsxs("div",{className:`${M}`,children:[n.jsxs("div",{className:"mb-8 p-4 bg-gray-50 border border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Category Progress"}),n.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:[ne.percentage,"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 h-2 mb-2",children:n.jsx("div",{className:"bg-blue-600 h-2 transition-all duration-300",style:{width:`${ne.percentage}%`}})}),n.jsxs("p",{className:"text-sm text-gray-600",children:[ne.completed," of ",ne.total," fields completed"]})]}),v&&n.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-200",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 text-green-400 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),n.jsx("p",{className:"text-green-800",children:v})]})}),n.jsx("div",{className:"space-y-4",children:d.map(ie=>n.jsx("div",{className:"bg-white p-4 border-l-4 border-blue-200",children:n.jsx(rx,{field:ie,value:J(ie.slug),onSave:ce=>z(ie.slug,ce),onValidate:w,onTrackChange:ae,error:T[ie.slug],disabled:k,showPopulationContext:ie.slug==="population",yearContext:ie.slug==="population"?i==null?void 0:i.label:null,allFieldValues:u})},ie.slug))}),Object.keys(x).length>0&&n.jsx("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-yellow-900 mb-1",children:"Changes Ready for Review"}),n.jsxs("p",{className:"text-sm text-yellow-800",children:[Object.keys(x).length," field",Object.keys(x).length!==1?"s":""," updated in this category"]})]}),n.jsx("button",{onClick:Q,className:"px-4 py-2 bg-yellow-600 text-white hover:bg-yellow-700 font-medium transition-colors",children:"Review Changes"})]})}),n.jsxs("div",{className:"mt-8 p-4 bg-blue-50 border border-blue-200",children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:" Tips for this category"}),n.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[c==="basic"&&n.jsxs(n.Fragment,{children:[n.jsxs("p",{children:[" ",n.jsx("strong",{children:"Population:"})," Use the population for the financial year, not current population"]}),n.jsxs("p",{children:[" ",n.jsx("strong",{children:"Statement Link:"})," Link to the published annual financial statement PDF"]})]}),c==="income"&&n.jsxs(n.Fragment,{children:[n.jsxs("p",{children:[" ",n.jsx("strong",{children:"Figures in millions:"}),' Enter "4.2" for 4.2 million']}),n.jsxs("p",{children:[" ",n.jsx("strong",{children:"Find in:"})," Comprehensive Income and Expenditure Statement"]}),n.jsxs("p",{children:[" ",n.jsx("strong",{children:"Use Group figures"})," if the council has subsidiaries"]})]}),c==="balance"&&n.jsxs(n.Fragment,{children:[n.jsxs("p",{children:[" ",n.jsx("strong",{children:"Figures in millions:"}),' Enter "15.7" for 15.7 million']}),n.jsxs("p",{children:[" ",n.jsx("strong",{children:"Find in:"})," Balance Sheet section of annual accounts"]}),n.jsxs("p",{children:[" ",n.jsx("strong",{children:"Negative values:"})," Some reserves can be negative (deficit)"]})]}),c==="debt"&&n.jsxs(n.Fragment,{children:[n.jsxs("p",{children:[" ",n.jsx("strong",{children:"Long-term focus:"})," These are typically multi-year commitments"]}),n.jsxs("p",{children:[" ",n.jsx("strong",{children:"PFI contracts:"})," Include in finance leases if applicable"]})]}),n.jsx("p",{children:" Changes are saved automatically as you type"}),n.jsx("p",{children:' Click "Edit" on populated fields to modify existing data'}),n.jsx("p",{children:" Helper information appears when you focus on input fields"})]})]}),n.jsx(ix,{changes:Object.values(x),isVisible:le,onConfirm:fe,onCancel:de,onEditField:Y})]}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:""}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No fields in this category"}),n.jsx("p",{className:"text-gray-500",children:"There are no fields available for this category yet."})]})},ox=({isVisible:l=!1,changeCount:i=0,councilName:c="",councilSlug:u="",onReturnToCouncil:d,onContinueEditing:m,onClose:w,className:b=""})=>l?n.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 ${b}`,children:n.jsxs("div",{className:"bg-white max-w-md w-full border-0 shadow-xl",children:[n.jsxs("div",{className:"p-6 text-center",children:[n.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:n.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Changes Saved Successfully!"}),n.jsxs("p",{className:"text-gray-600",children:["You've updated ",i," field",i!==1?"s":""," for ",c,"."]})]}),n.jsxs("div",{className:"px-6 pb-6 space-y-3",children:[n.jsxs("button",{onClick:()=>{u&&(window.location.href=`/councils/${u}/`),d()},className:"w-full px-4 py-3 bg-blue-600 text-white hover:bg-blue-700 font-medium transition-colors flex items-center justify-center",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Return to Council Page"]}),n.jsxs("button",{onClick:m,className:"w-full px-4 py-3 bg-gray-100 text-gray-700 hover:bg-gray-200 font-medium transition-colors flex items-center justify-center",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add More Data"]})]}),n.jsx("div",{className:"px-6 pb-4 border-t border-gray-200 pt-4",children:n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("button",{onClick:()=>{u&&(window.location.href=`/councils/${u}/#financial-data`)},className:"text-sm text-blue-600 hover:text-blue-800",children:"View Updated Data on Council Page"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Your changes are live and visible to all users"})]})}),n.jsx("button",{onClick:w,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600","aria-label":"Close",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}):null,cx=({councilData:l,years:i=[],onBack:c,onSave:u,onValidate:d,csrfToken:m,className:w=""})=>{const[b,T]=j.useState(1),[S,M]=j.useState(null),[k,h]=j.useState(null),[v,y]=j.useState(null),[x,_]=j.useState(!1),[le,Z]=j.useState({}),[z,ae]=j.useState({}),[Q,fe]=j.useState({general:[],financial:[]}),[de,Y]=j.useState([]),[J,re]=j.useState({}),[ne,ie]=j.useState(!1),[ce,je]=j.useState(0);j.useEffect(()=>{S&&b>=2&&we(S)},[S]);const we=j.useCallback(async me=>{var pe,ge,Ae,rt;if(me!=null&&me.id){_(!0);try{const nt=await fetch(`/api/council/${l.slug}/temporal/${me.id}/`,{headers:{"X-CSRFToken":m}});if(nt.ok){const et=await nt.json();Z(et.general||{}),ae(et.financial||{}),fe({general:((pe=et.available_fields)==null?void 0:pe.general)||[],financial:((ge=et.available_fields)==null?void 0:ge.financial)||[]});const tt={population:"basic","financial-statement-link":"basic","statement-date":"basic","council-hq-post-code":"basic","total-income":"income","total-expenditure":"income","interest-payments":"income","interest-paid":"income","business-rates-income":"income","council-tax-income":"income","non-ring-fenced-government-grants-income":"income","capital-expenditure":"income","current-assets":"balance","current-liabilities":"balance","long-term-liabilities":"balance","total-reserves":"balance","usable-reserves":"balance","unusable-reserves":"balance","total-debt":"debt","pension-liability":"debt","finance-leases":"debt","finance-leases-pfi-liabilities":"debt"},Xe=new Set;(((Ae=et.available_fields)==null?void 0:Ae.financial)||[]).forEach(Et=>{const bt=tt[Et.slug];bt&&Xe.add(bt)}),(((rt=et.available_fields)==null?void 0:rt.financial)||[]).some(Et=>!tt[Et.slug])&&Xe.add("other"),Y(Array.from(Xe).map(Et=>({key:Et})))}}catch(nt){console.error("Error loading year data:",nt)}finally{_(!1)}}},[l==null?void 0:l.slug,m]),N=j.useCallback(me=>{const pe=Math.floor(Math.random()*15)+5,ge=20;return{completed:pe,total:ge,percentage:Math.round(pe/ge*100)}},[]),A=j.useCallback(me=>{const pe=N(me);return pe.percentage>=100?{label:"Complete",color:"green"}:pe.percentage>=75?{label:"Nearly complete",color:"blue"}:pe.percentage>=25?{label:"In progress",color:"amber"}:{label:"Needs attention",color:"red"}},[N]),q=me=>{M(me),T(2)},X=me=>{h(me),T(me==="pdf"?4:3)},p=me=>{y(me),T(4)},L=()=>{b===1?c():T(b===5?4:b-1)},K=me=>{me===1?T(1):me===2&&S?T(2):me===3&&S&&k?T(3):me===4&&S&&k&&(v||k==="pdf")&&T(4)},ee=()=>{const me=[{number:1,title:"Select Year",active:b>=1,completed:b>1,clickable:!0},{number:2,title:"Choose Method",active:b>=2,completed:b>2,clickable:S},{number:3,title:"Choose Category",active:b>=3,completed:b>3,clickable:S&&k},{number:4,title:"Edit Data",active:b>=4,completed:!1,clickable:S&&k&&(v||k==="pdf")}],pe=Object.keys(J).length;return n.jsxs("div",{id:"financial-wizard-progress",className:"mb-8",children:[n.jsx("div",{className:"flex items-center justify-between overflow-x-auto pb-2",children:me.map((ge,Ae)=>n.jsxs(Um.Fragment,{children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("button",{onClick:()=>ge.clickable?K(ge.number):null,disabled:!ge.clickable,className:`
                    w-8 h-8 rounded-full border-2 flex items-center justify-center text-sm font-medium transition-colors
                    ${ge.completed?"bg-blue-600 border-blue-600 text-white":ge.active?"border-blue-600 text-blue-600":"border-gray-300 text-gray-500"}
                    ${ge.clickable?"hover:border-blue-400 cursor-pointer":"cursor-not-allowed"}
                  `,children:ge.completed?n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}):ge.number}),n.jsx("span",{className:`ml-2 text-sm font-medium ${ge.active?"text-gray-900":"text-gray-500"}`,children:ge.title})]}),Ae<me.length-1&&n.jsx("div",{className:`flex-1 h-px mx-4 ${ge.completed?"bg-blue-600":"bg-gray-300"}`})]},ge.number))}),b>=3&&b!==5&&n.jsxs("div",{className:"mt-4 p-3 border flex items-center justify-between",style:{backgroundColor:pe>0?"#f0fdf4":"#eff6ff",borderColor:pe>0?"#bbf7d0":"#bfdbfe"},children:[n.jsx("div",{className:"flex items-center",children:pe>0?n.jsxs(n.Fragment,{children:[n.jsx("svg",{className:"w-5 h-5 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),n.jsxs("span",{className:"text-green-800 font-medium",children:[pe," change",pe!==1?"s":""," ready for review"]})]}):n.jsxs(n.Fragment,{children:[n.jsx("svg",{className:"w-5 h-5 text-blue-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),n.jsx("span",{className:"text-blue-800",children:"Edit any field and review changes, or go straight to review"})]})}),n.jsx("button",{onClick:()=>T(5),className:`px-4 py-2 font-medium transition-colors ${pe>0?"bg-green-600 text-white hover:bg-green-700":"bg-blue-600 text-white hover:bg-blue-700"}`,children:pe>0?"Review Changes":"Go to Review"})]})]})},$=()=>n.jsxs("div",{id:"financial-wizard-year-selection",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Select financial year"}),n.jsx("p",{className:"text-gray-600",children:"Which year would you like to edit financial data for?"})]}),n.jsx("div",{className:"space-y-3",children:i.map(me=>{const pe=N(me),ge=A(me);return n.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer group",onClick:()=>q(me),children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center",children:n.jsxs("div",{className:"mr-4",children:[n.jsx("div",{className:"text-lg font-semibold text-gray-900 group-hover:text-blue-600",children:me.label}),me.label.includes("2024")&&n.jsx("span",{className:"text-sm text-gray-500",children:"(Current year)"})]})}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:`text-sm font-medium text-${ge.color}-600`,children:ge.label}),n.jsxs("div",{className:"text-xs text-gray-500",children:[pe.completed,"/",pe.total," fields"]})]}),n.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full",children:n.jsx("div",{className:`h-2 bg-${ge.color}-500 rounded-full transition-all duration-300`,style:{width:`${pe.percentage}%`}})})]})]})},me.id)})}),n.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:n.jsx("p",{className:"text-sm text-blue-800",children:" You can add a new year if it's not listed above by contacting support."})})]}),I=()=>n.jsxs("div",{id:"financial-wizard-method-selection",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"How would you like to add financial data?"}),n.jsx("p",{className:"text-gray-600",children:"Choose the method that works best for you"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow cursor-pointer group",onClick:()=>X("pdf"),children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"text-3xl mr-4",children:""}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 group-hover:text-blue-600 mb-2",children:"Upload Financial Statement (Recommended)"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Upload a PDF of the annual financial statement. Our AI will extract the data automatically."}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-4",children:[n.jsxs("div",{className:"flex items-center text-sm text-green-700",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Fast and accurate"]}),n.jsxs("div",{className:"flex items-center text-sm text-green-700",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Extracts 20+ figures"]}),n.jsxs("div",{className:"flex items-center text-sm text-green-700",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"You review before saving"]})]}),n.jsx("button",{className:"bg-blue-600 text-white px-6 py-3 rounded-md font-medium hover:bg-blue-700 group-hover:bg-blue-700 transition-colors",children:" Upload PDF Statement"})]})]})}),n.jsx("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow cursor-pointer group",onClick:()=>X("manual"),children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"text-3xl mr-4",children:""}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 group-hover:text-blue-600 mb-2",children:"Enter Data Manually"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Type in financial figures one by one using our guided form."}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{className:"flex items-center text-sm text-amber-700",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.998-.833-2.768 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),"More time-consuming"]}),n.jsxs("div",{className:"flex items-center text-sm text-green-700",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Full control over each figure"]})]}),n.jsx("button",{className:"border border-gray-300 text-gray-700 px-6 py-3 rounded-md font-medium hover:bg-gray-50 group-hover:bg-gray-50 transition-colors",children:" Manual Entry"})]})]})})]})]}),he=()=>{const me=de.map(pe=>({...pe,completionPercentage:Math.floor(Math.random()*100),completed:Math.floor(Math.random()*5),total:5}));return n.jsx(Jv,{availableCategories:me,selectedCategory:v,onCategorySelect:p,onBack:L})},_e=()=>{if(k==="pdf")return n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-6xl mb-6",children:""}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"PDF Upload Coming Soon"}),n.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"The PDF upload feature is currently being developed. For now, please use manual entry to add your financial data."}),n.jsx("button",{onClick:()=>{h("manual"),T(3)},className:"bg-blue-600 text-white px-6 py-3 font-medium hover:bg-blue-700 transition-colors",children:"Switch to Manual Entry"})]});const me=Q.financial.filter(pe=>({population:"basic","financial-statement-link":"basic","statement-date":"basic","council-hq-post-code":"basic","total-income":"income","total-expenditure":"income","interest-payments":"income","interest-paid":"income","business-rates-income":"income","council-tax-income":"income","non-ring-fenced-government-grants-income":"income","capital-expenditure":"income","current-assets":"balance","current-liabilities":"balance","long-term-liabilities":"balance","total-reserves":"balance","usable-reserves":"balance","unusable-reserves":"balance","total-debt":"debt","pension-liability":"debt","finance-leases":"debt","finance-leases-pfi-liabilities":"debt"})[pe.slug]===v);return n.jsxs("div",{id:"financial-wizard-data-entry",className:"mx-auto",children:[n.jsx("div",{className:"mb-8 p-4 bg-blue-50 border-l-4 border-blue-500",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:[v==="basic"&&" Basic Information",v==="income"&&" Income & Expenditure",v==="balance"&&" Balance Sheet",v==="debt"&&" Debt & Obligations",v==="other"&&" Additional Fields"]}),n.jsxs("p",{className:"text-gray-600 mt-1",children:[S==null?void 0:S.label,"  ",me.length," fields in this category"]})]}),n.jsx("button",{onClick:()=>T(3),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:" Change Category"})]})}),n.jsx(lx,{councilData:l,selectedYear:S,selectedCategory:v,financialData:z,availableFields:me,onSave:u,onValidate:d,onTrackChange:(pe,ge)=>{re(Ae=>({...Ae,[pe]:ge}))},errors:{},loading:x})]})},ve=()=>{const me=Object.values(J);return me.length===0?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center py-12 bg-white border border-gray-200",children:[n.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Review & Save"}),n.jsx("p",{className:"text-gray-500 mb-6 max-w-md mx-auto",children:"You haven't made any changes yet. You can either:"}),n.jsxs("div",{className:"space-y-3 max-w-sm mx-auto",children:[n.jsxs("button",{onClick:()=>T(3),className:"w-full px-4 py-3 bg-blue-600 text-white hover:bg-blue-700 transition-colors flex items-center justify-center",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit Financial Data"]}),n.jsx("button",{onClick:()=>{T(1)},className:"w-full px-4 py-3 text-gray-700 bg-gray-100 hover:bg-gray-200 transition-colors",children:"Exit Without Changes"})]})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-4",children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:" Quick Edit Mode"}),n.jsx("p",{className:"text-sm text-blue-800 mb-3",children:"You can edit just one or two fields without completing all categories:"}),n.jsxs("ol",{className:"text-sm text-blue-800 space-y-1 list-decimal list-inside",children:[n.jsx("li",{children:"Go to the category containing your field"}),n.jsx("li",{children:"Edit just the field you need"}),n.jsx("li",{children:'Click "Review & Save" to save your single change'})]})]})]}):n.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Review All Changes"}),n.jsxs("p",{className:"text-gray-600",children:[me.length," field",me.length!==1?"s":""," have been updated across all categories"]})]}),n.jsx("div",{className:"space-y-4",children:me.map((pe,ge)=>n.jsxs("div",{className:"border border-gray-200 p-4",children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsx("h3",{className:"font-medium text-gray-900",children:pe.fieldName})}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"text-sm font-medium text-gray-700 flex items-center",children:[n.jsx("svg",{className:"w-4 h-4 mr-1 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 12H4"})}),"Original"]}),n.jsx("div",{className:"p-3 bg-red-50 border border-red-200 text-red-900",children:pe.originalFormatted||"Not set"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"text-sm font-medium text-gray-700 flex items-center",children:[n.jsx("svg",{className:"w-4 h-4 mr-1 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"New"]}),n.jsx("div",{className:"p-3 bg-green-50 border border-green-200 text-green-900",children:pe.newFormatted})]})]})]},pe.fieldName||ge))}),n.jsxs("div",{className:"pt-6 border-t border-gray-200",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-center space-x-3",children:[n.jsxs("button",{onClick:()=>{je(me.length),ie(!0),re({})},className:"px-6 py-3 bg-green-600 text-white hover:bg-green-700 font-medium transition-colors flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Confirm & Save Changes"]}),n.jsxs("button",{onClick:()=>T(3),className:"px-6 py-3 bg-blue-600 text-white hover:bg-blue-700 font-medium transition-colors flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Save & Continue Editing"]})]}),n.jsxs("div",{className:"flex justify-center space-x-6 pt-2",children:[n.jsx("button",{onClick:()=>{re({}),T(1)},className:"text-sm text-gray-600 hover:text-gray-800",children:"Discard Changes"}),n.jsx("button",{onClick:()=>{re({}),T(1)},className:"text-sm text-gray-600 hover:text-gray-800",children:"Start Over"})]})]}),n.jsx("div",{className:"text-center mt-6 p-3 bg-blue-50 border border-blue-200",children:n.jsxs("p",{className:"text-sm text-blue-800",children:[n.jsx("strong",{children:"Note:"})," Your changes have been auto-saved. You have successfully updated ",me.length," field",me.length!==1?"s":"","."]})})]})]})},Ue=()=>{const me=Object.keys(J).length;return(b===3||b===4)&&me>0&&b!==5?n.jsx("div",{className:"fixed bottom-6 right-6 z-40",children:n.jsx("div",{className:"flex flex-col items-end space-y-3",children:n.jsxs("div",{className:"bg-white border border-gray-200 shadow-lg rounded-lg p-3 mr-2",children:[n.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[me," unsaved change",me!==1?"s":""]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("button",{onClick:()=>T(5),className:"w-full px-4 py-2 bg-green-600 text-white hover:bg-green-700 font-medium transition-colors flex items-center justify-center",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Review & Save"]}),n.jsx("button",{onClick:()=>T(3),className:"w-full px-3 py-1 text-sm text-gray-600 hover:bg-gray-50 transition-colors",children:"Switch Category"})]})]})})}):(b===3||b===4)&&b!==5?n.jsx("div",{className:"fixed bottom-6 right-6 z-40",children:n.jsx("button",{onClick:()=>T(5),className:"bg-blue-600 text-white p-4 rounded-full shadow-lg hover:bg-blue-700 transition-all hover:scale-110",title:"Go to Review",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})}):null};return n.jsxs("div",{id:"financial-wizard-main",className:`bg-gray-50 min-h-screen ${w}`,children:[n.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[n.jsxs("div",{id:"financial-wizard-header",className:"mb-8",children:[n.jsxs("button",{onClick:L,className:"inline-flex items-center text-blue-600 hover:text-blue-800 text-sm font-medium mb-4",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),"Back"]}),n.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"Financial Data"}),n.jsxs("p",{className:"text-lg text-gray-600",children:["Edit financial information for ",l==null?void 0:l.name]})]}),ee(),n.jsxs("div",{id:"financial-wizard-content",children:[x&&n.jsxs("div",{className:"flex items-center justify-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-blue-500 border-t-transparent mr-3"}),n.jsx("span",{className:"text-gray-600",children:"Loading financial data..."})]}),!x&&b===1&&$(),!x&&b===2&&I(),!x&&b===3&&he(),!x&&b===4&&_e(),!x&&b===5&&ve()]})]}),Ue(),n.jsx(ox,{isVisible:ne,changeCount:ce,councilName:l==null?void 0:l.name,councilSlug:l==null?void 0:l.slug,onReturnToCouncil:()=>{ie(!1),l!=null&&l.slug&&(window.location.href=`/councils/${l.slug}/`)},onContinueEditing:()=>{ie(!1),T(3)},onClose:()=>ie(!1)})]})},ux=({councilData:l,initialYears:i,csrfToken:c})=>{const{isMobile:u,isTablet:d}=$v(),[m,w]=j.useState("landing"),[b,T]=j.useState(null),[S,M]=j.useState(!1),[k,h]=j.useState(!1),[v,y]=j.useState({}),[x,_]=j.useState({characteristics:0,financial:0,total:0,points:0}),[le,Z]=j.useState({}),[z,ae]=j.useState({}),[Q,fe]=j.useState({characteristics:[],financial:[]}),[de,Y]=j.useState(i||[]),[J,re]=j.useState(null),ne=j.useCallback(async()=>{if(l!=null&&l.slug)try{let p=`/api/council/${l.slug}/completion/`;b!=null&&b.id&&(p+=`${b.id}/`);const L=await fetch(p,{headers:{"X-CSRFToken":c,"X-Requested-With":"XMLHttpRequest"}});if(L.ok){const K=await L.json();K.success&&(re(K.completion),_({characteristics:K.completion.by_category.characteristics.complete,financial:K.completion.by_category.financial.complete,total:K.completion.overall.complete,points:Math.round(K.completion.overall.complete*2.5)}),console.log(` Progress updated via API: ${K.completion.focus.year_label} (Financial: ${K.completion.focus.financial_progress}%)`))}}catch(p){console.error("Failed to update completion progress:",p)}},[l==null?void 0:l.slug,b==null?void 0:b.id,c]);j.useEffect(()=>{l!=null&&l.slug&&ie()},[l==null?void 0:l.slug]),j.useEffect(()=>{b&&m==="financial"&&ce(b),b&&ne()},[b,m,ne]);const ie=j.useCallback(async()=>{var p;M(!0);try{const L=await fetch(`/api/council/${l.slug}/characteristics/`,{headers:{"X-CSRFToken":c}});if(L.ok){const ee=await L.json();Z(ee.characteristics||{}),fe($=>({...$,characteristics:ee.available_fields||[]})),await ne()}const K=await fetch(`/api/council/${l.slug}/years/`,{headers:{"X-CSRFToken":c}});if(K.ok){const ee=await K.json();Y(ee.years||[]),((p=ee.years)==null?void 0:p.length)>0&&!b&&T(ee.years[0])}q()}catch(L){console.error("Error loading council data:",L),y({general:"Failed to load council data. Please refresh the page."})}finally{M(!1)}},[l==null?void 0:l.slug,c]),ce=j.useCallback(async p=>{var L;if(p!=null&&p.id){M(!0);try{const K=await fetch(`/api/council/${l.slug}/temporal/${p.id}/`,{headers:{"X-CSRFToken":c}});if(K.ok){const ee=await K.json();if(ae(ee.financial||{}),(L=ee.available_fields)!=null&&L.financial){fe(he=>({...he,financial:ee.available_fields.financial||[]}));const $=Object.keys(ee.financial||{}).length,I=ee.available_fields.financial.length;_(he=>({...he,financial:$}))}}}catch(K){console.error("Error loading financial data:",K),y({financial:"Failed to load financial data."})}finally{M(!1)}}},[l==null?void 0:l.slug,c]),je=j.useCallback(async(p,L,K=null)=>{h(!0);const ee=m==="characteristics"?"characteristics":"financial";ee==="characteristics"?Z($=>({...$,[p]:L})):ee==="financial"&&ae($=>({...$,[p]:L}));try{const $=ee==="characteristics"?`/api/council/${l.slug}/characteristics/save/`:`/api/council/${l.slug}/temporal/${K}/save/`,I=await fetch($,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":c},body:JSON.stringify({field:p,value:L,category:ee})}),he=await I.json();if(I.ok&&he.success)return y(_e=>{const ve={..._e};return delete ve[p],ve}),await ne(),X(`${he.field_name||"Field"} updated successfully! +${he.points||3} points`),{success:!0,points:he.points};throw new Error(he.message||"Failed to save field")}catch($){return console.error("Error saving field:",$),ie(),y(I=>({...I,[p]:$.message||"Failed to save field"})),{success:!1,error:$.message}}finally{h(!1)}},[l==null?void 0:l.slug,c,ie,m]),we=j.useCallback(async(p,L)=>{try{return await(await fetch("/api/validate-url/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":c},body:JSON.stringify({url:L,field_slug:p})})).json()}catch(K){return console.error("Error validating field:",K),{valid:!1,message:"Validation service unavailable"}}},[c]),N=j.useCallback(p=>{p==="characteristics"?w("characteristics"):p==="financial"&&w("financial")},[]),A=j.useCallback(()=>{w("landing"),T(null),y({})},[]),q=j.useCallback(()=>{ne()},[ne]),X=j.useCallback(p=>{console.log("Success:",p)},[]);return S&&Object.keys(le).length===0&&Object.keys(z).length===0?n.jsx("div",{id:"council-edit-loading",className:"flex items-center justify-center min-h-screen",children:n.jsx(Bs,{size:"large",message:"Loading council data..."})}):n.jsxs("div",{id:"council-edit-main-container",className:"min-h-screen bg-gray-50",children:[m==="landing"&&n.jsx(Wv,{councilData:l,progress:x,onChoiceSelect:N,className:"min-h-screen"}),m==="characteristics"&&n.jsx(Pv,{councilData:l,characteristics:le,availableFields:Q.characteristics,onSave:je,onValidate:we,onBack:A,errors:v,loading:S,className:"min-h-screen"}),m==="financial"&&n.jsx(cx,{councilData:l,years:de,onBack:A,onSave:(p,L,K)=>je(p,L,K),onValidate:we,csrfToken:c,className:"min-h-screen"}),v.general&&n.jsx("div",{id:"council-edit-error",className:"fixed bottom-4 left-4 right-4 z-50 p-4 bg-red-50 border border-red-200 rounded-lg shadow-lg",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 text-red-400 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),n.jsx("p",{className:"text-red-800",children:v.general}),n.jsx("button",{onClick:()=>y(p=>({...p,general:null})),className:"ml-auto text-red-600 hover:text-red-800",children:""})]})})]})},rh=({councils:l,selectedFields:i,selectedYears:c,availableFields:u=[],availableYears:d=[],onFieldsChange:m,onYearsChange:w,onClose:b,apiUrls:T,csrfToken:S})=>{const[M,k]=j.useState({}),[h,v]=j.useState(!1),[y,x]=j.useState(!1),[_,le]=j.useState(!1);j.useEffect(()=>{l.length>0&&i.length>0&&c.length>0&&Z()},[l,i,c]);const Z=async()=>{v(!0);try{const Y=await fetch("/api/comparison/data/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":S},body:JSON.stringify({councils:l.map(J=>J.slug),fields:i.map(J=>J.slug),years:c.map(J=>J.label||J)})});if(Y.ok){const J=await Y.json();k(J.data||{})}}catch(Y){console.error("Failed to load comparison data:",Y)}finally{v(!1)}},z=Y=>{i.find(J=>J.slug===Y.slug)||m([...i,Y]),x(!1)},ae=Y=>{m(i.filter(J=>J.slug!==Y))},Q=Y=>{c.find(J=>(J.id||J)===(Y.id||Y))||w([...c,Y]),le(!1)},fe=Y=>{w(c.filter(J=>(J.id||J)!==Y))},de=Y=>Y==null||Y===""?"No data":typeof Y=="number"?Y.toLocaleString():Y;return n.jsxs("div",{className:"fixed inset-0 bg-white z-40 overflow-hidden",children:[n.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Compare ",l.length," Council",l.length===1?"":"s"]}),n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[i.length," characteristic",i.length===1?"":"s","  ",c.length," year",c.length===1?"":"s"]})]}),n.jsx("button",{onClick:b,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close comparison",children:n.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"bg-gray-50 border-b border-gray-200 px-6 py-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("button",{onClick:()=>x(!y),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Field"]}),i.length>0&&n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Fields:"}),i.map(Y=>n.jsxs("span",{className:"inline-flex items-center bg-white border border-gray-200 rounded-full px-3 py-1 text-sm",children:[Y.name,n.jsx("button",{onClick:()=>ae(Y.slug),className:"ml-2 text-gray-400 hover:text-red-600 transition-colors",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},Y.slug))]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("button",{onClick:()=>le(!_),className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),c.length>0?`${c.length} Year${c.length===1?"":"s"}`:"Add Year"]}),c.length>0&&n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Years:"}),c.map(Y=>n.jsxs("span",{className:"inline-flex items-center bg-white border border-gray-200 rounded-full px-3 py-1 text-sm",children:[Y.label||Y,n.jsx("button",{onClick:()=>fe(Y.id||Y),className:"ml-2 text-gray-400 hover:text-red-600 transition-colors",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},Y.id||Y))]})]})]}),y&&n.jsxs("div",{className:"absolute mt-2 w-80 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:[n.jsx("div",{className:"p-3 border-b border-gray-200",children:n.jsx("h3",{className:"font-medium text-gray-900",children:"Choose fields to compare"})}),n.jsx("div",{className:"max-h-60 overflow-y-auto",children:u.filter(Y=>!i.find(J=>J.slug===Y.slug)).map(Y=>n.jsxs("button",{onClick:()=>z(Y),className:"w-full text-left px-3 py-2 hover:bg-blue-50 transition-colors border-b border-gray-100 last:border-b-0",children:[n.jsx("div",{className:"font-medium text-gray-900",children:Y.name}),Y.description&&n.jsx("div",{className:"text-sm text-gray-600 mt-1",children:Y.description})]},Y.slug))})]}),_&&n.jsxs("div",{className:"absolute right-6 mt-2 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:[n.jsx("div",{className:"p-3 border-b border-gray-200",children:n.jsx("h3",{className:"font-medium text-gray-900",children:"Choose years to compare"})}),n.jsx("div",{className:"max-h-60 overflow-y-auto",children:d.filter(Y=>!c.find(J=>(J.id||J)===(Y.id||Y))).map(Y=>n.jsxs("button",{onClick:()=>Q(Y),className:"w-full text-left px-3 py-2 hover:bg-green-50 transition-colors border-b border-gray-100 last:border-b-0",children:[n.jsx("div",{className:"font-medium text-gray-900",children:Y.label||Y}),Y.start_date&&Y.end_date&&n.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[new Date(Y.start_date).toLocaleDateString()," - ",new Date(Y.end_date).toLocaleDateString()]})]},Y.id||Y))})]})]}),n.jsx("div",{className:"flex-1 overflow-hidden",children:h?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading comparison data..."})]})}):i.length===0?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center max-w-md mx-auto px-6",children:[n.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Choose fields to compare"}),n.jsxs("p",{className:"text-gray-600",children:['Click "Add Field" above to start comparing data across your ',l.length," selected councils"]})]})}):n.jsxs("div",{className:"h-full flex flex-col",children:[n.jsx("div",{className:"flex-1 overflow-x-auto overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:n.jsx("div",{className:"min-w-full",children:n.jsx("div",{className:"grid gap-6 p-6",style:{gridTemplateColumns:`repeat(${l.length}, minmax(280px, 1fr))`},children:l.map(Y=>{var J,re;return n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm",children:[n.jsxs("div",{className:"bg-blue-50 border-b border-gray-200 px-4 py-3 rounded-t-lg",children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:Y.name}),n.jsxs("p",{className:"text-sm text-gray-600",children:[(J=Y.council_type)==null?void 0:J.name,"  ",(re=Y.council_nation)==null?void 0:re.name]})]}),n.jsx("div",{className:"p-4 space-y-4",children:i.map(ne=>n.jsxs("div",{className:"border-b border-gray-100 pb-3 last:border-b-0 last:pb-0",children:[n.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:ne.name}),c.map(ie=>{var ce,je,we;return n.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:[de((we=(je=(ce=M[Y.slug])==null?void 0:ce[ne.slug])==null?void 0:je[ie.label||ie])==null?void 0:we.value),c.length>1&&n.jsxs("span",{className:"text-sm text-gray-500 font-normal ml-2",children:["(",ie.label||ie,")"]})]},ie.label||ie)})]},ne.slug))})]},Y.slug)})})})}),l.length>3&&n.jsx("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-2 text-center",children:n.jsxs("p",{className:"text-sm text-gray-600 flex items-center justify-center",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16l-4-4m0 0l4-4m-4 4h18"})}),"Scroll horizontally to see all councils",n.jsx("svg",{className:"w-4 h-4 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})]})})]})},dx=({initialData:l={},onComparisonToggle:i})=>{var ae;const[c,u]=j.useState(l.councils||[]),[d,m]=j.useState(l.selectedFields||[]),[w,b]=j.useState(l.selectedYears||[]),[T,S]=j.useState(!1),[M,k]=j.useState(null),[h,v]=j.useState(null),[y,x]=j.useState(!1),[_]=j.useState({maxCouncils:6,apiUrls:{addToBasket:Q=>`/compare/add/${Q}/`,removeFromBasket:Q=>`/compare/remove/${Q}/`,clearBasket:"/compare/clear/",getBasketData:"/api/comparison/basket/",getFieldData:"/api/comparison/fields/",getYearData:"/api/comparison/years/",saveAsList:"/lists/create/",exportData:"/api/comparison/export/"},csrfToken:((ae=document.querySelector("[name=csrfmiddlewaretoken]"))==null?void 0:ae.value)||le(),availableFields:l.availableFields||[],availableYears:l.availableYears||[]});function le(){const Q="csrftoken",fe=document.cookie.split(";");for(let de of fe){const[Y,J]=de.trim().split("=");if(Y===Q)return decodeURIComponent(J)}return""}const Z=j.useCallback((Q,fe="success",de=4e3)=>{v({message:Q,type:fe}),setTimeout(()=>v(null),de)},[]),z=j.useCallback(async(Q,fe={})=>{try{k(null);const de=await fetch(Q,{method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded","X-CSRFToken":_.csrfToken,...fe.headers},...fe});if(!de.ok)throw new Error(`HTTP ${de.status}: ${de.statusText}`);return await de.json()}catch(de){throw console.error("API call failed:",de),k(de.message),Z(`Error: ${de.message}`,"error"),de}},[_.csrfToken,Z]);return j.useCallback(async Q=>{var fe;if(c.length>=_.maxCouncils){Z(`Maximum ${_.maxCouncils} councils allowed in basket`,"warning");return}try{S(!0);const de=await z(_.apiUrls.addToBasket(Q),{method:"POST"});de.success&&(u(Y=>!Y.some(re=>re.slug===Q)&&de.council?[...Y,de.council]:Y),Z(`${(fe=de.council)==null?void 0:fe.name} added to comparison basket`,"success"))}catch{}finally{S(!1)}},[c.length,_.maxCouncils,_.apiUrls.addToBasket,z,Z]),j.useCallback(async Q=>{try{S(!0),(await z(_.apiUrls.removeFromBasket(Q),{method:"POST"})).success&&(u(de=>de.filter(Y=>Y.slug!==Q)),Z("Council removed from basket","success"))}catch{}finally{S(!1)}},[_.apiUrls.removeFromBasket,z,Z]),j.useCallback(async()=>{if(window.confirm("Are you sure you want to clear your entire comparison basket?"))try{S(!0),(await z(_.apiUrls.clearBasket,{method:"POST"})).success&&(u([]),m([]),x(!1),Z("Comparison basket cleared","success"))}catch{}finally{S(!1)}},[_.apiUrls.clearBasket,z,Z]),j.useCallback((Q,fe)=>{u(de=>{const Y=[...de],[J]=Y.splice(Q,1);return Y.splice(fe,0,J),Y}),Z("Council order updated","success",2e3)},[Z]),j.useCallback((Q,fe)=>{m(de=>{const Y=[...de],[J]=Y.splice(Q,1);return Y.splice(fe,0,J),Y}),Z("Field order updated","success",2e3)},[Z]),j.useCallback(async(Q,fe="")=>{try{S(!0);const de=await z(_.apiUrls.saveAsList,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Q,description:fe,councils:c.map(Y=>Y.slug),is_comparison_export:!0,selected_fields:d.map(Y=>Y.slug),selected_years:w.map(Y=>Y.label||Y)})});if(de.success)return Z(`List "${Q}" created successfully`,"success"),de.list;throw new Error(de.message||"Failed to create list")}catch(de){throw Z(`Failed to create list: ${de.message}`,"error"),de}finally{S(!1)}},[_.apiUrls.saveAsList,z,c,d,w,Z]),j.useCallback(async(Q="csv")=>{try{S(!0);const fe=await fetch(_.apiUrls.exportData,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":_.csrfToken},body:JSON.stringify({councils:c.map(re=>re.slug),fields:d.map(re=>re.slug),years:w.map(re=>re.label||re),format:Q})});if(!fe.ok)throw new Error(`Export failed: ${fe.statusText}`);const de=await fe.blob(),Y=window.URL.createObjectURL(de),J=document.createElement("a");J.href=Y,J.download=`council-comparison-${new Date().toISOString().split("T")[0]}.${Q}`,document.body.appendChild(J),J.click(),window.URL.revokeObjectURL(Y),document.body.removeChild(J),Z(`Data exported as ${Q.toUpperCase()}`,"success")}catch(fe){Z(`Export failed: ${fe.message}`,"error")}finally{S(!1)}},[_.apiUrls.exportData,_.csrfToken,c,d,w,Z]),j.useEffect(()=>{if(i){const Q=document.getElementById("comparison-basket-react-root");Q&&(Q.setAttribute("data-react-mounted","true"),console.log(" ComparisonBasketApp mounted successfully")),window.openComparison=()=>{console.log(` openComparison called with ${c.length} councils`),c.length===0?Z("Your comparison basket is empty. Add councils to compare by visiting council pages.","warning"):c.length===1?Z("Please add another council to compare","warning"):(console.log(" Showing comparison overlay"),x(!0))}}return()=>{window.openComparison&&delete window.openComparison}},[c.length,i,Z]),j.useEffect(()=>{if(i&&c.length>=2){const Q=setTimeout(()=>{console.log(" Auto-showing comparison overlay on page load"),x(!0)},100);return()=>clearTimeout(Q)}},[i,c.length]),n.jsx(Xr,{children:n.jsxs("div",{id:"comparison-basket-app",className:"comparison-basket-app",children:[h&&n.jsx("div",{id:"comparison-notification",className:`fixed top-4 right-4 z-50 max-w-sm p-4 rounded-lg shadow-lg animate-slide-in ${h.type==="success"?"bg-green-50 border border-green-200 text-green-800":h.type==="warning"?"bg-yellow-50 border border-yellow-200 text-yellow-800":"bg-red-50 border border-red-200 text-red-800"}`,children:n.jsxs("div",{className:"flex items-start",children:[n.jsxs("div",{className:"flex-shrink-0 mr-3",children:[h.type==="success"&&n.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),h.type==="warning"&&n.jsx("svg",{className:"w-5 h-5 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),h.type==="error"&&n.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})]}),n.jsx("div",{className:"flex-1 text-sm",children:h.message}),n.jsx("button",{onClick:()=>v(null),className:"ml-3 text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),T&&n.jsx(Bs,{}),M&&n.jsx("div",{id:"comparison-error-display",className:"bg-red-50 border border-red-200 rounded-lg p-4 m-6",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("svg",{className:"w-5 h-5 text-red-500 mt-0.5 mr-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),n.jsxs("div",{className:"text-sm text-red-800",children:[n.jsx("strong",{children:"Error:"})," ",M]})]})}),c.length===0?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center max-w-md mx-auto px-6",children:[n.jsx("svg",{className:"w-20 h-20 text-gray-300 mx-auto mb-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13v6a2 2 0 002 2h6a2 2 0 002-2v-6M7 13H5.4"})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Council Comparison"}),n.jsxs("p",{className:"text-lg text-gray-600 mb-8",children:["Add councils to your comparison basket to get started. You can compare up to ",_.maxCouncils," councils side-by-side."]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("svg",{className:"w-5 h-5 text-blue-500 mt-0.5 mr-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),n.jsxs("div",{className:"text-sm text-blue-800",children:[n.jsx("strong",{children:"How to get started:"}),' Go to any council page and click "Add to comparison" to build your basket.']})]})})]})}):n.jsx(n.Fragment,{children:y&&n.jsx(rh,{councils:c,selectedFields:d,selectedYears:w,availableFields:_.availableFields,availableYears:_.availableYears,onFieldsChange:m,onYearsChange:b,onClose:()=>x(!1),apiUrls:_.apiUrls,csrfToken:_.csrfToken})})]})})},fx=({councilSlug:l,councilName:i,className:c=""})=>{const[u,d]=j.useState(!1),[m,w]=j.useState(0),[b,T]=j.useState(!1);j.useEffect(()=>{S()},[l]);const S=async()=>{try{const x=await fetch("/api/comparison/basket/");if(x.ok){const le=(await x.json()).councils||[];w(le.length),d(le.some(Z=>Z.slug===l))}}catch(x){console.error("Failed to check basket status:",x)}},M=async()=>{if(!(b||u)){T(!0);try{const x=await fetch(`/compare/add/${l}/`,{method:"POST",headers:{"X-CSRFToken":v(),"Content-Type":"application/x-www-form-urlencoded"}});if(x.ok){const _=await x.json();_.success?(d(!0),w(le=>le+1),y(`${i} added to comparison basket`,"success")):y(_.message||"Failed to add to basket","error")}}catch(x){console.error("Failed to add to basket:",x),y("Failed to add to basket","error")}finally{T(!1)}}},k=async()=>{if(!(b||!u)){T(!0);try{const x=await fetch(`/compare/remove/${l}/`,{method:"POST",headers:{"X-CSRFToken":v(),"Content-Type":"application/x-www-form-urlencoded"}});x.ok&&(await x.json()).success&&(d(!1),w(le=>Math.max(0,le-1)),y("Removed from comparison basket","success"))}catch(x){console.error("Failed to remove from basket:",x),y("Failed to remove from basket","error")}finally{T(!1)}}},h=()=>{window.location.href="/compare/"},v=()=>{var x,_;return((x=document.querySelector("[name=csrfmiddlewaretoken]"))==null?void 0:x.value)||((_=document.cookie.split("; ").find(le=>le.startsWith("csrftoken=")))==null?void 0:_.split("=")[1])||""},y=(x,_)=>{const le=document.createElement("div");le.className=`fixed top-4 right-4 z-50 max-w-sm p-4 rounded-lg shadow-lg animate-slide-in ${_==="success"?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,le.innerHTML=`
			<div class="flex items-start">
				<div class="flex-shrink-0 mr-3">
					${_==="success"?'<svg class="w-5 h-5 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>':'<svg class="w-5 h-5 text-red-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/></svg>'}
				</div>
				<div class="text-sm">${x}</div>
			</div>
		`,document.body.appendChild(le),setTimeout(()=>{document.body.removeChild(le)},4e3)};return u?n.jsxs("div",{className:`inline-flex items-center space-x-2 ${c}`,children:[n.jsxs("button",{onClick:k,disabled:b,className:"inline-flex items-center px-4 py-2 bg-green-100 text-green-800 border border-green-200 rounded-lg hover:bg-green-200 transition-colors disabled:opacity-50",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"In Basket"]}),m>1&&n.jsxs("button",{onClick:h,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:["Compare ",m," Councils",n.jsx("svg",{className:"w-4 h-4 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}):n.jsx("button",{onClick:M,disabled:b,className:`
				inline-flex items-center px-4 py-2 
				bg-blue-600 text-white rounded-lg 
				hover:bg-blue-700 active:bg-blue-800
				transition-colors duration-200 
				disabled:opacity-50 disabled:cursor-not-allowed
				font-medium shadow-sm hover:shadow-md
				${c}
			`,children:b?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin w-4 h-4 mr-2 border-2 border-white border-t-transparent rounded-full"}),"Adding..."]}):n.jsxs(n.Fragment,{children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add to Comparison"]})})},mx=()=>{const[l,i]=j.useState(!1),[c,u]=j.useState([]),[d,m]=j.useState([]),[w,b]=j.useState([]),[T,S]=j.useState([]),[M,k]=j.useState([]),[h,v]=j.useState(!1);j.useEffect(()=>{const le=setTimeout(()=>{window.openGlobalComparison=()=>{i(!0),y()}},100);return()=>{clearTimeout(le),window.openGlobalComparison&&delete window.openGlobalComparison}},[]);const y=async()=>{if(!h){v(!0);try{const[le,Z,z]=await Promise.all([fetch("/api/comparison/basket/"),fetch("/api/comparison/fields/"),fetch("/api/comparison/years/")]);if(le.ok){const ae=await le.json();u(ae.councils||[])}if(Z.ok){const ae=await Z.json();S(ae.fields||[])}if(z.ok){const ae=await z.json();k(ae.years||[]),ae.years&&ae.years.length>0&&w.length===0&&b([ae.years[0]])}}catch(le){console.error("Failed to load comparison data:",le)}finally{v(!1)}}},x=()=>{i(!1)},_=()=>{var le,Z;return((le=document.querySelector("[name=csrfmiddlewaretoken]"))==null?void 0:le.value)||((Z=document.cookie.split("; ").find(z=>z.startsWith("csrftoken=")))==null?void 0:Z.split("=")[1])||""};return l?c.length===0?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md mx-4 p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Comparison Basket"}),n.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"text-center py-8",children:[n.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13v6a2 2 0 002 2h6a2 2 0 002-2v-6M7 13H5.4"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Your comparison basket is empty"}),n.jsx("p",{className:"text-gray-600 mb-6",children:'Visit any council page and click "Add to Comparison" to start comparing councils.'}),n.jsx("button",{onClick:x,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Close"})]})]})}):n.jsx(rh,{councils:c,selectedFields:d,selectedYears:w,availableFields:T,availableYears:M,onFieldsChange:m,onYearsChange:b,onClose:x,apiUrls:{getFieldData:"/api/comparison/fields/",getYearData:"/api/comparison/years/",exportData:"/api/comparison/export/"},csrfToken:_()}):null},hx=({fields:l,onFieldDrop:i})=>{const[c,u]=j.useState(""),[d,m]=j.useState({core_variables:!0,calculated:!0,characteristics:!1,financial:!1,counters:!1}),w=y=>c?y.filter(x=>x.name.toLowerCase().includes(c.toLowerCase())||x.description.toLowerCase().includes(c.toLowerCase())||x.variable.toLowerCase().includes(c.toLowerCase())):y,b=(y,x)=>{y.dataTransfer.setData("application/json",JSON.stringify({type:"field",variable:x.variable,name:x.name,format_hint:x.format_hint})),y.target.style.opacity="0.7"},T=y=>{y.target.style.opacity="1"},S=y=>{m(x=>({...x,[y]:!x[y]}))},M=y=>{switch(y.format_hint){case"currency":case"currency_per_capita":return"";case"percentage":return"";case"number":return"";case"text":return"";default:return""}},k=(y,x)=>{if(y==null)return"No data";switch(x){case"currency":case"currency_per_capita":return typeof y=="number"?`${y.toLocaleString()}`:`${y}`;case"percentage":return`${y}%`;case"number":return typeof y=="number"?y.toLocaleString():y;default:return String(y)}},h=(y,x)=>n.jsxs("div",{className:"field-item",draggable:!0,onDragStart:_=>b(_,y),onDragEnd:T,title:`Drag to add: {${y.variable}}`,children:[n.jsx("div",{className:"field-icon text-xl",children:M(y)}),n.jsxs("div",{className:"field-content",children:[n.jsx("div",{className:"field-name",children:y.name}),n.jsx("div",{className:"field-description",children:y.description}),n.jsxs("div",{className:"field-sample",children:["Sample: ",k(y.sample_value,y.format_hint)]})]})]},`${y.slug}-${x}`),v=(y,x,_,le)=>{if(!x||x.length===0)return null;const Z=w(x);if(Z.length===0&&c)return null;const z=d[y];return n.jsxs("div",{className:"field-category",children:[n.jsxs("div",{className:"flex items-center justify-between cursor-pointer px-4 py-2 hover:bg-gray-100 rounded-lg mx-2",onClick:()=>S(y),children:[n.jsxs("h3",{className:"flex items-center text-sm font-semibold text-gray-700",children:[n.jsx("span",{className:"mr-2 text-lg",children:le}),_,n.jsx("span",{className:"ml-2 text-xs bg-gray-200 px-2 py-1 rounded-full",children:Z.length})]}),n.jsx("svg",{className:`w-4 h-4 transform transition-transform ${z?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),z&&n.jsx("div",{className:"mt-2",children:Z.map(h)})]},y)};return l?n.jsxs("div",{className:"h-full flex flex-col",children:[n.jsxs("div",{className:"p-4 border-b border-gray-200",children:[n.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-3",children:" Available Fields"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Drag fields into your template text to create dynamic factoids"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",placeholder:"Search fields...",value:c,onChange:y=>u(y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-2",children:[v("core_variables",l.core_variables,"Core Variables",""),v("calculated",l.calculated,"Calculated Values",""),v("characteristics",l.characteristics,"Council Info",""),v("financial",l.financial,"Financial Figures",""),v("counters",l.counters,"Counter Values","")]}),n.jsx("div",{className:"p-4 border-t border-gray-200 bg-blue-50",children:n.jsxs("div",{className:"text-xs text-blue-800",children:[n.jsx("p",{className:"font-semibold mb-1",children:" Quick Tips:"}),n.jsxs("ul",{className:"space-y-1 text-blue-700",children:[n.jsx("li",{children:" Drag fields into the template editor"}),n.jsx("li",{children:" Fields auto-format as currency/numbers"}),n.jsx("li",{children:" Preview updates in real-time"}),n.jsx("li",{children:" Use search to find specific fields"})]})]})})]}):n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),n.jsx("div",{className:"space-y-3",children:[...Array(6)].map((y,x)=>n.jsx("div",{className:"h-16 bg-gray-200 rounded"},x))})]})})},gx=({template:l,onChange:i,onFieldDrop:c})=>{const u=j.useRef(null),[d,m]=j.useState(!1),[w,b]=j.useState(0);j.useEffect(()=>{const h=u.current;if(!h)return;const v=()=>{b(h.selectionStart)};return h.addEventListener("selectionchange",v),h.addEventListener("click",v),h.addEventListener("keyup",v),()=>{h.removeEventListener("selectionchange",v),h.removeEventListener("click",v),h.removeEventListener("keyup",v)}},[]);const T=h=>{var y;h.preventDefault(),m(!0);const v=u.current;if(v){const x=v.getBoundingClientRect(),_=h.clientX-x.left,le=h.clientY-x.top,Z=24,z=8,ae=Math.floor(le/Z),Q=Math.floor(_/z),fe=v.value.split(`
`);let de=0;for(let Y=0;Y<ae&&Y<fe.length;Y++)de+=fe[Y].length+1;de+=Math.min(Q,((y=fe[ae])==null?void 0:y.length)||0),b(Math.min(de,v.value.length))}},S=h=>{h.currentTarget.contains(h.relatedTarget)||m(!1)},M=h=>{h.preventDefault(),m(!1);try{const v=JSON.parse(h.dataTransfer.getData("application/json"));if(v.type==="field"){let y=":currency";switch(v.format_hint){case"percentage":y=":percentage";break;case"number":y=":number";break;case"text":y="";break;case"currency_per_capita":y=":currency";break}const x=`{${v.variable}${y}}`;c(v.variable+y,w),setTimeout(()=>{var _;(_=u.current)==null||_.focus()},50)}}catch(v){console.error("Error handling drop:",v)}},k=h=>{const v=h.target.value;i("template_text",v),b(h.target.selectionStart)};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{className:"form-label",children:["Template Name",n.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),n.jsx("input",{type:"text",value:l.name,onChange:h=>i("name",h.target.value),placeholder:"e.g., Debt per capita comparison",className:"form-input",required:!0}),n.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"A descriptive name that helps identify this template"})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{className:"form-label",children:["Template Text",n.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("textarea",{ref:u,value:l.template_text,onChange:k,onDragOver:T,onDragLeave:S,onDrop:M,placeholder:`**{calculated.total_debt_per_capita:currency}** per head in {council_name} ({year_label})\r
                        \r
Drag fields from the sidebar to insert them, or type your template text using the {variable:format} syntax.`,className:`form-textarea ${d?"drag-over border-blue-500 bg-blue-50":""}`,rows:"8",required:!0}),d&&n.jsx("div",{className:"absolute inset-0 border-2 border-dashed border-blue-500 bg-blue-50 bg-opacity-50 rounded-lg flex items-center justify-center pointer-events-none",children:n.jsx("div",{className:"bg-white px-4 py-2 rounded-lg shadow-lg border-2 border-blue-500",children:n.jsx("p",{className:"text-blue-700 font-semibold",children:"Drop field here to insert"})})})]}),n.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[n.jsx("p",{className:"mb-2",children:n.jsx("strong",{children:"Format examples:"})}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs font-mono bg-gray-50 p-3 rounded",children:[n.jsxs("li",{children:[n.jsx("code",{children:"{calculated.total_debt_per_capita:currency}"}),"  1,234"]}),n.jsxs("li",{children:[n.jsx("code",{children:"{calculated.change_percent:percentage}"}),"  5.2%"]}),n.jsxs("li",{children:[n.jsx("code",{children:"{council_name}"}),"  Worcestershire County Council"]}),n.jsxs("li",{children:[n.jsx("code",{children:"{financial.total_debt:number}"}),"  1,234,567"]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Factoid Type"}),n.jsxs("select",{value:l.factoid_type,onChange:h=>i("factoid_type",h.target.value),className:"form-input",children:[n.jsx("option",{value:"context",children:"Context"}),n.jsx("option",{value:"comparison",children:"Comparison"}),n.jsx("option",{value:"trend",children:"Trend"}),n.jsx("option",{value:"ranking",children:"Ranking"}),n.jsx("option",{value:"per_capita",children:"Per Capita"}),n.jsx("option",{value:"ratio",children:"Ratio"}),n.jsx("option",{value:"milestone",children:"Milestone"}),n.jsx("option",{value:"sustainability",children:"Sustainability"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Emoji"}),n.jsx("input",{type:"text",value:l.emoji,onChange:h=>i("emoji",h.target.value),placeholder:"",className:"form-input",maxLength:"10"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Priority"}),n.jsx("input",{type:"number",value:l.priority,onChange:h=>i("priority",parseInt(h.target.value)||0),placeholder:"50",className:"form-input",min:"0",max:"100"}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Higher values show first"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Color Scheme"}),n.jsxs("select",{value:l.color_scheme,onChange:h=>i("color_scheme",h.target.value),className:"form-input",children:[n.jsx("option",{value:"blue",children:"Blue"}),n.jsx("option",{value:"green",children:"Green"}),n.jsx("option",{value:"red",children:"Red"}),n.jsx("option",{value:"purple",children:"Purple"}),n.jsx("option",{value:"orange",children:"Orange"}),n.jsx("option",{value:"gray",children:"Gray"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Status"}),n.jsxs("div",{className:"flex items-center mt-2",children:[n.jsx("input",{type:"checkbox",id:"is_active",checked:l.is_active,onChange:h=>i("is_active",h.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900",children:"Active (will appear in factoid playlists)"})]})]})]}),!l.name.trim()&&n.jsx("div",{className:"text-red-600 text-sm",children:" Template name is required"}),!l.template_text.trim()&&n.jsx("div",{className:"text-red-600 text-sm",children:" Template text is required"})]})},px=({previewText:l,errors:i,template:c})=>{const[u,d]=j.useState(!1);j.useEffect(()=>{d(!0);const S=setTimeout(()=>d(!1),300);return()=>clearTimeout(S)},[l]);const w=(S=>{const M={blue:{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-900",accent:"text-blue-600"},green:{bg:"bg-green-50",border:"border-green-200",text:"text-green-900",accent:"text-green-600"},red:{bg:"bg-red-50",border:"border-red-200",text:"text-red-900",accent:"text-red-600"},purple:{bg:"bg-purple-50",border:"border-purple-200",text:"text-purple-900",accent:"text-purple-600"},orange:{bg:"bg-orange-50",border:"border-orange-200",text:"text-orange-900",accent:"text-orange-600"},gray:{bg:"bg-gray-50",border:"border-gray-200",text:"text-gray-900",accent:"text-gray-600"}};return M[S]||M.blue})(c.color_scheme),b=S=>S?S.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"):"",T=S=>S&&/\{[^}]+\}/.test(S);return n.jsx("div",{className:"live-preview",children:n.jsxs("div",{className:"preview-content",children:[n.jsxs("div",{className:"preview-title",children:[" Live Preview",c.emoji&&n.jsx("span",{className:"ml-2 text-2xl",children:c.emoji})]}),u?n.jsx("div",{className:"preview-text bg-gray-100 text-gray-500",children:n.jsxs("div",{className:"flex items-center justify-center",children:[n.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",className:"opacity-25"}),n.jsx("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",className:"opacity-75"})]}),"Updating preview..."]})}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:`preview-text ${w.bg} ${w.border} ${w.text} border-2`,children:[l?n.jsx("div",{dangerouslySetInnerHTML:{__html:b(l)}}):n.jsx("div",{className:"preview-empty",children:"Type template text to see preview..."}),T(l)&&n.jsx("div",{className:"mt-3 p-2 bg-yellow-100 border border-yellow-300 rounded text-yellow-800 text-sm",children:" Contains unresolved variables - check field names and formatting"})]}),i&&i.length>0&&n.jsxs("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-red-800 mb-2",children:" Preview Errors"}),n.jsx("ul",{className:"text-sm text-red-700 space-y-1",children:i.map((S,M)=>n.jsxs("li",{className:"flex items-start",children:[n.jsx("span",{className:"mr-2",children:""}),n.jsx("span",{children:S})]},M))})]}),n.jsxs("div",{className:"mt-4 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:" Factoid Properties"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Type:"}),n.jsx("span",{className:"ml-2 font-medium capitalize",children:c.factoid_type.replace("_"," ")})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Priority:"}),n.jsx("span",{className:"ml-2 font-medium",children:c.priority})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Color:"}),n.jsx("span",{className:`ml-2 font-medium capitalize ${w.accent}`,children:c.color_scheme})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Status:"}),n.jsx("span",{className:`ml-2 font-medium ${c.is_active?"text-green-600":"text-red-600"}`,children:c.is_active?"Active":"Inactive"})]})]})]}),n.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:" How it will appear"}),n.jsxs("div",{className:"text-sm text-blue-700",children:[n.jsx("p",{className:"mb-2",children:"This factoid will appear:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsx("li",{children:"Below counters on council detail pages"}),n.jsx("li",{children:"In animated factoid playlists"}),n.jsxs("li",{children:["With ",c.emoji," emoji and ",c.color_scheme," colors"]}),n.jsxs("li",{children:["Priority ",c.priority,c.priority>70?" (high - shows first)":c.priority>30?" (medium)":" (low - shows last)"]})]})]})]})]})]})})},vx=({config:l})=>{var z,ae,Q,fe,de,Y,J;console.log(" FactoidBuilder component mounting with config:",l);const[i,c]=j.useState(null),[u,d]=j.useState({name:((z=l.template)==null?void 0:z.name)||"",template_text:((ae=l.template)==null?void 0:ae.template_text)||"",factoid_type:((Q=l.template)==null?void 0:Q.factoid_type)||"context",emoji:((fe=l.template)==null?void 0:fe.emoji)||"",color_scheme:((de=l.template)==null?void 0:de.color_scheme)||"blue",priority:((Y=l.template)==null?void 0:Y.priority)||50,is_active:((J=l.template)==null?void 0:J.is_active)??!0}),[m,w]=j.useState(""),[b,T]=j.useState(!0),[S,M]=j.useState(null),[k,h]=j.useState(!1),[v,y]=j.useState([]);console.log(" Initial component state:",{fields:i,template:u,loading:b,error:S,saving:k});const x=j.useCallback(async(re,ne={})=>{const ie={"Content-Type":"application/json","X-CSRFToken":l.csrf_token,...ne.headers},ce=await fetch(re,{...ne,headers:ie,credentials:"same-origin"});if(!ce.ok)throw new Error(`API call failed: ${ce.status} ${ce.statusText}`);return await ce.json()},[l.csrf_token]);j.useEffect(()=>{console.log(" FactoidBuilder: Starting field loading..."),console.log(" API URL:",l.api_urls.fields),console.log(" CSRF Token:",l.csrf_token),(async()=>{try{console.log(" Making API call to load fields..."),T(!0);const ne=await x(l.api_urls.fields);console.log(" API Response:",ne),ne.success?(console.log(" Fields loaded successfully:",ne.fields),c(ne.fields)):(console.error(" API returned error:",ne.error),M(ne.error||"Failed to load fields"))}catch(ne){console.error(" API call failed:",ne),console.error("Error details:",{message:ne.message,stack:ne.stack,url:l.api_urls.fields}),M(`Failed to load fields: ${ne.message}`)}finally{console.log(" Field loading completed, setting loading=false"),T(!1)}})()},[x,l.api_urls.fields]),j.useEffect(()=>{const ne=setTimeout(async()=>{if(!u.template_text.trim()){w("Type some template text to see a live preview..."),y([]);return}try{const ie=await x(l.api_urls.preview,{method:"POST",body:JSON.stringify({template_text:u.template_text,council_slug:"worcestershire",year_label:"2024/25"})});ie.success?(w(ie.rendered_text||"Preview not available"),y(ie.errors||[])):(w(u.template_text),y([ie.error||"Preview failed"]))}catch(ie){w(u.template_text),y([`Preview error: ${ie.message}`])}},500);return()=>clearTimeout(ne)},[u.template_text,x,l.api_urls.preview]);const _=j.useCallback((re,ne)=>{const ie=u.template_text.substring(0,ne),ce=u.template_text.substring(ne),je=`${ie}{${re}:currency}${ce}`;d(we=>({...we,template_text:je}))},[u.template_text]),le=async()=>{if(!u.name.trim()){alert("Please enter a template name");return}if(!u.template_text.trim()){alert("Please enter template text");return}try{h(!0);const re=new FormData;re.append("name",u.name),re.append("template_text",u.template_text),re.append("factoid_type",u.factoid_type),re.append("emoji",u.emoji),re.append("color_scheme",u.color_scheme),re.append("priority",u.priority),re.append("is_active",u.is_active?"on":""),re.append("csrfmiddlewaretoken",l.csrf_token);const ne=await fetch(l.api_urls.save,{method:"POST",body:re,credentials:"same-origin",headers:{"X-CSRFToken":l.csrf_token}});if(ne.ok&&ne.url!==window.location.href)window.location.href=ne.url;else{const ie=await ne.text();console.error("Save failed:",ie),alert("Failed to save template. Please check the form and try again.")}}catch(re){console.error("Save error:",re),alert(`Save failed: ${re.message}`)}finally{h(!1)}},Z=(re,ne)=>{d(ie=>({...ie,[re]:ne}))};return b?n.jsx("div",{className:"loading-spinner",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("svg",{className:"w-8 h-8 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Loading Visual Factoid Builder..."]})}):S?n.jsxs("div",{className:"error-message",children:[n.jsx("h3",{className:"font-bold mb-2",children:"Error Loading Builder"}),n.jsx("p",{children:S}),n.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 btn btn-primary",children:"Retry"})]}):n.jsxs("div",{className:"grid grid-cols-12 h-full",children:[n.jsx("div",{className:"col-span-4 field-picker",children:n.jsx(hx,{fields:i,onFieldDrop:_})}),n.jsxs("div",{className:"col-span-8 template-editor",children:[n.jsxs("div",{className:"editor-header",children:[n.jsxs("h1",{className:"editor-title",children:[l.template?"Edit":"Create"," Factoid Template"]}),n.jsx("p",{className:"editor-subtitle",children:"Build dynamic factoids with drag-and-drop fields and live preview"})]}),n.jsxs("div",{className:"editor-content",children:[n.jsx(gx,{template:u,onChange:Z,onFieldDrop:_}),n.jsx(px,{previewText:m,errors:v,template:u})]}),n.jsxs("div",{className:"action-buttons",children:[n.jsx("button",{onClick:le,disabled:k,className:"btn btn-primary",children:k?n.jsxs(n.Fragment,{children:[n.jsx("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),l.template?"Update Template":"Create Template"]})}),n.jsx("a",{href:"/manage/factoid-templates/",className:"btn btn-secondary",children:"Cancel"})]})]})]})};console.log(" Main.jsx loading - React apps initialization");function xx(){const l=document.getElementById("factoid-builder-root");if(l)try{Zn.createRoot(l).render(n.jsx(xg,{})),console.log(" Factoid Builder app mounted successfully!")}catch(i){console.error(" Factoid Builder app mount failed:",i)}}function bx(){const l=document.getElementById("legacy-factoid-builder-root");if(l)try{Zn.createRoot(l).render(n.jsx(vx,{config:window.FACTOID_BUILDER_CONFIG||{}})),console.log(" Legacy Factoid Builder mounted successfully")}catch(i){console.error(" Legacy Factoid Builder mount failed:",i)}}function zm(){var T,S,M;console.log(" Checking for React app containers...");let l=[];document.getElementById("factoid-builder-root")&&(console.log(" Factoid Builder container found, initializing..."),xx(),l.push("Factoid Builder")),document.getElementById("legacy-factoid-builder-root")&&(console.log(" Legacy Factoid Builder container found, initializing..."),bx(),l.push("Legacy Factoid Builder")),document.getElementById("my-lists-react-root")&&(console.log(" My Lists container found, initializing..."),Zv(),l.push("My Lists"));const d=document.getElementById("council-edit-react-root");if(d){console.log(" Council Edit container found, initializing...");try{let k,h,v;try{k=JSON.parse(d.dataset.council||"{}"),h=JSON.parse(d.dataset.years||"[]"),v=d.dataset.csrfToken||"",console.log(" Council Edit: Data parsed successfully",{council:k.name,years:h.length,hasCSRF:!!v})}catch(_){throw console.error(" Council Edit: Failed to parse data",_),_}console.log(" Council Edit: Mounting React app directly..."),Zn.createRoot(d).render(n.jsx(ux,{councilData:k,initialYears:h,csrfToken:v})),d.dataset.reactMounted="true";const x=document.getElementById("council-edit-loading-fallback");x&&(x.style.display="none",console.log(" Council Edit: Loading fallback hidden")),l.push("Council Edit"),console.log(" Council Edit: React app mounted successfully")}catch(k){console.error(" Council Edit app initialization failed:",k);const h=document.getElementById("council-edit-fallback-interface");if(h){const v=document.getElementById("council-edit-loading-fallback");v&&(v.style.display="none"),h.classList.remove("hidden"),h.classList.add("block")}}}const m=document.getElementById("comparison-basket-react-root");if(m){console.log(" Comparison Basket container found, initializing...");try{let k,h;try{const x=document.getElementById("comparison-basket-initial-data");x?k=JSON.parse(x.textContent):k=JSON.parse(m.dataset.initialData||"{}"),h=m.dataset.csrfToken||"",console.log(" Comparison Basket: Data parsed successfully",{councils:((T=k.councils)==null?void 0:T.length)||0,fields:((S=k.availableFields)==null?void 0:S.length)||0,years:((M=k.availableYears)==null?void 0:M.length)||0,hasCSRF:!!h})}catch(x){console.error(" Comparison Basket: Failed to parse data",x),k={},h=""}console.log(" Comparison Basket: Mounting React app directly..."),Zn.createRoot(m).render(n.jsx(dx,{initialData:k,csrfToken:h,onComparisonToggle:!0})),m.dataset.reactMounted="true";const y=document.getElementById("comparison-basket-loading-fallback");y&&(y.style.display="none",console.log(" Comparison Basket: Loading fallback hidden")),l.push("Comparison Basket"),console.log(" Comparison Basket: React app mounted successfully")}catch(k){console.error(" Comparison Basket app initialization failed:",k);const h=document.getElementById("comparison-basket-fallback-interface");if(h){const v=document.getElementById("comparison-basket-loading-fallback");v&&(v.style.display="none"),h.classList.remove("hidden"),h.classList.add("block")}}}const w=document.querySelectorAll("[data-add-to-basket]");if(w.length>0&&(console.log(` Found ${w.length} Add to Basket button(s), initializing...`),w.forEach((k,h)=>{try{const v=k.dataset.councilSlug,y=k.dataset.councilName;v&&y?(Zn.createRoot(k).render(n.jsx(fx,{councilSlug:v,councilName:y})),console.log(` Add to Basket button ${h+1} mounted for: ${y}`)):console.warn(` Add to Basket button ${h+1} missing data attributes`)}catch(v){console.error(` Add to Basket button ${h+1} initialization failed:`,v)}}),l.push(`${w.length} Add to Basket Button(s)`)),!(window.location.pathname==="/compare/"||window.location.pathname.startsWith("/compare/"))||!m){console.log(" Initializing Global Comparison overlay...");try{const k=document.createElement("div");k.id="global-comparison-root",document.body.appendChild(k),Zn.createRoot(k).render(n.jsx(mx,{})),l.push("Global Comparison Overlay"),console.log(" Global Comparison overlay mounted successfully")}catch(k){console.error(" Global Comparison initialization failed:",k)}}else console.log(" Skipping Global Comparison on compare page (using dedicated app instead)");l.length>0?console.log(` Initialized ${l.length} React app(s): ${l.join(", ")}`):console.log(" No React app containers found on this page")}function yx(){document.readyState==="loading"?(console.log(" Waiting for DOM to be ready..."),document.addEventListener("DOMContentLoaded",zm)):(console.log(" DOM already ready, initializing immediately..."),zm())}try{yx()}catch(l){console.error(" Critical error in main.jsx:",l);const i=document.createElement("div");i.innerHTML=`
    <div style="padding: 20px; text-align: center; background: #fee; border: 1px solid #fcc; margin: 20px; border-radius: 8px;">
      <h3 style="color: #c33;">JavaScript Module Failed</h3>
      <p>Error: ${l.message}</p>
      <pre style="background: #f5f5f5; padding: 10px; border-radius: 4px; text-align: left; font-size: 12px;">${l.stack}</pre>
      <button onclick="window.location.reload()" style="margin-top: 10px; padding: 8px 16px; background: #c33; color: white; border: none; border-radius: 4px; cursor: pointer;">
        Reload Page
      </button>
    </div>
  `,document.body.appendChild(i)}
